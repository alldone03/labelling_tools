var e=Object.defineProperty,t=(t,i,a)=>(((t,i,a)=>{i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a})(t,"symbol"!=typeof i?i+"":i,a),a);import{r as i,b as a}from"./runtime.4fb8333c.js";import{r as n}from"./runtime-dom.3c093cb0.js";import{_ as o,a as r,j as s,h as l,p as c,b as d,F as p,s as u,T as h,t as m,c as f,d as g,e as b}from"./ui.bb8e6e45.js";import{c as v,g as T,l as S}from"./lodash.1facd211.js";import{c as y}from"./classnames.f9d2a9c9.js";import{c as A,l as w}from"./models.2e3b1f5a.js";import{l as x,w as E,u as P,j as I,x as C,t as O,y as _}from"./ai.39eec2e0.js";import{h as L}from"./moment.40bc58bf.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var D={},R=n.exports;D.createRoot=R.createRoot,D.hydrateRoot=R.hydrateRoot;var M={exports:{}},N={},k=i.exports;var B="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},G=k.useState,H=k.useEffect,V=k.useLayoutEffect,z=k.useDebugValue;function F(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!B(e,i)}catch(a){return!0}}var U="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),a=G({inst:{value:i,getSnapshot:t}}),n=a[0].inst,o=a[1];return V(function(){n.value=i,n.getSnapshot=t,F(n)&&o({inst:n})},[e,i,t]),H(function(){return F(n)&&o({inst:n}),e(function(){F(n)&&o({inst:n})})},[e]),z(i),i};N.useSyncExternalStore=void 0!==k.useSyncExternalStore?k.useSyncExternalStore:U,M.exports=N;var j={},W=i.exports,X=M.exports;var K="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Y=X.useSyncExternalStore,Z=W.useRef,q=W.useEffect,J=W.useMemo,$=W.useDebugValue;j.useSyncExternalStoreWithSelector=function(e,t,i,a,n){var o=Z(null);if(null===o.current){var r={hasValue:!1,value:null};o.current=r}else r=o.current;o=J(function(){function e(e){if(!l){if(l=!0,o=e,e=a(e),void 0!==n&&r.hasValue){var t=r.value;if(n(t,e))return s=t}return s=e}if(t=s,K(o,e))return t;var i=a(e);return void 0!==n&&n(t,i)?(o=e,t):(o=e,s=i)}var o,s,l=!1,c=void 0===i?null:i;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,i,a,n]);var s=Y(e,o[0],o[1]);return q(function(){r.hasValue=!0,r.value=s},[s]),$(s),s};let Q=function(e){e()};const ee=Symbol.for("react-redux-context"),te="undefined"!=typeof globalThis?globalThis:{};function ie(){var e;if(!i.exports.createContext)return{};const t=null!=(e=te[ee])?e:te[ee]=new Map;let a=t.get(i.exports.createContext);return a||(a=i.exports.createContext(null),t.set(i.exports.createContext,a)),a}const ae=ie();var ne,oe={exports:{}},re={},se=Symbol.for("react.element"),le=Symbol.for("react.portal"),ce=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),he=Symbol.for("react.context"),me=Symbol.for("react.server_context"),fe=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen");function ye(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case se:switch(e=e.type){case ce:case pe:case de:case ge:case be:return e;default:switch(e=e&&e.$$typeof){case me:case he:case fe:case Te:case ve:case ue:return e;default:return t}}case le:return t}}}ne=Symbol.for("react.module.reference"),re.ContextConsumer=he,re.ContextProvider=ue,re.Element=se,re.ForwardRef=fe,re.Fragment=ce,re.Lazy=Te,re.Memo=ve,re.Portal=le,re.Profiler=pe,re.StrictMode=de,re.Suspense=ge,re.SuspenseList=be,re.isAsyncMode=function(){return!1},re.isConcurrentMode=function(){return!1},re.isContextConsumer=function(e){return ye(e)===he},re.isContextProvider=function(e){return ye(e)===ue},re.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===se},re.isForwardRef=function(e){return ye(e)===fe},re.isFragment=function(e){return ye(e)===ce},re.isLazy=function(e){return ye(e)===Te},re.isMemo=function(e){return ye(e)===ve},re.isPortal=function(e){return ye(e)===le},re.isProfiler=function(e){return ye(e)===pe},re.isStrictMode=function(e){return ye(e)===de},re.isSuspense=function(e){return ye(e)===ge},re.isSuspenseList=function(e){return ye(e)===be},re.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ce||e===pe||e===de||e===ge||e===be||e===Se||"object"==typeof e&&null!==e&&(e.$$typeof===Te||e.$$typeof===ve||e.$$typeof===ue||e.$$typeof===he||e.$$typeof===fe||e.$$typeof===ne||void 0!==e.getModuleId)},re.typeOf=ye,oe.exports=re;const Ae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function we(e,t,i,a,{areStatesEqual:n,areOwnPropsEqual:o,areStatePropsEqual:r}){let s,l,c,d,p,u=!1;function h(u,h){const m=!o(h,l),f=!n(u,s,h,l);return s=u,l=h,m&&f?(c=e(s,l),t.dependsOnOwnProps&&(d=t(a,l)),p=i(c,d,l),p):m?(e.dependsOnOwnProps&&(c=e(s,l)),t.dependsOnOwnProps&&(d=t(a,l)),p=i(c,d,l),p):f?function(){const t=e(s,l),a=!r(t,c);return c=t,a&&(p=i(c,d,l)),p}():p}return function(n,o){return u?h(n,o):(s=n,l=o,c=e(s,l),d=t(a,l),p=i(c,d,l),u=!0,p)}}function xe(e){return function(t){const i=e(t);function a(){return i}return a.dependsOnOwnProps=!1,a}}function Ee(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Pe(e,t){return function(t,{displayName:i}){const a=function(e,t){return a.dependsOnOwnProps?a.mapToProps(e,t):a.mapToProps(e,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(t,i){a.mapToProps=e,a.dependsOnOwnProps=Ee(e);let n=a(t,i);return"function"==typeof n&&(a.mapToProps=n,a.dependsOnOwnProps=Ee(n),n=a(t,i)),n},a}}function Ie(e,t){return(i,a)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${a.wrappedComponentName}.`)}}function Ce(e,t,i){return r({},i,e,t)}function Oe(){const e=Q;let t=null,i=null;return{clear(){t=null,i=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],i=t;for(;i;)e.push(i),i=i.next;return e},subscribe(e){let a=!0,n=i={callback:e,next:null,prev:i};return n.prev?n.prev.next=n:t=n,function(){a&&null!==t&&(a=!1,n.next?n.next.prev=n.prev:i=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}const _e={notify(){},get:()=>[]};function Le(e,t){let i,a=_e,n=0,o=!1;function r(){c.onStateChange&&c.onStateChange()}function s(){n++,i||(i=t?t.addNestedSub(r):e.subscribe(r),a=Oe())}function l(){n--,i&&0===n&&(i(),i=void 0,a.clear(),a=_e)}const c={addNestedSub:function(e){s();const t=a.subscribe(e);let i=!1;return()=>{i||(i=!0,t(),l())}},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:r,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>a};return c}const De=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?i.exports.useLayoutEffect:i.exports.useEffect;function Re(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Me(e,t){if(Re(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(let n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(t,i[n])||!Re(e[i[n]],t[i[n]]))return!1;return!0}const Ne=["reactReduxForwardedRef"];let ke=()=>{throw new Error("uSES not initialized!")};const Be=[null,null];function Ge(e,t,i,a,n,o){e.current=a,i.current=!1,n.current&&(n.current=null,o())}function He(e,t){return e===t}function Ve(e,t,a,{pure:n,areStatesEqual:c=He,areOwnPropsEqual:d=Me,areStatePropsEqual:p=Me,areMergedPropsEqual:u=Me,forwardRef:h=!1,context:m=ae}={}){const f=m,g=function(e){return e?"function"==typeof e?Pe(e):Ie(e,"mapStateToProps"):xe(()=>({}))}(e),b=function(e){return e&&"object"==typeof e?xe(t=>function(e,t){const i={};for(const a in e){const n=e[a];"function"==typeof n&&(i[a]=(...e)=>t(n(...e)))}return i}(e,t)):e?"function"==typeof e?Pe(e):Ie(e,"mapDispatchToProps"):xe(e=>({dispatch:e}))}(t),v=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:i,areMergedPropsEqual:a}){let n,o=!1;return function(t,i,r){const s=e(t,i,r);return o?a(s,n)||(n=s):(o=!0,n=s),n}}}(e):Ie(e,"mergeProps"):()=>Ce}(a),T=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",a=`Connect(${t})`,n={shouldHandleStateChanges:T,displayName:a,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:g,initMapDispatchToProps:b,initMergeProps:v,areStatesEqual:c,areStatePropsEqual:p,areOwnPropsEqual:d,areMergedPropsEqual:u};function m(t){const[a,l,c]=i.exports.useMemo(()=>{const{reactReduxForwardedRef:e}=t,i=o(t,Ne);return[t.context,e,i]},[t]),d=i.exports.useMemo(()=>a&&a.Consumer&&oe.exports.isContextConsumer(i.exports.createElement(a.Consumer,null))?a:f,[a,f]),p=i.exports.useContext(d),u=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),h=Boolean(p)&&Boolean(p.store),m=u?t.store:p.store,g=h?p.getServerState:m.getState,b=i.exports.useMemo(()=>function(e,t){let{initMapStateToProps:i,initMapDispatchToProps:a,initMergeProps:n}=t,r=o(t,Ae);return we(i(e,r),a(e,r),n(e,r),e,r)}(m.dispatch,n),[m]),[v,S]=i.exports.useMemo(()=>{if(!T)return Be;const e=Le(m,u?void 0:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,u,p]),y=i.exports.useMemo(()=>u?p:r({},p,{subscription:v}),[u,p,v]),A=i.exports.useRef(),w=i.exports.useRef(c),x=i.exports.useRef(),E=i.exports.useRef(!1);i.exports.useRef(!1);const P=i.exports.useRef(!1),I=i.exports.useRef();De(()=>(P.current=!0,()=>{P.current=!1}),[]);const C=i.exports.useMemo(()=>()=>x.current&&c===w.current?x.current:b(m.getState(),c),[m,c]),O=i.exports.useMemo(()=>e=>v?function(e,t,i,a,n,o,r,s,l,c,d){if(!e)return()=>{};let p=!1,u=null;const h=()=>{if(p||!s.current)return;const e=t.getState();let i,h;try{i=a(e,n.current)}catch(m){h=m,u=m}h||(u=null),i===o.current?r.current||c():(o.current=i,l.current=i,r.current=!0,d())};return i.onStateChange=h,i.trySubscribe(),h(),()=>{if(p=!0,i.tryUnsubscribe(),i.onStateChange=null,u)throw u}}(T,m,v,b,w,A,E,P,x,S,e):()=>{},[v]);var _,L,D;let R;_=Ge,L=[w,A,E,c,x,S],De(()=>_(...L),D);try{R=ke(O,C,g?()=>b(g(),c):C)}catch(N){throw I.current&&(N.message+=`\nThe error may be correlated with this previous error:\n${I.current.stack}\n\n`),N}De(()=>{I.current=void 0,x.current=void 0,A.current=R});const M=i.exports.useMemo(()=>s(e,{...R,ref:l}),[l,e,R]);return i.exports.useMemo(()=>T?s(d.Provider,{value:y,children:M}):M,[d,M,y])}const S=i.exports.memo(m);if(S.WrappedComponent=e,S.displayName=m.displayName=a,h){const t=i.exports.forwardRef(function(e,t){return s(S,{...e,reactReduxForwardedRef:t})});return t.displayName=a,t.WrappedComponent=e,l(t,e)}return l(S,e)}}function ze({store:e,context:t,children:a,serverState:n,stabilityCheck:o="once",noopCheck:r="once"}){const l=i.exports.useMemo(()=>{const t=Le(e);return{store:e,subscription:t,getServerState:n?()=>n:void 0,stabilityCheck:o,noopCheck:r}},[e,n,o,r]),c=i.exports.useMemo(()=>e.getState(),[e]);De(()=>{const{subscription:t}=l;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),c!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[l,c]);return s((t||ae).Provider,{value:l,children:a})}var Fe,Ue;Fe=M.exports.useSyncExternalStore,ke=Fe,Ue=n.exports.unstable_batchedUpdates,Q=Ue;var je=(e=>(e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT",e.TOP_RIGHT="TOP_RIGHT",e.TOP_LEFT="TOP_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.CENTER="CENTER",e))(je||{}),We=(e=>(e.LOAD_LABEL_NAMES="LOAD_LABEL_NAMES",e.UPDATE_LABEL="UPDATE_LABEL",e.SUGGEST_LABEL_NAMES="SUGGEST_LABEL_NAMES",e.IMPORT_IMAGES="IMPORT_IMAGES",e.LOAD_AI_MODEL="LOAD_AI_MODEL",e.CONNECT_AI_MODEL_VIA_API="CONNECT_AI_MODEL_VIA_API",e.LOAD_YOLO_V5_MODEL="LOAD_YOLO_V5_MODEL",e.EXPORT_ANNOTATIONS="EXPORT_ANNOTATIONS",e.IMPORT_ANNOTATIONS="IMPORT_ANNOTATIONS",e.INSERT_LABEL_NAMES="INSERT_LABEL_NAMES",e.EXIT_PROJECT="EXIT_PROJECT",e.LOADER="LOADER",e))(We||{});const Xe=class{};let Ke=Xe;t(Ke,"GITHUB_URL","https://github.com/SkalskiP"),t(Ke,"MEDIUM_URL","https://medium.com/@piotr.skalski92"),t(Ke,"TWITCH_URL","https://www.twitch.tv/skalskip"),t(Ke,"YOUTUBE_URL","https://www.youtube.com/watch?v=AWjKfjDGiYE"),t(Ke,"TOP_NAVIGATION_BAR_HEIGHT_PX",35),t(Ke,"EDITOR_BOTTOM_NAVIGATION_BAR_HEIGHT_PX",41),t(Ke,"EDITOR_TOP_NAVIGATION_BAR_HEIGHT_PX",41),t(Ke,"SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX",24),t(Ke,"SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX",Xe.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX+300+1),t(Ke,"TOOLKIT_TAB_HEIGHT_PX",40),t(Ke,"TOOLBOX_PANEL_WIDTH_PX",51),t(Ke,"MAX_DROPDOWN_OPTION_LENGTH",20),t(Ke,"EDITOR_MIN_WIDTH",900),t(Ke,"EDITOR_MIN_HEIGHT",500),t(Ke,"PRIMARY_COLOR","#2af598"),t(Ke,"SECONDARY_COLOR","#009efd"),t(Ke,"DARK_THEME_FIRST_COLOR","#171717"),t(Ke,"DARK_THEME_SECOND_COLOR","#282828"),t(Ke,"DARK_THEME_THIRD_COLOR","#4c4c4c"),t(Ke,"DARK_THEME_FORTH_COLOR","#262c2f"),t(Ke,"CROSS_HAIR_THICKNESS_PX",1),t(Ke,"CROSS_HAIR_COLOR","#fff"),t(Ke,"RESIZE_HANDLE_DIMENSION_PX",8),t(Ke,"RESIZE_HANDLE_HOVER_DIMENSION_PX",16),t(Ke,"CLOSEABLE_POPUPS",[We.IMPORT_IMAGES,We.EXPORT_ANNOTATIONS,We.IMPORT_ANNOTATIONS,We.EXIT_PROJECT,We.UPDATE_LABEL,We.LOAD_AI_MODEL,We.LOAD_YOLO_V5_MODEL]),t(Ke,"LABEL_COLORS_PALETTE",["#ff3838","#ff9d97","#ff701f","#ffb21d","#cff231","#48f90a","#92cc17","#3ddb86","#1a9334","#00d4bb","#2c99a8","#00c2ff","#344593","#6473ff","#0018ec","#8438ff","#520085","#cb38ff","#ff95c8","#ff37c7"]),t(Ke,"CSV_SEPARATOR",","),t(Ke,"RECT_LABELS_EXPORT_CSV_COLUMN_NAMES",["label_name","bbox_x","bbox_y","bbox_width","bbox_height","image_name","image_width","image_height"].join(Xe.CSV_SEPARATOR));var Ye=(e=>(e.IMAGE_RECOGNITION="IMAGE RECOGNITION",e.POINT="POINT",e.RECT="RECT",e.POLYGON="POLYGON",e.LINE="LINE",e))(Ye||{}),Ze={},qe={},Je={exports:{}},$e={exports:{}};(function(){var e,t,i,a,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?$e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?($e.exports=function(){return(e()-n)/1e6},t=process.hrtime,a=(e=function(){var e;return 1e9*(e=t())[0]+e[1]})(),o=1e9*process.uptime(),n=a-o):Date.now?($e.exports=function(){return Date.now()-i},i=Date.now()):($e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(v);for(var Qe=$e.exports,et="undefined"==typeof window?v:window,tt=["moz","webkit"],it="AnimationFrame",at=et["request"+it],nt=et["cancel"+it]||et["cancelRequest"+it],ot=0;!at&&ot<tt.length;ot++)at=et[tt[ot]+"Request"+it],nt=et[tt[ot]+"Cancel"+it]||et[tt[ot]+"CancelRequest"+it];if(!at||!nt){var rt=0,st=0,lt=[],ct=1e3/60;at=function(e){if(0===lt.length){var t=Qe(),i=Math.max(0,ct-(t-rt));rt=i+t,setTimeout(function(){var e=lt.slice(0);lt.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(rt)}catch(i){setTimeout(function(){throw i},0)}},Math.round(i))}return lt.push({handle:++st,callback:e,cancelled:!1}),st},nt=function(e){for(var t=0;t<lt.length;t++)lt[t].handle===e&&(lt[t].cancelled=!0)}}Je.exports=function(e){return at.call(et,e)},Je.exports.cancel=function(){nt.apply(et,arguments)},Je.exports.polyfill=function(e){e||(e=et),e.requestAnimationFrame=at,e.cancelAnimationFrame=nt};var dt={exports:{}},pt=null,ut=["Webkit","Moz","O","ms"],ht=function(e){return mt.test(e)?e.toLowerCase():ft.test(e)?(function(e){return e.replace(bt,function(e,t){return t?" "+t:""})}(e)||e).toLowerCase():gt.test(e)?function(e){return e.replace(vt,function(e,t,i){return t+" "+i.toLowerCase().split("").join(" ")})}(e).toLowerCase():e.toLowerCase()},mt=/\s/,ft=/(_|-|\.|:)/,gt=/([a-z][A-Z]|[A-Z][a-z])/;var bt=/[\W_]+(.|$)/g;var vt=/(.)([A-Z]+)/g;var Tt=ht;var St=function(e){return Tt(e).replace(/[\W_]+(.|$)/g,function(e,t){return t?" "+t:""}).trim()};var yt={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},At=function(e){pt||(pt=document.createElement("div"));var t=pt.style;if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),a=ut.length;a>=0;a--){var n=ut[a]+i;if(n in t)return n}return!1},wt=function(e){return St(e).replace(/\s(\w)/g,function(e,t){return t.toUpperCase()})},xt={float:"cssFloat"},Et=function(e,t){return"number"!=typeof t||yt[e]?t:t+"px"};function Pt(e,t,i){var a=xt[t];if(void 0===a&&(a=function(e){var t=wt(e),i=At(t);return xt[t]=xt[e]=xt[i]=i,i}(t)),a){if(void 0===i)return e.style[a];e.style[a]=Et(a,i)}}function It(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:function(e,t){for(var i in t)t.hasOwnProperty(i)&&Pt(e,i,t[i])}(arguments[0],arguments[1]):Pt(arguments[0],arguments[1],arguments[2])}dt.exports=It,dt.exports.set=It,dt.exports.get=function(e,t){return Array.isArray(t)?t.reduce(function(t,i){return t[i]=Pt(e,i||""),t},{}):Pt(e,t||"")};var Ct,Ot={};Ct=Ot,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=function(e){return"string"==typeof e};var _t={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&!1!==n)return n;if("undefined"!=typeof document){var t=document.createElement("div");(0,a.default)(t,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(t),n=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}else n=0;return n||0};var t,i=dt.exports,a=(t=i)&&t.__esModule?t:{default:t};var n=!1}(_t);var Lt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return!1}}(Lt);var Dt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientWidth,i=getComputedStyle(e),a=i.paddingLeft,n=i.paddingRight;return t-parseFloat(a)-parseFloat(n)}}(Dt);var Rt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t=e.clientHeight,i=getComputedStyle(e),a=i.paddingTop,n=i.paddingBottom;return t-parseFloat(a)-parseFloat(n)}}(Rt);var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},Mt.containerStyleAutoHeight={height:"auto"},Mt.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},Mt.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},Mt.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},Mt.trackHorizontalStyleDefault={position:"absolute",height:6},Mt.trackVerticalStyleDefault={position:"absolute",width:6},Mt.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},Mt.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},Mt.disableSelectStyle={userSelect:"none"},Mt.disableSelectStyleReset={userSelect:""};var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};Nt.renderViewDefault=function(e){return Ht.default.createElement("div",e)},Nt.renderTrackHorizontalDefault=function(e){var t=e.style,i=Vt(e,["style"]),a=kt({},t,{right:2,bottom:2,left:2,borderRadius:3});return Ht.default.createElement("div",kt({style:a},i))},Nt.renderTrackVerticalDefault=function(e){var t=e.style,i=Vt(e,["style"]),a=kt({},t,{right:2,bottom:2,top:2,borderRadius:3});return Ht.default.createElement("div",kt({style:a},i))},Nt.renderThumbHorizontalDefault=function(e){var t=e.style,i=Vt(e,["style"]),a=kt({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return Ht.default.createElement("div",kt({style:a},i))},Nt.renderThumbVerticalDefault=function(e){var t=e.style,i=Vt(e,["style"]),a=kt({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return Ht.default.createElement("div",kt({style:a},i))};var Bt,Gt=i.exports,Ht=(Bt=Gt)&&Bt.__esModule?Bt:{default:Bt};function Vt(e,t){var i={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=Je.exports,o=b(n),r=b(dt.exports),s=i.exports,l=b(c.exports),d=b(Ot),p=b(_t),u=b(Lt),h=b(Dt),m=b(Rt),f=Mt,g=Nt;function b(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,n=Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this,e].concat(n)));return r.getScrollLeft=r.getScrollLeft.bind(r),r.getScrollTop=r.getScrollTop.bind(r),r.getScrollWidth=r.getScrollWidth.bind(r),r.getScrollHeight=r.getScrollHeight.bind(r),r.getClientWidth=r.getClientWidth.bind(r),r.getClientHeight=r.getClientHeight.bind(r),r.getValues=r.getValues.bind(r),r.getThumbHorizontalWidth=r.getThumbHorizontalWidth.bind(r),r.getThumbVerticalHeight=r.getThumbVerticalHeight.bind(r),r.getScrollLeftForOffset=r.getScrollLeftForOffset.bind(r),r.getScrollTopForOffset=r.getScrollTopForOffset.bind(r),r.scrollLeft=r.scrollLeft.bind(r),r.scrollTop=r.scrollTop.bind(r),r.scrollToLeft=r.scrollToLeft.bind(r),r.scrollToTop=r.scrollToTop.bind(r),r.scrollToRight=r.scrollToRight.bind(r),r.scrollToBottom=r.scrollToBottom.bind(r),r.handleTrackMouseEnter=r.handleTrackMouseEnter.bind(r),r.handleTrackMouseLeave=r.handleTrackMouseLeave.bind(r),r.handleHorizontalTrackMouseDown=r.handleHorizontalTrackMouseDown.bind(r),r.handleVerticalTrackMouseDown=r.handleVerticalTrackMouseDown.bind(r),r.handleHorizontalThumbMouseDown=r.handleHorizontalThumbMouseDown.bind(r),r.handleVerticalThumbMouseDown=r.handleVerticalThumbMouseDown.bind(r),r.handleWindowResize=r.handleWindowResize.bind(r),r.handleScroll=r.handleScroll.bind(r),r.handleDrag=r.handleDrag.bind(r),r.handleDragEnd=r.handleDragEnd.bind(r),r.state={didMountUniversal:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e),a(i,[{key:"componentDidMount",value:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()}},{key:"componentDidMountUniversal",value:function(){this.props.universal&&this.setState({didMountUniversal:!0})}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"componentWillUnmount",value:function(){this.removeListeners(),(0,n.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)}},{key:"getScrollLeft",value:function(){return this.view?this.view.scrollLeft:0}},{key:"getScrollTop",value:function(){return this.view?this.view.scrollTop:0}},{key:"getScrollWidth",value:function(){return this.view?this.view.scrollWidth:0}},{key:"getScrollHeight",value:function(){return this.view?this.view.scrollHeight:0}},{key:"getClientWidth",value:function(){return this.view?this.view.clientWidth:0}},{key:"getClientHeight",value:function(){return this.view?this.view.clientHeight:0}},{key:"getValues",value:function(){var e=this.view||{},t=e.scrollLeft,i=void 0===t?0:t,a=e.scrollTop,n=void 0===a?0:a,o=e.scrollWidth,r=void 0===o?0:o,s=e.scrollHeight,l=void 0===s?0:s,c=e.clientWidth,d=void 0===c?0:c,p=e.clientHeight,u=void 0===p?0:p;return{left:i/(r-d)||0,top:n/(l-u)||0,scrollLeft:i,scrollTop:n,scrollWidth:r,scrollHeight:l,clientWidth:d,clientHeight:u}}},{key:"getThumbHorizontalWidth",value:function(){var e=this.props,t=e.thumbSize,i=e.thumbMinSize,a=this.view,n=a.scrollWidth,o=a.clientWidth,r=(0,h.default)(this.trackHorizontal),s=Math.ceil(o/n*r);return r<=s?0:t||Math.max(s,i)}},{key:"getThumbVerticalHeight",value:function(){var e=this.props,t=e.thumbSize,i=e.thumbMinSize,a=this.view,n=a.scrollHeight,o=a.clientHeight,r=(0,m.default)(this.trackVertical),s=Math.ceil(o/n*r);return r<=s?0:t||Math.max(s,i)}},{key:"getScrollLeftForOffset",value:function(e){var t=this.view,i=t.scrollWidth,a=t.clientWidth;return e/((0,h.default)(this.trackHorizontal)-this.getThumbHorizontalWidth())*(i-a)}},{key:"getScrollTopForOffset",value:function(e){var t=this.view,i=t.scrollHeight,a=t.clientHeight;return e/((0,m.default)(this.trackVertical)-this.getThumbVerticalHeight())*(i-a)}},{key:"scrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollLeft=e)}},{key:"scrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.view&&(this.view.scrollTop=e)}},{key:"scrollToLeft",value:function(){this.view&&(this.view.scrollLeft=0)}},{key:"scrollToTop",value:function(){this.view&&(this.view.scrollTop=0)}},{key:"scrollToRight",value:function(){this.view&&(this.view.scrollLeft=this.view.scrollWidth)}},{key:"scrollToBottom",value:function(){this.view&&(this.view.scrollTop=this.view.scrollHeight)}},{key:"addListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,i=this.trackVertical,a=this.thumbHorizontal,n=this.thumbVertical;e.addEventListener("scroll",this.handleScroll),(0,p.default)()&&(t.addEventListener("mouseenter",this.handleTrackMouseEnter),t.addEventListener("mouseleave",this.handleTrackMouseLeave),t.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),i.addEventListener("mouseenter",this.handleTrackMouseEnter),i.addEventListener("mouseleave",this.handleTrackMouseLeave),i.addEventListener("mousedown",this.handleVerticalTrackMouseDown),a.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),n.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}}},{key:"removeListeners",value:function(){if("undefined"!=typeof document&&this.view){var e=this.view,t=this.trackHorizontal,i=this.trackVertical,a=this.thumbHorizontal,n=this.thumbVertical;e.removeEventListener("scroll",this.handleScroll),(0,p.default)()&&(t.removeEventListener("mouseenter",this.handleTrackMouseEnter),t.removeEventListener("mouseleave",this.handleTrackMouseLeave),t.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),i.removeEventListener("mouseenter",this.handleTrackMouseEnter),i.removeEventListener("mouseleave",this.handleTrackMouseLeave),i.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),a.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),n.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}}},{key:"handleScroll",value:function(e){var t=this,i=this.props,a=i.onScroll,n=i.onScrollFrame;a&&a(e),this.update(function(e){var i=e.scrollLeft,a=e.scrollTop;t.viewScrollLeft=i,t.viewScrollTop=a,n&&n(e)}),this.detectScrolling()}},{key:"handleScrollStart",value:function(){var e=this.props.onScrollStart;e&&e(),this.handleScrollStartAutoHide()}},{key:"handleScrollStartAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleScrollStop",value:function(){var e=this.props.onScrollStop;e&&e(),this.handleScrollStopAutoHide()}},{key:"handleScrollStopAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleWindowResize",value:function(){(0,p.default)(!1),this.forceUpdate()}},{key:"handleHorizontalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,i=e.clientX,a=t.getBoundingClientRect().left,n=this.getThumbHorizontalWidth(),o=Math.abs(a-i)-n/2;this.view.scrollLeft=this.getScrollLeftForOffset(o)}},{key:"handleVerticalTrackMouseDown",value:function(e){e.preventDefault();var t=e.target,i=e.clientY,a=t.getBoundingClientRect().top,n=this.getThumbVerticalHeight(),o=Math.abs(a-i)-n/2;this.view.scrollTop=this.getScrollTopForOffset(o)}},{key:"handleHorizontalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,i=e.clientX,a=t.offsetWidth,n=t.getBoundingClientRect().left;this.prevPageX=a-(i-n)}},{key:"handleVerticalThumbMouseDown",value:function(e){e.preventDefault(),this.handleDragStart(e);var t=e.target,i=e.clientY,a=t.offsetHeight,n=t.getBoundingClientRect().top;this.prevPageY=a-(i-n)}},{key:"setupDragging",value:function(){(0,r.default)(document.body,f.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=u.default}},{key:"teardownDragging",value:function(){(0,r.default)(document.body,f.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0}},{key:"handleDragStart",value:function(e){this.dragging=!0,e.stopImmediatePropagation(),this.setupDragging()}},{key:"handleDrag",value:function(e){if(this.prevPageX){var t=e.clientX,i=-this.trackHorizontal.getBoundingClientRect().left+t-(this.getThumbHorizontalWidth()-this.prevPageX);this.view.scrollLeft=this.getScrollLeftForOffset(i)}if(this.prevPageY){var a=e.clientY,n=-this.trackVertical.getBoundingClientRect().top+a-(this.getThumbVerticalHeight()-this.prevPageY);this.view.scrollTop=this.getScrollTopForOffset(n)}return!1}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()}},{key:"handleDragEndAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"handleTrackMouseEnter",value:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()}},{key:"handleTrackMouseEnterAutoHide",value:function(){this.props.autoHide&&this.showTracks()}},{key:"handleTrackMouseLeave",value:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()}},{key:"handleTrackMouseLeaveAutoHide",value:function(){this.props.autoHide&&this.hideTracks()}},{key:"showTracks",value:function(){clearTimeout(this.hideTracksTimeout),(0,r.default)(this.trackHorizontal,{opacity:1}),(0,r.default)(this.trackVertical,{opacity:1})}},{key:"hideTracks",value:function(){var e=this;if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var t=this.props.autoHideTimeout;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout(function(){(0,r.default)(e.trackHorizontal,{opacity:0}),(0,r.default)(e.trackVertical,{opacity:0})},t)}}},{key:"detectScrolling",value:function(){var e=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval(function(){e.lastViewScrollLeft===e.viewScrollLeft&&e.lastViewScrollTop===e.viewScrollTop&&(clearInterval(e.detectScrollingInterval),e.scrolling=!1,e.handleScrollStop()),e.lastViewScrollLeft=e.viewScrollLeft,e.lastViewScrollTop=e.viewScrollTop},100))}},{key:"raf",value:function(e){var t=this;this.requestFrame&&o.default.cancel(this.requestFrame),this.requestFrame=(0,o.default)(function(){t.requestFrame=void 0,e()})}},{key:"update",value:function(e){var t=this;this.raf(function(){return t._update(e)})}},{key:"_update",value:function(e){var t=this.props,i=t.onUpdate,a=t.hideTracksWhenNotNeeded,n=this.getValues();if((0,p.default)()){var o=n.scrollLeft,s=n.clientWidth,l=n.scrollWidth,c=(0,h.default)(this.trackHorizontal),d=this.getThumbHorizontalWidth(),u={width:d,transform:"translateX("+o/(l-s)*(c-d)+"px)"},f=n.scrollTop,g=n.clientHeight,b=n.scrollHeight,v=(0,m.default)(this.trackVertical),T=this.getThumbVerticalHeight(),S={height:T,transform:"translateY("+f/(b-g)*(v-T)+"px)"};if(a){var y={visibility:l>s?"visible":"hidden"},A={visibility:b>g?"visible":"hidden"};(0,r.default)(this.trackHorizontal,y),(0,r.default)(this.trackVertical,A)}(0,r.default)(this.thumbHorizontal,u),(0,r.default)(this.thumbVertical,S)}i&&i(n),"function"==typeof e&&e(n)}},{key:"render",value:function(){var e=this,i=(0,p.default)(),a=this.props;a.onScroll,a.onScrollFrame,a.onScrollStart,a.onScrollStop,a.onUpdate;var n=a.renderView,o=a.renderTrackHorizontal,r=a.renderTrackVertical,l=a.renderThumbHorizontal,c=a.renderThumbVertical,u=a.tagName;a.hideTracksWhenNotNeeded;var h=a.autoHide;a.autoHideTimeout;var m=a.autoHideDuration;a.thumbSize,a.thumbMinSize;var g=a.universal,b=a.autoHeight,v=a.autoHeightMin,T=a.autoHeightMax,S=a.style,y=a.children,A=function(e,t){var i={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i}(a,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),w=this.state.didMountUniversal,x=t({},f.containerStyleDefault,b&&t({},f.containerStyleAutoHeight,{minHeight:v,maxHeight:T}),S),E=t({},f.viewStyleDefault,{marginRight:i?-i:0,marginBottom:i?-i:0},b&&t({},f.viewStyleAutoHeight,{minHeight:(0,d.default)(v)?"calc("+v+" + "+i+"px)":v+i,maxHeight:(0,d.default)(T)?"calc("+T+" + "+i+"px)":T+i}),b&&g&&!w&&{minHeight:v,maxHeight:T},g&&!w&&f.viewStyleUniversalInitial),P={transition:"opacity "+m+"ms",opacity:0},I=t({},f.trackHorizontalStyleDefault,h&&P,(!i||g&&!w)&&{display:"none"}),C=t({},f.trackVerticalStyleDefault,h&&P,(!i||g&&!w)&&{display:"none"});return(0,s.createElement)(u,t({},A,{style:x,ref:function(t){e.container=t}}),[(0,s.cloneElement)(n({style:E}),{key:"view",ref:function(t){e.view=t}},y),(0,s.cloneElement)(o({style:I}),{key:"trackHorizontal",ref:function(t){e.trackHorizontal=t}},(0,s.cloneElement)(l({style:f.thumbHorizontalStyleDefault}),{ref:function(t){e.thumbHorizontal=t}})),(0,s.cloneElement)(r({style:C}),{key:"trackVertical",ref:function(t){e.trackVertical=t}},(0,s.cloneElement)(c({style:f.thumbVerticalStyleDefault}),{ref:function(t){e.thumbVertical=t}}))])}}]),i}(s.Component);e.default=v,v.propTypes={onScroll:l.default.func,onScrollFrame:l.default.func,onScrollStart:l.default.func,onScrollStop:l.default.func,onUpdate:l.default.func,renderView:l.default.func,renderTrackHorizontal:l.default.func,renderTrackVertical:l.default.func,renderThumbHorizontal:l.default.func,renderThumbVertical:l.default.func,tagName:l.default.string,thumbSize:l.default.number,thumbMinSize:l.default.number,hideTracksWhenNotNeeded:l.default.bool,autoHide:l.default.bool,autoHideTimeout:l.default.number,autoHideDuration:l.default.number,autoHeight:l.default.bool,autoHeightMin:l.default.oneOfType([l.default.number,l.default.string]),autoHeightMax:l.default.oneOfType([l.default.number,l.default.string]),universal:l.default.bool,style:l.default.object,children:l.default.node},v.defaultProps={renderView:g.renderViewDefault,renderTrackHorizontal:g.renderTrackHorizontalDefault,renderTrackVertical:g.renderTrackVerticalDefault,renderThumbHorizontal:g.renderThumbHorizontalDefault,renderThumbVertical:g.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}}(qe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Scrollbars=void 0;var t=function(e){return e&&e.__esModule?e:{default:e}}(qe);e.default=t.default,e.Scrollbars=t.default}(Ze);const zt=T(Ze);class Ft{static calculateGridSize(e,t,i){const a=Math.floor(e.width/t.width);return{width:a,height:Math.ceil(i/a)}}static calculateContentSize(e,t,i){const a={width:t.width*i.width,height:t.height*i.height};return{width:Math.max(e.width,a.width),height:a.height}}static calculateAnchorPoints(e,t,i){const a=Ft.calculateGridSize(e,t,i),n=(Ft.calculateContentSize(e,t,a).width-a.width*t.width)/(a.width+1),o=[];for(let r=0;r<i;r++){const e=Math.floor(r/a.width),i={x:e*n+r%a.width*t.width,y:e*t.height};o.push(i)}return o}}class Ut{static snapValueToRange(e,t,i){return e<t?t:e>i?i:e}static isValueInRange(e,t,i){return e>=t&&e<=i}}class jt{static getRatio(e){return e?e.width/e.height:null}static intersect(e,t){return e&&t?!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y):null}static isPointInside(e,t){return e&&t?e.x<=t.x&&e.x+e.width>=t.x&&e.y<=t.y&&e.y+e.height>=t.y:null}static getRectWithCenterAndSize(e,t){return{x:e.x-.5*t.width,y:e.y-.5*t.height,...t}}static fitInsideRectWithRatio(e,t){if(jt.getRatio(e)<t){const i=e.width/t;return{x:e.x,y:e.y+(e.height-i)/2,width:e.width,height:i}}{const i=e.height*t;return{x:e.x+(e.width-i)/2,y:e.y,width:i,height:e.height}}}static resizeRect(e,t,i){const a={...e};switch(t){case je.RIGHT:a.width+=i.x;break;case je.BOTTOM_RIGHT:a.width+=i.x,a.height+=i.y;break;case je.BOTTOM:a.height+=i.y;break;case je.TOP_RIGHT:a.width+=i.x,a.y+=i.y,a.height-=i.y;break;case je.TOP:a.y+=i.y,a.height-=i.y;break;case je.TOP_LEFT:a.x+=i.x,a.width-=i.x,a.y+=i.y,a.height-=i.y;break;case je.LEFT:a.x+=i.x,a.width-=i.x;break;case je.BOTTOM_LEFT:a.x+=i.x,a.width-=i.x,a.height+=i.y}return a.width<0&&(a.x=a.x+a.width,a.width=-a.width),a.height<0&&(a.y=a.y+a.height,a.height=-a.height),a}static translate(e,t){return{...e,x:e.x+t.x,y:e.y+t.y}}static expand(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width+2*t.x,height:e.height+2*t.y}}static scaleRect(e,t){return{x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}}static mapRectToAnchors(e){return[{type:je.TOP_LEFT,position:{x:e.x,y:e.y}},{type:je.TOP,position:{x:e.x+.5*e.width,y:e.y}},{type:je.TOP_RIGHT,position:{x:e.x+e.width,y:e.y}},{type:je.LEFT,position:{x:e.x,y:e.y+.5*e.height}},{type:je.RIGHT,position:{x:e.x+e.width,y:e.y+.5*e.height}},{type:je.BOTTOM_LEFT,position:{x:e.x,y:e.y+e.height}},{type:je.BOTTOM,position:{x:e.x+.5*e.width,y:e.y+e.height}},{type:je.BOTTOM_RIGHT,position:{x:e.x+e.width,y:e.y+e.height}}]}static snapPointToRect(e,t){return jt.isPointInside(t,e)?e:{x:Ut.snapValueToRange(e.x,t.x,t.x+t.width),y:Ut.snapValueToRange(e.y,t.y,t.y+t.height)}}static getCenter(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}static getSize(e){return{width:e.width,height:e.height}}static getVertices(e){return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}class Wt extends a.Component{constructor(e){super(e),t(this,"gridSize"),t(this,"contentSize"),t(this,"childAnchors"),t(this,"scrollbars"),t(this,"calculate",(e,t,i)=>{this.gridSize=Ft.calculateGridSize(e,t,i),this.contentSize=Ft.calculateContentSize(e,t,this.gridSize),this.childAnchors=Ft.calculateAnchorPoints(e,t,i)}),t(this,"getVirtualListStyle",()=>({position:"relative",width:this.props.size.width,height:this.props.size.height})),t(this,"getVirtualListContentStyle",()=>({width:this.contentSize.width,height:this.contentSize.height})),t(this,"onScrollStart",()=>{this.setState({isScrolling:!0})}),t(this,"onScrollStop",()=>{this.setState({isScrolling:!1})}),t(this,"onScroll",e=>{this.setState({viewportRect:{x:e.scrollLeft,y:e.scrollTop,width:this.props.size.width,height:this.props.size.height}})}),t(this,"getChildren",()=>{const{viewportRect:e,isScrolling:t}=this.state,{overScanHeight:i,childSize:a}=this.props,n=i||0,o={x:e.x,y:e.y-n,width:e.width,height:e.height+2*n};return this.childAnchors.reduce((e,i,n)=>{const r=Object.assign(i,a),s=jt.intersect(o,r);if(s){const o={position:"absolute",left:i.x,top:i.y,width:a.width,height:a.height};return e.concat(this.props.childRender(n,t,s,o))}return e},[])}),this.state={viewportRect:null,isScrolling:!1}}componentDidMount(){const{size:e,childSize:t,childCount:i}=this.props;this.calculate(e,t,i),this.setState({viewportRect:{x:0,y:0,width:this.props.size.width,height:this.props.size.height}})}componentWillUpdate(e,t,i){const{size:a,childSize:n,childCount:o}=e;this.props.size.height===a.height&&this.props.size.width===a.width&&this.props.childCount===o||(this.calculate(a,n,o),this.setState({viewportRect:{x:this.scrollbars.getValues().scrollLeft,y:this.scrollbars.getValues().scrollTop,width:a.width,height:a.height}}))}render(){const e=!!this.props.size&&!!this.props.childSize&&!!this.gridSize;return s("div",{className:"VirtualList",style:this.getVirtualListStyle(),children:s(zt,{ref:e=>this.scrollbars=e,onScrollFrame:this.onScroll,onScrollStart:this.onScrollStart,onScrollStop:this.onScrollStop,autoHide:!0,children:e&&s("div",{className:"VirtualListContent",style:this.getVirtualListContentStyle(),children:this.getChildren()})})})}}var Xt={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function Kt(e){var t=function(e){if("number"==typeof e)return{value:e,unit:"px"};var t,i=(e.match(/^[0-9.]*/)||"").toString();t=i.includes(".")?parseFloat(i):parseInt(i,10);var a=(e.match(/[^0-9]*$/)||"").toString();return Xt[a]?{value:t,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var Yt=globalThis&&globalThis.__assign||function(){return Yt=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Yt.apply(this,arguments)},Zt=globalThis&&globalThis.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]])}return i},qt=function(e,t,i){var a="react-spinners-".concat(e,"-").concat(i);if("undefined"==typeof window||!window.document)return a;var n=document.createElement("style");document.head.appendChild(n);var o=n.sheet,r="\n    @keyframes ".concat(a," {\n      ").concat(t,"\n    }\n  ");return o&&o.insertRule(r,0),a}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Jt(e){var t=e.loading,i=void 0===t||t,a=e.color,n=void 0===a?"#000000":a,o=e.speedMultiplier,r=void 0===o?1:o,l=e.cssOverride,c=void 0===l?{}:l,d=e.size,p=void 0===d?35:d,u=Zt(e,["loading","color","speedMultiplier","cssOverride","size"]),h=Yt({background:"transparent !important",width:Kt(p),height:Kt(p),borderRadius:"100%",border:"2px solid",borderTopColor:n,borderBottomColor:"transparent",borderLeftColor:n,borderRightColor:n,display:"inline-block",animation:"".concat(qt," ").concat(.75/r,"s 0s infinite linear"),animationFillMode:"both"},c);return i?s("span",{...Yt({style:h},u)}):null}const $t=class{static add(e){$t.queue.push(async()=>await e)}static run(){setTimeout(()=>$t.runQueue(),10)}static addAndRun(e){$t.add(e),$t.run()}static async runQueue(){$t.isRunning||($t.isRunning=!0,await $t.runTasks(),$t.isRunning=!1)}static async runTasks(){for(;$t.queue.length>0;){const e=$t.queue.shift();await e()}}};let Qt=$t;t(Qt,"queue",[]),t(Qt,"isRunning",!1);const ei=class{static storeImage(e,t){ei.repository[e]=t}static storeImages(e,t){S.exports.zip(e,t).forEach(e=>{ei.storeImage(...e)})}static getById(e){return ei.repository[e]}};let ti=ei;t(ti,"repository",{});var ii=(e=>(e.UPDATE_SUGGESTED_LABEL_LIST="@@UPDATE_SUGGESTED_LABEL_LIST",e.UPDATE_REJECTED_SUGGESTED_LABEL_LIST="@@UPDATE_REJECTED_SUGGESTED_LABEL_LIST",e.UPDATE_SSD_OBJECT_DETECTOR_STATUS="@@UPDATE_SSD_OBJECT_DETECTOR_STATUS",e.UPDATE_YOLO_V5_OBJECT_DETECTOR_STATUS="@@UPDATE_YOLO_V5_OBJECT_DETECTOR_STATUS",e.UPDATE_POSE_DETECTOR_STATUS="@@UPDATE_POSE_DETECTOR_STATUS",e.UPDATE_AI_BACKEND_OBJECT_DETECTOR_STATUS="@@UPDATE_AI_BACKEND_OBJECT_DETECTOR_STATUS",e.UPDATE_DISABLED_AI_FLAG="@@UPDATE_DISABLED_AI_FLAG",e.UPDATE_ROBOFLOW_API_DETAILS="@@UPDATE_ROBOFLOW_API_DETAILS",e.UPDATE_PROJECT_DATA="@@UPDATE_PROJECT_DATA",e.UPDATE_WINDOW_SIZE="@@UPDATE_WINDOW_SIZE",e.UPDATE_ACTIVE_POPUP_TYPE="@@UPDATE_ACTIVE_POPUP_TYPE",e.UPDATE_CUSTOM_CURSOR_STYLE="@@UPDATE_CUSTOM_CURSOR_STYLE",e.UPDATE_CONTEXT="@@UPDATE_CONTEXT",e.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS="@@UPDATE_PREVENT_CUSTOM_CURSOR_STATUS",e.UPDATE_IMAGE_DRAG_MODE_STATUS="@@UPDATE_IMAGE_DRAG_MODE_STATUS",e.UPDATE_CROSS_HAIR_VISIBLE_STATUS="@@UPDATE_CROSS_HAIR_VISIBLE_STATUS",e.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS="@@UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS",e.UPDATE_ZOOM="@@UPDATE_ZOOM",e.UPDATE_FIX_ZOOM_STATUS="@@UPDATE_FIX_ZOOM_STATUS",e.UPDATE_MOVE_MODE_STATUS="@@UPDATE_MOVE_MODE_STATUS",e.UPDATE_ACTIVE_IMAGE_INDEX="@@UPDATE_ACTIVE_IMAGE_INDEX",e.UPDATE_IMAGE_DATA_BY_ID="@@UPDATE_IMAGE_DATA_BY_ID",e.ADD_IMAGES_DATA="@@ADD_IMAGES_DATA",e.UPDATE_IMAGES_DATA="@@UPDATE_IMAGES_DATA",e.UPDATE_ACTIVE_LABEL_NAME_ID="@@UPDATE_ACTIVE_LABEL_NAME_ID",e.UPDATE_ACTIVE_LABEL_TYPE="@@UPDATE_ACTIVE_LABEL_TYPE",e.UPDATE_ACTIVE_LABEL_ID="@@UPDATE_ACTIVE_LABEL_ID",e.UPDATE_HIGHLIGHTED_LABEL_ID="@@UPDATE_HIGHLIGHTED_LABEL_ID",e.UPDATE_LABEL_NAMES="@@UPDATE_LABEL_NAMES",e.UPDATE_FIRST_LABEL_CREATED_FLAG="@@UPDATE_FIRST_LABEL_CREATED_FLAG",e.SUBMIT_NEW_NOTIFICATION="@@SUBMIT_NEW_NOTIFICATION",e.DELETE_NOTIFICATION_BY_ID="@@DELETE_NOTIFICATION_BY_ID",e))(ii||{});function ai(e){return{type:ii.UPDATE_ACTIVE_IMAGE_INDEX,payload:{activeImageIndex:e}}}function ni(e){return{type:ii.UPDATE_ACTIVE_LABEL_NAME_ID,payload:{activeLabelNameId:e}}}function oi(e){return{type:ii.UPDATE_ACTIVE_LABEL_ID,payload:{activeLabelId:e}}}function ri(e){return{type:ii.UPDATE_HIGHLIGHTED_LABEL_ID,payload:{highlightedLabelId:e}}}function si(e){return{type:ii.UPDATE_ACTIVE_LABEL_TYPE,payload:{activeLabelType:e}}}function li(e,t){return{type:ii.UPDATE_IMAGE_DATA_BY_ID,payload:{id:e,newImageData:t}}}function ci(e){return{type:ii.ADD_IMAGES_DATA,payload:{imageData:e}}}function di(e){return{type:ii.UPDATE_IMAGES_DATA,payload:{imageData:e}}}function pi(e){return{type:ii.UPDATE_LABEL_NAMES,payload:{labels:e}}}function ui(e){return{type:ii.UPDATE_FIRST_LABEL_CREATED_FLAG,payload:{firstLabelCreatedFlag:e}}}class hi{static loadImageBase64(e){return new Promise((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>i(e)})}static loadImage(e){return new Promise((t,i)=>{const a=URL.createObjectURL(e),n=new Image;n.src=a,n.onload=()=>t(n),n.onerror=i})}static loadImages(e){return new Promise((t,i)=>{const a=e.map(e=>hi.loadImage(e));Promise.all(a).then(e=>t(e)).catch(e=>i(e))})}static readFile(e){return new Promise((t,i)=>{const a=new FileReader;a.onloadend=e=>{var i;t(null==(i=null==e?void 0:e.target)?void 0:i.result)},a.onerror=i,a.readAsText(e)})}static readFiles(e){return new Promise((t,i)=>{const a=e.map(e=>hi.readFile(e));Promise.all(a).then(e=>t(e)).catch(e=>i(e))})}static extractFileExtension(e){const t=e.split(".");return t.length>1?t[t.length-1]:null}static extractFileName(e){const t=e.split(".");let i="";for(const a of Array(t.length-1).keys())i+=""===i?t[a]:"."+t[a];return i}}class mi{static getSuggestedLabelList(){return Cc.getState().ai.suggestedLabelList}static getRejectedSuggestedLabelList(){return Cc.getState().ai.rejectedSuggestedLabelList}static isAISSDObjectDetectorModelLoaded(){return Cc.getState().ai.isSSDObjectDetectorLoaded}static isAIYOLOObjectDetectorModelLoaded(){return Cc.getState().ai.isYOLOV5ObjectDetectorLoaded}static isAIPoseDetectorModelLoaded(){return Cc.getState().ai.isPoseDetectorLoaded}static isAIBackendObjectDetectorLoaded(){return Cc.getState().ai.isAIBackendObjectDetectorLoaded}static isRoboflowAPIModelLoaded(){const e=Cc.getState().ai.roboflowAPIDetails;return""!==e.model&&""!==e.key&&e.status}static isAIDisabled(){return Cc.getState().ai.isAIDisabled}static getRoboflowAPIDetails(){return Cc.getState().ai.roboflowAPIDetails}}class fi{static getLeadingColor(){return mi.isAISSDObjectDetectorModelLoaded()||mi.isAIYOLOObjectDetectorModelLoaded()||mi.isAIPoseDetectorModelLoaded()?Ke.PRIMARY_COLOR:Ke.SECONDARY_COLOR}}class gi extends a.Component{constructor(e){super(e),t(this,"isLoading",!1),t(this,"loadImage",async(e,t)=>{if(e.loadStatus){const t=ti.getById(e.id);this.state.image!==t&&this.setState({image:t})}else if(!t||!this.isLoading){this.isLoading=!0;const t=t=>this.saveLoadedImage(t,e);hi.loadImage(e.fileData).then(e=>t(e)).catch(e=>this.handleLoadImageError())}}),t(this,"saveLoadedImage",(e,t)=>{t.loadStatus=!0,this.props.updateImageDataById(t.id,t),ti.storeImage(t.id,e),t.id===this.props.imageData.id&&(this.setState({image:e}),this.isLoading=!1)}),t(this,"getStyle",()=>{const{size:e}=this.props,t={x:.15*e.width,y:.15*e.height,width:.7*e.width,height:.7*e.height},i={x:0,y:0,width:this.state.image.width,height:this.state.image.height},a=jt.getRatio(i),n=jt.fitInsideRectWithRatio(t,a);return{width:n.width,height:n.height,left:n.x,top:n.y}}),t(this,"handleLoadImageError",()=>{}),t(this,"getClassName",()=>y("ImagePreview",{selected:this.props.isSelected})),this.state={image:null}}componentDidMount(){Qt.addAndRun(this.loadImage(this.props.imageData,this.props.isScrolling))}componentWillUpdate(e,t,i){this.props.imageData.id!==e.imageData.id&&(e.imageData.loadStatus?Qt.addAndRun(this.loadImage(e.imageData,e.isScrolling)):this.setState({image:null})),this.props.isScrolling&&!e.isScrolling&&Qt.addAndRun(this.loadImage(e.imageData,!1))}shouldComponentUpdate(e,t,i){return this.props.imageData.id!==e.imageData.id||this.state.image!==t.image||this.props.isSelected!==e.isSelected||this.props.isChecked!==e.isChecked}render(){const{isChecked:e,style:t,onClick:i}=this.props;return s("div",{className:this.getClassName(),style:t,onClick:i||void 0,children:this.state.image?[d("div",{className:"Foreground",style:this.getStyle(),children:[s("img",{className:"Image",draggable:!1,src:this.state.image.src,alt:this.state.image.alt,style:{...this.getStyle(),left:0,top:0}}),e&&s("img",{className:"CheckBox",draggable:!1,src:"ico/ok.png",alt:"checkbox"})]},"Foreground"),s("div",{className:"Background",style:this.getStyle()},"Background")]:s(Jt,{size:30,color:fi.getLeadingColor(),loading:!0})})}}const bi=Ve(e=>({}),{updateImageDataById:li})(gi);var vi=(e=>(e.EDITOR="EDITOR",e.LEFT_NAVBAR="LEFT_NAVBAR",e.RIGHT_NAVBAR="RIGHT_NAVBAR",e.POPUP="POPUP",e.DROPDOWN="DROPDOWN",e))(vi||{});function Ti(e){return{type:ii.UPDATE_ACTIVE_POPUP_TYPE,payload:{activePopupType:e}}}function Si(e){return{type:ii.UPDATE_CUSTOM_CURSOR_STYLE,payload:{customCursorStyle:e}}}function yi(e){return{type:ii.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS,payload:{preventCustomCursor:e}}}function Ai(e){return{type:ii.UPDATE_PROJECT_DATA,payload:{projectData:e}}}function wi(e){return{type:ii.UPDATE_MOVE_MODE_STATUS,payload:{moveMode:e}}}class xi{}t(xi,"editor"),t(xi,"canvas"),t(xi,"mousePositionIndicator"),t(xi,"cursor"),t(xi,"viewPortScrollbars"),t(xi,"image"),t(xi,"primaryRenderingEngine"),t(xi,"supportRenderingEngine"),t(xi,"viewPortHelper"),t(xi,"isLoading",!1),t(xi,"viewPortActionsDisabled",!1),t(xi,"mousePositionOnViewPortContent"),t(xi,"viewPortSize"),t(xi,"defaultRenderImageRect");class Ei{static deg2rad(e){return e*Math.PI/180}static rad2deg(e){return 180*e/Math.PI}}class Pi{static clearCanvas(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}static drawLine(e,t,i,a="#111111",n=1){const o=e.getContext("2d");o.save(),o.strokeStyle=a,o.lineWidth=n,o.lineCap="round",o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(i.x+1,i.y+1),o.stroke(),o.restore()}static drawRect(e,t,i="#fff",a=1){const n=e.getContext("2d");n.save(),n.strokeStyle=i,n.lineWidth=a,n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.stroke(),n.restore()}static drawRectWithFill(e,t,i="#fff"){const a=e.getContext("2d");a.save(),a.fillStyle=i,a.beginPath(),a.rect(t.x,t.y,t.width,t.height),a.fill(),a.restore()}static shadeEverythingButRect(e,t,i="rgba(0, 0, 0, 0.7)"){const a=e.getContext("2d");a.save(),a.fillStyle=i,a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="destination-out",a.fillRect(t.x,t.y,t.width,t.height),a.restore()}static drawCircleWithFill(e,t,i,a="#ffffff"){const n=e.getContext("2d");n.save();const o=Ei.deg2rad(0),r=Ei.deg2rad(360);n.fillStyle=a,n.beginPath(),n.arc(t.x,t.y,i,o,r,!1),n.fill(),n.restore()}static drawCircle(e,t,i,a,n,o=20,r="#ffffff"){const s=e.getContext("2d"),l=Ei.deg2rad(a),c=Ei.deg2rad(n);s.save(),s.strokeStyle=r,s.lineWidth=o,s.beginPath(),s.arc(t.x,t.y,i,l,c,!1),s.stroke(),s.restore()}static drawPolygon(e,t,i="#fff",a=1){const n=e.getContext("2d");n.save(),n.strokeStyle=i,n.lineWidth=a,n.beginPath(),n.moveTo(t[0].x,t[0].y);for(let o=1;o<t.length;o++)n.lineTo(t[o].x,t[o].y);n.closePath(),n.stroke(),n.restore()}static drawPolygonWithFill(e,t,i="#fff"){const a=e.getContext("2d");a.save(),a.fillStyle=i,a.beginPath(),a.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;n++)a.lineTo(t[n].x,t[n].y);a.closePath(),a.fill(),a.restore()}static drawText(e,t,i,a,n="#ffffff",o=!1,r="center"){const s=e.getContext("2d");s.save(),s.fillStyle=n,s.textAlign=r,s.textBaseline="middle",s.font=(o?"bold ":"")+i+"px Arial",s.fillText(t,a.x,a.y),s.restore()}static hexToRGB(e,t=null){const i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return null!==t?`rgba(${i}, ${a}, ${n}, ${t})`:`rgb(${i}, ${a}, ${n})`}}class Ii{static equals(e,t){return e.x===t.x&&e.y===t.y}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}static multiply(e,t){return{x:e.x*t,y:e.y*t}}}class Ci{}t(Ci,"LINE_THICKNESS",2),t(Ci,"lineActiveColor",Ke.PRIMARY_COLOR),t(Ci,"defaultLineColor","#ffffff"),t(Ci,"CROSS_HAIR_LINE_COLOR","#ffffff"),t(Ci,"crossHairPadding",25),t(Ci,"anchorSize",{width:Ke.RESIZE_HANDLE_DIMENSION_PX,height:Ke.RESIZE_HANDLE_DIMENSION_PX}),t(Ci,"anchorHoverSize",{width:Ke.RESIZE_HANDLE_HOVER_DIMENSION_PX,height:Ke.RESIZE_HANDLE_HOVER_DIMENSION_PX}),t(Ci,"suggestedAnchorDetectionSize",{width:100,height:100}),t(Ci,"defaultAnchorColor","#ffffff"),t(Ci,"inactiveAnchorColor",Ke.DARK_THEME_SECOND_COLOR),t(Ci,"DEFAULT_ANCHOR_COLOR","#ffffff"),t(Ci,"ACTIVE_ANCHOR_COLOR",Ke.SECONDARY_COLOR),t(Ci,"INACTIVE_ANCHOR_COLOR",Ke.DARK_THEME_SECOND_COLOR),t(Ci,"DEFAULT_LINE_COLOR","#ffffff"),t(Ci,"ACTIVE_LINE_COLOR",Ke.PRIMARY_COLOR),t(Ci,"INACTIVE_LINE_COLOR","#ffffff");var Oi=(e=>(e.DEFAULT="DEFAULT",e.MOVE="MOVE",e.RESIZE="RESIZE",e.ADD="ADD",e.CANCEL="CANCEL",e.CLOSE="CLOSE",e.GRAB="GRAB",e.GRABBING="GRABBING",e))(Oi||{});class _i{static getLabelNames(){return Cc.getState().labels.labels}static getLabelNameById(e){const t=_i.getLabelNames();return S.exports.find(t,{id:e})}static getActiveLabelNameId(){return Cc.getState().labels.activeLabelNameId}static getActiveLabelType(){return Cc.getState().labels.activeLabelType}static getImagesData(){return Cc.getState().labels.imagesData}static getActiveImageIndex(){return Cc.getState().labels.activeImageIndex}static getActiveImageData(){const e=_i.getActiveImageIndex();return null===e?null:_i.getImageDataByIndex(e)}static getImageDataByIndex(e){return _i.getImagesData()[e]}static getImageDataById(e){const t=_i.getImagesData();return S.exports.find(t,{id:e})}static getActiveLabelId(){return Cc.getState().labels.activeLabelId}static getHighlightedLabelId(){return Cc.getState().labels.highlightedLabelId}static getActiveRectLabel(){const e=_i.getActiveLabelId();return null===e?null:S.exports.find(_i.getActiveImageData().labelRects,{id:e})}static getActivePointLabel(){const e=_i.getActiveLabelId();return null===e?null:S.exports.find(_i.getActiveImageData().labelPoints,{id:e})}static getActivePolygonLabel(){const e=_i.getActiveLabelId();return null===e?null:S.exports.find(_i.getActiveImageData().labelPolygons,{id:e})}static getActiveLineLabel(){const e=_i.getActiveLabelId();return null===e?null:S.exports.find(_i.getActiveImageData().labelLines,{id:e})}}var Li=(e=>(e.RESIZE="resize",e.MOUSE_UP="mouseup",e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_WHEEL="wheel",e.KEY_DOWN="keydown",e.KEY_PRESS="keypress",e.KEY_UP="keyup",e.FOCUS="focus",e))(Li||{});class Di{static getEventType(e){if(!e)return null;switch(e.type){case Li.MOUSE_DOWN:return Li.MOUSE_DOWN;case Li.MOUSE_UP:return Li.MOUSE_UP;case Li.MOUSE_MOVE:return Li.MOUSE_MOVE;default:return null}}}class Ri{static getActivePopupType(){return Cc.getState().general.activePopupType}static getActiveContext(){return Cc.getState().general.activeContext}static getPreventCustomCursorStatus(){return Cc.getState().general.preventCustomCursor}static getImageDragModeStatus(){return Cc.getState().general.imageDragMode}static getCrossHairVisibleStatus(){return Cc.getState().general.crossHairVisible}static getCustomCursorStyle(){return Cc.getState().general.customCursorStyle}static getProjectName(){return Cc.getState().general.projectData.name}static getProjectType(){return Cc.getState().general.projectData.type}static getZoom(){return Cc.getState().general.zoom}static getEnablePerClassColorationStatus(){return Cc.getState().general.enablePerClassColoration}static getMoveModeStatus(){return Cc.getState().general.moveMode}}class Mi{constructor(e){t(this,"canvas"),t(this,"labelType"),this.canvas=e}update(e){if(e.event)switch(Di.getEventType(e.event)){case Li.MOUSE_MOVE:this.mouseMoveHandler(e);break;case Li.MOUSE_UP:this.mouseUpHandler(e);break;case Li.MOUSE_DOWN:this.mouseDownHandler(e)}}static resolveLabelLineColor(e,t){if(Ri.getEnablePerClassColorationStatus()){const t=_i.getLabelNameById(e);return t?t.color:Ci.DEFAULT_LINE_COLOR}return t?Ci.ACTIVE_LINE_COLOR:Ci.INACTIVE_LINE_COLOR}static resolveLabelAnchorColor(e){return Ri.getEnablePerClassColorationStatus()?Ci.DEFAULT_ANCHOR_COLOR:e?Ci.ACTIVE_ANCHOR_COLOR:Ci.INACTIVE_ANCHOR_COLOR}}class Ni{static getDistanceFromLine(e,t){if(e.start.x!==e.end.x||e.start.y!==e.end.y){return Math.abs((e.end.y-e.start.y)*t.x-(e.end.x-e.start.x)*t.y+e.end.x*e.start.y-e.end.y*e.start.x)/Math.sqrt(Math.pow(e.end.y-e.start.y,2)+Math.pow(e.end.x-e.start.x,2))}return null}static getCenter(e){return{x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2}}static getPoints(e){return[e.start,e.end]}}class ki{static getEdges(e,t=!0){const i=t?e.concat(e[0]):e,a=[];for(let n=0;n<i.length-1;n++)a.push({start:i[n],end:i[n+1]});return a}}class Bi{static calculateImageScale(e){return e.realImageSize.width/e.viewPortContentImageRect.width}static isMouseOverImage(e){return jt.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)}static isMouseOverCanvas(e){return jt.isPointInside({x:0,y:0,...e.viewPortContentSize},e.mousePositionOnViewPortContent)}static transferPointFromImageToViewPortContent(e,t){const i=Bi.calculateImageScale(t);return Ii.add(Ii.multiply(e,1/i),t.viewPortContentImageRect)}static transferPolygonFromImageToViewPortContent(e,t){return e.map(e=>Bi.transferPointFromImageToViewPortContent(e,t))}static transferLineFromImageToViewPortContent(e,t){return{start:Bi.transferPointFromImageToViewPortContent(e.start,t),end:Bi.transferPointFromImageToViewPortContent(e.end,t)}}static transferPointFromViewPortContentToImage(e,t){const i=Bi.calculateImageScale(t);return Ii.multiply(Ii.subtract(e,t.viewPortContentImageRect),i)}static transferPolygonFromViewPortContentToImage(e,t){return e.map(e=>Bi.transferPointFromViewPortContentToImage(e,t))}static transferLineFromViewPortContentToImage(e,t){return{start:Bi.transferPointFromViewPortContentToImage(e.start,t),end:Bi.transferPointFromViewPortContentToImage(e.end,t)}}static transferRectFromViewPortContentToImage(e,t){const i=Bi.calculateImageScale(t);return jt.translate(jt.scaleRect(e,1/i),t.viewPortContentImageRect)}static transferRectFromImageToViewPortContent(e,t){const i=Bi.calculateImageScale(t),a={x:-t.viewPortContentImageRect.x,y:-t.viewPortContentImageRect.y};return jt.scaleRect(jt.translate(e,a),i)}static wrapDefaultCursorStyleInCancel(e){jt.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)?Cc.dispatch(Si(Oi.DEFAULT)):Cc.dispatch(Si(Oi.CANCEL))}static setValueBetweenPixels(e){return Math.floor(e)+.5}static setPointBetweenPixels(e){return{x:Bi.setValueBetweenPixels(e.x),y:Bi.setValueBetweenPixels(e.y)}}static setRectBetweenPixels(e){const t={x:e.x,y:e.y},i={x:e.x+e.width,y:e.y+e.height},a=Bi.setPointBetweenPixels(t),n=Bi.setPointBetweenPixels(i);return{x:a.x,y:a.y,width:n.x-a.x,height:n.y-a.y}}static isMouseOverLine(e,t,i){const a=Math.min(t.start.x,t.end.x),n=Math.max(t.start.x,t.end.x),o=Math.min(t.start.y,t.end.y),r=Math.max(t.start.y,t.end.y);return a-i<=e.x&&n+i>=e.x&&o-i<=e.y&&r+i>=e.y&&Ni.getDistanceFromLine(t,e)<i}static isMouseOverAnchor(e,t,i){const a={width:2*i,height:2*i};return jt.isPointInside(jt.getRectWithCenterAndSize(t,a),e)}static isMouseOverPolygon(e,t,i){for(const n of t)if(Bi.isMouseOverAnchor(e,n,i))return!0;const a=ki.getEdges(t);for(const n of a)if(Bi.isMouseOverLine(e,n,i))return!0;return!1}}var Gi,Hi=(e=>(e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.UNDECIDED="UNDECIDED",e))(Hi||{}),Vi=new Uint8Array(16);function zi(){if(!Gi&&!(Gi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gi(Vi)}const Fi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ui=[],ji=0;ji<256;++ji)Ui.push((ji+256).toString(16).substr(1));function Wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(Ui[e[t+0]]+Ui[e[t+1]]+Ui[e[t+2]]+Ui[e[t+3]]+"-"+Ui[e[t+4]]+Ui[e[t+5]]+"-"+Ui[e[t+6]]+Ui[e[t+7]]+"-"+Ui[e[t+8]]+Ui[e[t+9]]+"-"+Ui[e[t+10]]+Ui[e[t+11]]+Ui[e[t+12]]+Ui[e[t+13]]+Ui[e[t+14]]+Ui[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Fi.test(e)}(i))throw TypeError("Stringified UUID is invalid");return i}function Xi(e,t,i){var a=(e=e||{}).random||(e.rng||zi)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=a[n];return t}return Wi(a)}class Ki{static createLabelName(e){return{id:Xi(),name:e,color:S.exports.sample(Ke.LABEL_COLORS_PALETTE)}}static createLabelRect(e,t){return{id:Xi(),labelId:e,rect:t,isVisible:!0,isCreatedByAI:!1,status:Hi.ACCEPTED,suggestedLabel:null}}static createLabelPolygon(e,t){return{id:Xi(),labelId:e,vertices:t,isVisible:!0}}static createLabelPoint(e,t){return{id:Xi(),labelId:e,point:t,isVisible:!0,isCreatedByAI:!1,status:Hi.ACCEPTED,suggestedLabel:null}}static toggleAnnotationVisibility(e){return{...e,isVisible:!e.isVisible}}static labelNamesIdsDiff(e,t){return e.reduce((e,i)=>(S.exports.find(t,{id:i.id})||e.push(i.id),e),[])}}class Yi extends Mi{constructor(e){super(e),t(this,"startCreateRectPoint"),t(this,"startResizeRectAnchor"),t(this,"startMoveRectPoint"),t(this,"startMoveRectId"),t(this,"startMoveRectOriginalRect"),t(this,"mouseDownHandler",e=>{const t=Bi.isMouseOverImage(e);if(Bi.isMouseOverCanvas(e)){if(Ri.getMoveModeStatus()){const t=this.getRectWithPointInside(e);if(t&&t.status===Hi.ACCEPTED)return void this.startMoveRect(t,e)}const i=this.getRectUnderMouse(e);if(i){const t=this.calculateRectRelativeToActiveImage(i.rect,e),a=this.getAnchorUnderMouseByRect(t,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);a&&i.status===Hi.ACCEPTED?(Cc.dispatch(oi(i.id)),this.startRectResize(a)):_i.getHighlightedLabelId()?Cc.dispatch(oi(_i.getHighlightedLabelId())):this.startRectCreation(e.mousePositionOnViewPortContent)}else t&&this.startRectCreation(e.mousePositionOnViewPortContent)}}),t(this,"mouseUpHandler",e=>{if(e.viewPortContentImageRect){const t=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),i=_i.getActiveRectLabel();if(this.startCreateRectPoint&&!Ii.equals(this.startCreateRectPoint,t)){const i=Math.min(this.startCreateRectPoint.x,t.x),a=Math.min(this.startCreateRectPoint.y,t.y),n={x:i,y:a,width:Math.max(this.startCreateRectPoint.x,t.x)-i,height:Math.max(this.startCreateRectPoint.y,t.y)-a};this.addRectLabel(Bi.transferRectFromImageToViewPortContent(n,e))}if(this.startResizeRectAnchor&&i){const a=this.calculateRectRelativeToActiveImage(i.rect,e),n=Ii.add(this.startResizeRectAnchor.position,e.viewPortContentImageRect),o=Ii.subtract(t,n),r=jt.resizeRect(a,this.startResizeRectAnchor.type,o),s=Bi.calculateImageScale(e),l=jt.scaleRect(r,s),c=_i.getActiveImageData();c.labelRects=c.labelRects.map(e=>e.id===i.id?{...e,rect:l}:e),Cc.dispatch(li(c.id,c))}this.startMoveRectId&&this.startMoveRectPoint&&(Ii.subtract(t,this.startMoveRectPoint),this.endMoveRect())}this.endRectTransformation()}),t(this,"mouseMoveHandler",e=>{if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent){const t=Bi.isMouseOverImage(e),i=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);if(this.startMoveRectId&&this.startMoveRectPoint){const t=Ii.subtract(i,this.startMoveRectPoint),a=Bi.calculateImageScale(e),n={x:t.x*a,y:t.y*a},o=jt.translate(this.startMoveRectOriginalRect,n),r=_i.getActiveImageData();return r.labelRects=r.labelRects.map(e=>e.id===this.startMoveRectId?{...e,rect:o}:e),void Cc.dispatch(li(r.id,r))}if(t&&!this.startResizeRectAnchor){const t=this.getRectUnderMouse(e);t&&!this.isInProgress()?_i.getHighlightedLabelId()!==t.id&&Cc.dispatch(ri(t.id)):null!==_i.getHighlightedLabelId()&&Cc.dispatch(ri(null))}}}),t(this,"addRectLabel",e=>{const t=_i.getActiveLabelNameId(),i=_i.getActiveImageData(),a=Ki.createLabelRect(t,e);i.labelRects.push(a),Cc.dispatch(li(i.id,i)),Cc.dispatch(ui(!0)),Cc.dispatch(oi(a.id))}),this.labelType=Ye.RECT}render(e){const t=_i.getActiveLabelId(),i=_i.getActiveImageData();i&&(i.labelRects.forEach(i=>{i.isVisible&&(i.status===Hi.ACCEPTED&&i.id===t?this.drawActiveRect(i,e):this.drawInactiveRect(i,e))}),this.drawCurrentlyCreatedRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),this.updateCursorStyle(e))}drawCurrentlyCreatedRect(e,t){if(this.startCreateRectPoint){const i=jt.snapPointToRect(e,t),a={x:this.startCreateRectPoint.x,y:this.startCreateRectPoint.y,width:i.x-this.startCreateRectPoint.x,height:i.y-this.startCreateRectPoint.y},n=Bi.setRectBetweenPixels(a),o=Mi.resolveLabelLineColor(null,!0);Pi.drawRect(this.canvas,n,o,Ci.LINE_THICKNESS)}}drawInactiveRect(e,t){const i=Bi.transferRectFromViewPortContentToImage(e.rect,t),a=_i.getHighlightedLabelId(),n=e.status===Hi.ACCEPTED&&e.id===a,o=Mi.resolveLabelLineColor(e.labelId,n),r=Mi.resolveLabelAnchorColor(n);this.renderRect(i,n,o,r)}drawActiveRect(e,t){let i=this.calculateRectRelativeToActiveImage(e.rect,t);if(this.startResizeRectAnchor){const e=Ii.add(this.startResizeRectAnchor.position,t.viewPortContentImageRect),a=jt.snapPointToRect(t.mousePositionOnViewPortContent,t.viewPortContentImageRect),n=Ii.subtract(a,e);i=jt.resizeRect(i,this.startResizeRectAnchor.type,n)}const a=jt.translate(i,t.viewPortContentImageRect),n=Mi.resolveLabelLineColor(e.labelId,!0),o=Mi.resolveLabelAnchorColor(!0);this.renderRect(a,!0,n,o)}renderRect(e,t,i,a){const n=Bi.setRectBetweenPixels(e);if(Pi.drawRectWithFill(this.canvas,n,Pi.hexToRGB(i,.2)),Pi.drawRect(this.canvas,n,i,Ci.LINE_THICKNESS),t){jt.mapRectToAnchors(e).map(e=>e.position).forEach(e=>{const t=jt.getRectWithCenterAndSize(e,Ci.anchorSize),i=Bi.setRectBetweenPixels(t);Pi.drawRectWithFill(this.canvas,i,a)})}}updateCursorStyle(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!Ri.getImageDragModeStatus()){const t=this.getRectUnderMouse(e);if(this.getAnchorUnderMouse(e)&&t&&t.status===Hi.ACCEPTED||this.startResizeRectAnchor)return void Cc.dispatch(Si(Oi.MOVE));if(Ri.getMoveModeStatus()){const t=this.getRectWithPointInside(e);if(t&&t.status===Hi.ACCEPTED)return void Cc.dispatch(Si(Oi.MOVE))}Bi.isMouseOverCanvas(e)?(!Bi.isMouseOverImage(e)&&this.startCreateRectPoint?Cc.dispatch(Si(Oi.MOVE)):Bi.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"):this.canvas.style.cursor="default"}}isInProgress(){return!!this.startCreateRectPoint||!!this.startResizeRectAnchor||!!this.startMoveRectId}calculateRectRelativeToActiveImage(e,t){const i=Bi.calculateImageScale(t);return jt.scaleRect(e,1/i)}getRectUnderMouse(e){const t=_i.getActiveRectLabel();if(t&&t.isVisible&&this.isMouseOverRectEdges(t.rect,e))return t;const i=_i.getActiveImageData().labelRects;for(const a of i)if(a.isVisible&&this.isMouseOverRectEdges(a.rect,e))return a;return null}isMouseOverRectEdges(e,t){const i=jt.translate(this.calculateRectRelativeToActiveImage(e,t),t.viewPortContentImageRect),a={x:Ci.anchorHoverSize.width/2,y:Ci.anchorHoverSize.height/2},n=jt.expand(i,a),o={x:-Ci.anchorHoverSize.width/2,y:-Ci.anchorHoverSize.height/2},r=jt.expand(i,o);return jt.isPointInside(n,t.mousePositionOnViewPortContent)&&!jt.isPointInside(r,t.mousePositionOnViewPortContent)}getRectWithPointInside(e){const t=_i.getActiveRectLabel();if(t&&t.isVisible&&this.isMouseInsideRect(t.rect,e))return t;const i=_i.getActiveImageData().labelRects;for(let a=i.length-1;a>=0;a--)if(i[a].isVisible&&this.isMouseInsideRect(i[a].rect,e))return i[a];return null}isMouseInsideRect(e,t){const i=jt.translate(this.calculateRectRelativeToActiveImage(e,t),t.viewPortContentImageRect);return jt.isPointInside(i,t.mousePositionOnViewPortContent)}getAnchorUnderMouseByRect(e,t,i){const a=jt.mapRectToAnchors(e);for(let n=0;n<a.length;n++){const e=jt.translate(jt.getRectWithCenterAndSize(a[n].position,Ci.anchorHoverSize),i);if(t&&jt.isPointInside(e,t))return a[n]}return null}getAnchorUnderMouse(e){const t=_i.getActiveImageData().labelRects;for(let i=0;i<t.length;i++){const a=this.calculateRectRelativeToActiveImage(t[i].rect,e),n=this.getAnchorUnderMouseByRect(a,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);if(n)return n}return null}startRectCreation(e){this.startCreateRectPoint=e,Cc.dispatch(oi(null)),la.setViewPortActionsDisabledStatus(!0)}startRectResize(e){this.startResizeRectAnchor=e,la.setViewPortActionsDisabledStatus(!0)}endRectTransformation(){this.startCreateRectPoint=null,this.startResizeRectAnchor=null,la.setViewPortActionsDisabledStatus(!1)}startMoveRect(e,t){this.startMoveRectId=e.id,this.startMoveRectPoint=jt.snapPointToRect(t.mousePositionOnViewPortContent,t.viewPortContentImageRect),this.startMoveRectOriginalRect=e.rect,la.setViewPortActionsDisabledStatus(!0)}endMoveRect(){this.startMoveRectId=null,this.startMoveRectPoint=null,this.startMoveRectOriginalRect=null,la.setViewPortActionsDisabledStatus(!1)}}class Zi{static getMousePositionOnCanvasFromEvent(e,t){if(t&&e){const i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}return null}static getClientRect(e){if(e){const t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}static getSize(e){if(e){const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}}class qi extends Mi{constructor(e){super(e),t(this,"addPointLabel",e=>{const t=_i.getActiveLabelNameId(),i=_i.getActiveImageData(),a=Ki.createLabelPoint(t,e);i.labelPoints.push(a),Cc.dispatch(li(i.id,i)),Cc.dispatch(ui(!0)),Cc.dispatch(oi(a.id))}),this.labelType=Ye.POINT}mouseDownHandler(e){const t=Bi.isMouseOverImage(e);if(Bi.isMouseOverCanvas(e)){const i=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);if(i){const t=Bi.transferPointFromImageToViewPortContent(i.point,e),a=Bi.setPointBetweenPixels(t),n=jt.getRectWithCenterAndSize(a,Ci.anchorHoverSize);if(jt.isPointInside(n,e.mousePositionOnViewPortContent))return Cc.dispatch(oi(i.id)),void la.setViewPortActionsDisabledStatus(!0);{Cc.dispatch(oi(null));const t=Bi.transferPointFromViewPortContentToImage(e.mousePositionOnViewPortContent,e);this.addPointLabel(t)}}else if(t){const t=Bi.transferPointFromViewPortContentToImage(e.mousePositionOnViewPortContent,e);this.addPointLabel(t)}}}mouseUpHandler(e){if(this.isInProgress()){const t=_i.getActivePointLabel(),i=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=Bi.transferPointFromViewPortContentToImage(i,e),n=_i.getActiveImageData();n.labelPoints=n.labelPoints.map(e=>e.id===t.id?{...e,point:a}:e),Cc.dispatch(li(n.id,n))}la.setViewPortActionsDisabledStatus(!1)}mouseMoveHandler(e){if(Bi.isMouseOverImage(e)){const t=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);t?_i.getHighlightedLabelId()!==t.id&&Cc.dispatch(ri(t.id)):null!==_i.getHighlightedLabelId()&&Cc.dispatch(ri(null))}}render(e){const t=_i.getActiveLabelId(),i=_i.getHighlightedLabelId(),a=_i.getActiveImageData();a&&a.labelPoints.forEach(a=>{if(a.isVisible)if(a.id===t)if(this.isInProgress()){const t=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),i=Bi.setPointBetweenPixels(t),a=Mi.resolveLabelAnchorColor(!0);Pi.drawCircleWithFill(this.canvas,i,Ke.RESIZE_HANDLE_DIMENSION_PX/2,a)}else this.renderPoint(a,!0,e);else this.renderPoint(a,a.id===t||a.id===i,e)}),this.updateCursorStyle(e)}renderPoint(e,t,i){const a=Bi.transferPointFromImageToViewPortContent(e.point,i),n=Bi.setPointBetweenPixels(a),o=Mi.resolveLabelAnchorColor(t);Pi.drawCircleWithFill(this.canvas,n,Ke.RESIZE_HANDLE_DIMENSION_PX/2,o)}updateCursorStyle(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!Ri.getImageDragModeStatus()){const t=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);if(t&&t.status===Hi.ACCEPTED){const i=Bi.transferPointFromImageToViewPortContent(t.point,e),a=Bi.setPointBetweenPixels(i),n=jt.getRectWithCenterAndSize(a,Ci.anchorHoverSize);if(jt.isPointInside(n,e.mousePositionOnViewPortContent))return void Cc.dispatch(Si(Oi.MOVE))}else if(this.isInProgress())return void Cc.dispatch(Si(Oi.MOVE));jt.isPointInside({x:0,y:0,...Zi.getSize(this.canvas)},e.mousePositionOnViewPortContent)?(Bi.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"):this.canvas.style.cursor="default"}}isInProgress(){return xi.viewPortActionsDisabled}getLabelPointUnderMouse(e,t){const i=_i.getActiveImageData().labelPoints.filter(e=>e.isVisible);for(const a of i){const i=Bi.transferPointFromImageToViewPortContent(a.point,t),n=jt.getRectWithCenterAndSize(i,Ci.anchorHoverSize);if(jt.isPointInside(n,e))return a}return null}}class Ji extends Mi{constructor(e){super(e),t(this,"activePath",[]),t(this,"resizeAnchorIndex",null),t(this,"suggestedAnchorPositionOnCanvas",null),t(this,"suggestedAnchorIndexInPolygon",null),this.labelType=Ye.POLYGON}update(e){if(e.event)switch(Di.getEventType(e.event)){case Li.MOUSE_MOVE:this.mouseMoveHandler(e);break;case Li.MOUSE_UP:this.mouseUpHandler(e);break;case Li.MOUSE_DOWN:this.mouseDownHandler(e)}}mouseDownHandler(e){if(Bi.isMouseOverCanvas(e))if(this.isCreationInProgress()){this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0])?this.addLabelAndFinishCreation(e):this.updateActivelyCreatedLabel(e)}else{const t=this.getPolygonUnderMouse(e);if(t){const i=t.vertices.reduce((t,i,a)=>{if(null===t){const t=Bi.transferPointFromImageToViewPortContent(i,e);if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,t))return a}return t},null);if(null!==i)this.startExistingLabelResize(e,t.id,i);else{Cc.dispatch(oi(t.id));this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)&&this.addSuggestedAnchorToPolygonLabel(e)}}else this.updateActivelyCreatedLabel(e)}}mouseUpHandler(e){this.isResizeInProgress()&&this.endExistingLabelResize(e)}mouseMoveHandler(e){if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent){if(Bi.isMouseOverImage(e)&&!this.isCreationInProgress()){const t=this.getPolygonUnderMouse(e);if(t&&!this.isResizeInProgress()){_i.getHighlightedLabelId()!==t.id&&Cc.dispatch(ri(t.id));const i=Bi.transferPolygonFromImageToViewPortContent(t.vertices,e),a=ki.getEdges(i);for(let t=0;t<a.length;t++){if(Bi.isMouseOverLine(e.mousePositionOnViewPortContent,a[t],Ci.anchorHoverSize.width/2)){this.suggestedAnchorPositionOnCanvas=Ni.getCenter(a[t]),this.suggestedAnchorIndexInPolygon=t+1;break}}}else null!==_i.getHighlightedLabelId()&&(Cc.dispatch(ri(null)),this.discardSuggestedPoint())}}}render(e){_i.getActiveImageData()&&(this.drawExistingLabels(e),this.drawActivelyCreatedLabel(e),this.drawActivelyResizeLabel(e),this.updateCursorStyle(e),this.drawSuggestedAnchor(e))}updateCursorStyle(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!Ri.getImageDragModeStatus()){if(Bi.isMouseOverCanvas(e)){if(this.isCreationInProgress()){this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0])&&this.activePath.length>2?Cc.dispatch(Si(Oi.CLOSE)):Cc.dispatch(Si(Oi.DEFAULT))}else{const t=this.getAnchorUnderMouse(e);this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)?Cc.dispatch(Si(Oi.ADD)):this.isResizeInProgress()||t?Cc.dispatch(Si(Oi.MOVE)):Bi.wrapDefaultCursorStyleInCancel(e)}this.canvas.style.cursor="none"}else this.canvas.style.cursor="default"}}drawActivelyCreatedLabel(e){const t=this.activePath.map(e=>Bi.setPointBetweenPixels(e)),i=t.concat(e.mousePositionOnViewPortContent),a=ki.getEdges(i,!1),n=Mi.resolveLabelLineColor(null,!0),o=Mi.resolveLabelAnchorColor(!0);Pi.drawPolygonWithFill(this.canvas,i,Pi.hexToRGB(n,.2)),a.forEach(e=>{Pi.drawLine(this.canvas,e.start,e.end,n,Ci.LINE_THICKNESS)}),t.forEach(e=>{Pi.drawCircleWithFill(this.canvas,e,Ke.RESIZE_HANDLE_DIMENSION_PX/2,o)})}drawActivelyResizeLabel(e){const t=_i.getActivePolygonLabel();if(t&&this.isResizeInProgress()){const i=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=t.vertices.map((t,a)=>a===this.resizeAnchorIndex?i:Bi.transferPointFromImageToViewPortContent(t,e));this.drawPolygon(t.labelId,a,!0)}}drawExistingLabels(e){const t=_i.getActiveLabelId(),i=_i.getHighlightedLabelId();_i.getActiveImageData().labelPolygons.forEach(a=>{if(a.isVisible){const n=a.id===t||a.id===i,o=Bi.transferPolygonFromImageToViewPortContent(a.vertices,e);a.id===t&&this.isResizeInProgress()||this.drawPolygon(a.labelId,o,n)}})}drawPolygon(e,t,i){const a=Mi.resolveLabelLineColor(e,!0),n=Mi.resolveLabelAnchorColor(!0),o=t.map(e=>Bi.setPointBetweenPixels(e));i&&Pi.drawPolygonWithFill(this.canvas,o,Pi.hexToRGB(a,.2)),Pi.drawPolygon(this.canvas,o,a,Ci.LINE_THICKNESS),i&&o.forEach(e=>{Pi.drawCircleWithFill(this.canvas,e,Ke.RESIZE_HANDLE_DIMENSION_PX/2,n)})}drawSuggestedAnchor(e){const t=Mi.resolveLabelAnchorColor(!0);if(this.suggestedAnchorPositionOnCanvas){const i=jt.getRectWithCenterAndSize(this.suggestedAnchorPositionOnCanvas,Ci.suggestedAnchorDetectionSize);jt.isPointInside(i,e.mousePositionOnViewPortContent)&&Pi.drawCircleWithFill(this.canvas,this.suggestedAnchorPositionOnCanvas,Ke.RESIZE_HANDLE_DIMENSION_PX/2,t)}}updateActivelyCreatedLabel(e){if(this.isCreationInProgress()){const t=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);this.activePath.push(t)}else{jt.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)&&(la.setViewPortActionsDisabledStatus(!0),this.activePath.push(e.mousePositionOnViewPortContent),Cc.dispatch(oi(null)))}}cancelLabelCreation(){this.activePath=[],la.setViewPortActionsDisabledStatus(!1)}finishLabelCreation(){this.activePath=[],la.setViewPortActionsDisabledStatus(!1)}addLabelAndFinishCreation(e){if(this.isCreationInProgress()&&this.activePath.length>2){const t=Bi.transferPolygonFromViewPortContentToImage(this.activePath,e);this.addPolygonLabel(t),this.finishLabelCreation()}}addPolygonLabel(e){const t=_i.getActiveLabelNameId(),i=_i.getActiveImageData(),a=Ki.createLabelPolygon(t,e);i.labelPolygons.push(a),Cc.dispatch(li(i.id,i)),Cc.dispatch(ui(!0)),Cc.dispatch(oi(a.id))}startExistingLabelResize(e,t,i){Cc.dispatch(oi(t)),this.resizeAnchorIndex=i,la.setViewPortActionsDisabledStatus(!0)}endExistingLabelResize(e){this.applyResizeToPolygonLabel(e),this.resizeAnchorIndex=null,la.setViewPortActionsDisabledStatus(!1)}applyResizeToPolygonLabel(e){const t=_i.getActiveImageData(),i=_i.getActivePolygonLabel();t.labelPolygons=t.labelPolygons.map(t=>t.id!==i.id?t:{...t,vertices:t.vertices.map((t,i)=>{if(i!==this.resizeAnchorIndex)return t;{const t=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);return Bi.transferPointFromViewPortContentToImage(t,e)}})}),Cc.dispatch(li(t.id,t)),Cc.dispatch(oi(i.id))}discardSuggestedPoint(){this.suggestedAnchorIndexInPolygon=null,this.suggestedAnchorPositionOnCanvas=null}addSuggestedAnchorToPolygonLabel(e){const t=_i.getActiveImageData(),i=_i.getActivePolygonLabel(),a=Bi.transferPointFromViewPortContentToImage(this.suggestedAnchorPositionOnCanvas,e),n={...t,labelPolygons:t.labelPolygons.map(e=>{return e.id!==i.id?e:{...e,vertices:(t=e.vertices,n=this.suggestedAnchorIndexInPolygon,o=a,[...t.slice(0,n),o,...t.slice(n)])};var t,n,o})};Cc.dispatch(li(n.id,n)),this.startExistingLabelResize(e,i.id,this.suggestedAnchorIndexInPolygon),this.discardSuggestedPoint()}isInProgress(){return this.isCreationInProgress()||this.isResizeInProgress()}isCreationInProgress(){return null!==this.activePath&&0!==this.activePath.length}isResizeInProgress(){return null!==this.resizeAnchorIndex}isMouseOverAnchor(e,t){return e&&t?jt.isPointInside(jt.getRectWithCenterAndSize(t,Ci.anchorSize),e):null}getPolygonUnderMouse(e){const t=e.mousePositionOnViewPortContent;if(!t)return null;const i=_i.getActiveImageData().labelPolygons.filter(e=>e.isVisible),a=Ci.anchorHoverSize.width/2;for(const n of i){const i=Bi.transferPolygonFromImageToViewPortContent(n.vertices,e);if(Bi.isMouseOverPolygon(t,i,a))return n}return null}getAnchorUnderMouse(e){const t=e.mousePositionOnViewPortContent;if(!t)return null;const i=_i.getActiveImageData().labelPolygons.filter(e=>e.isVisible),a=Ci.anchorHoverSize.width/2;for(const n of i){const i=Bi.transferPolygonFromImageToViewPortContent(n.vertices,e);for(const e of i)if(Bi.isMouseOverAnchor(t,e,a))return e}return null}}class $i{}t($i,"CANVAS_MIN_MARGIN_PX",20),t($i,"MIN_ZOOM",1),t($i,"MAX_ZOOM",4),t($i,"ZOOM_STEP",.1),t($i,"TRANSLATION_STEP_PX",20);class Qi{static getSize(e){return e?{width:e.width,height:e.height}:null}}class ea{static scale(e,t){return{width:e.width*t,height:e.height*t}}}class ta{static convertDirectionToVector(e){switch(e){case je.RIGHT:return{x:1,y:0};case je.LEFT:return{x:-1,y:0};case je.TOP:return{x:0,y:1};case je.BOTTOM:return{x:0,y:-1};case je.TOP_RIGHT:return{x:1,y:1};case je.TOP_LEFT:return{x:-1,y:1};case je.BOTTOM_RIGHT:return{x:1,y:-1};case je.BOTTOM_LEFT:return{x:-1,y:-1};case je.CENTER:return{x:0,y:0};default:return null}}}class ia{static updateViewPortSize(){xi.editor&&(xi.viewPortSize={width:xi.editor.offsetWidth,height:xi.editor.offsetHeight})}static updateDefaultViewPortImageRect(){if(xi.viewPortSize&&xi.image){const e={x:$i.CANVAS_MIN_MARGIN_PX,y:$i.CANVAS_MIN_MARGIN_PX},t={x:0,y:0,...Qi.getSize(xi.image)},i={x:0,y:0,...xi.viewPortSize},a=jt.expand(i,Ii.multiply(e,-1));xi.defaultRenderImageRect=jt.fitInsideRectWithRatio(a,jt.getRatio(t))}}static calculateViewPortContentSize(){if(xi.viewPortSize&&xi.image){const e=xi.defaultRenderImageRect,t=ea.scale(xi.defaultRenderImageRect,Ri.getZoom());return{width:t.width+2*e.x,height:t.height+2*e.y}}return null}static calculateViewPortContentImageRect(){if(xi.viewPortSize&&xi.image){const e=xi.defaultRenderImageRect,t=ia.calculateViewPortContentSize();return{...e,width:t.width-2*e.x,height:t.height-2*e.y}}return null}static resizeCanvas(e){e&&xi.canvas&&(xi.canvas.width=e.width,xi.canvas.height=e.height)}static resizeViewPortContent(){const e=ia.calculateViewPortContentSize();e&&ia.resizeCanvas(e)}static calculateAbsoluteScrollPosition(e){const t=ia.calculateViewPortContentSize(),i=xi.viewPortSize;return{x:e.x*(t.width-i.width),y:e.y*(t.height-i.height)}}static getRelativeScrollPosition(){if(xi.viewPortScrollbars){const e=xi.viewPortScrollbars.getValues();return{x:e.left,y:e.top}}return null}static getAbsoluteScrollPosition(){if(xi.viewPortScrollbars){const e=xi.viewPortScrollbars.getValues();return{x:e.scrollLeft,y:e.scrollTop}}return null}static setScrollPosition(e){xi.viewPortScrollbars.scrollLeft(e.x),xi.viewPortScrollbars.scrollTop(e.y)}static translateViewPortPosition(e){if(xi.viewPortActionsDisabled||Ri.getZoom()===$i.MIN_ZOOM)return;const t=ta.convertDirectionToVector(e),i=Ii.multiply(t,$i.TRANSLATION_STEP_PX),a=ia.getAbsoluteScrollPosition(),n=Ii.add(a,i);ia.setScrollPosition(n),xi.mousePositionOnViewPortContent=Ii.add(xi.mousePositionOnViewPortContent,i),la.fullRender()}static zoomIn(){if(xi.viewPortActionsDisabled)return;const e=Ri.getZoom(),t=ia.getRelativeScrollPosition(),i=1===e?{x:.5,y:.5}:t;ia.setZoom(e+$i.ZOOM_STEP),ia.resizeViewPortContent(),ia.setScrollPosition(ia.calculateAbsoluteScrollPosition(i)),la.fullRender()}static zoomOut(){if(xi.viewPortActionsDisabled)return;const e=Ri.getZoom(),t=ia.getRelativeScrollPosition();ia.setZoom(e-$i.ZOOM_STEP),ia.resizeViewPortContent(),ia.setScrollPosition(ia.calculateAbsoluteScrollPosition(t)),la.fullRender()}static setDefaultZoom(){const e=ia.getRelativeScrollPosition();ia.setZoom($i.MIN_ZOOM),ia.resizeViewPortContent(),ia.setScrollPosition(ia.calculateAbsoluteScrollPosition(e)),la.fullRender()}static setOneForOneZoom(){const e=Ri.getZoom(),t=ia.getRelativeScrollPosition(),i=1===e?{x:.5,y:.5}:t,a=xi.image.width/xi.defaultRenderImageRect.width;ia.setZoom(a),ia.resizeViewPortContent(),ia.setScrollPosition(ia.calculateAbsoluteScrollPosition(i)),la.fullRender()}static setZoom(e){const t=Ri.getZoom();var i;Ut.isValueInRange(e,$i.MIN_ZOOM,$i.MAX_ZOOM)&&e!==t&&Cc.dispatch((i=e,{type:ii.UPDATE_ZOOM,payload:{zoom:i}}))}}var aa=(e=>(e.IMAGE_RECOGNITION="IMAGE_RECOGNITION",e.OBJECT_DETECTION="OBJECT_DETECTION",e))(aa||{});class na extends Mi{constructor(e){super(e)}mouseMoveHandler(e){}mouseDownHandler(e){}mouseUpHandler(e){}render(e){this.drawImage(xi.image,ia.calculateViewPortContentImageRect()),this.renderCrossHair(e)}renderCrossHair(e){if(!this.shouldRenderCrossHair(e))return;const t=Bi.setPointBetweenPixels(e.mousePositionOnViewPortContent),i=(e,t)=>{Pi.drawLine(this.canvas,e,t,Ci.CROSS_HAIR_LINE_COLOR,2)};i({x:t.x,y:0},{x:t.x-1,y:t.y-Ci.crossHairPadding}),i({x:t.x,y:t.y+Ci.crossHairPadding},{x:t.x-1,y:e.viewPortContentSize.height}),i({x:0,y:t.y},{x:t.x-Ci.crossHairPadding,y:t.y-1}),i({x:t.x+Ci.crossHairPadding,y:t.y},{x:e.viewPortContentSize.width,y:t.y-1})}shouldRenderCrossHair(e){const t=Ri.getCrossHairVisibleStatus(),i=Ri.getImageDragModeStatus(),a=Ri.getProjectType(),n=Ri.getActivePopupType(),o=Bi.isMouseOverCanvas(e),r=Ri.getPreventCustomCursorStatus();return[!!this.canvas,t,!i,a!==aa.IMAGE_RECOGNITION,!n,o,!r].every(Boolean)}drawImage(e,t){if(e&&this.canvas){this.canvas.getContext("2d").drawImage(e,t.x,t.y,t.width,t.height)}}isInProgress(){return!1}}class oa{constructor(){t(this,"startScrollPosition"),t(this,"mouseStartPosition")}update(e){if(e.event)switch(Di.getEventType(e.event)){case Li.MOUSE_MOVE:this.mouseMoveHandler(e);break;case Li.MOUSE_UP:this.mouseUpHandler(e);break;case Li.MOUSE_DOWN:this.mouseDownHandler(e)}}mouseDownHandler(e){const t=e.event;this.startScrollPosition=e.absoluteViewPortContentScrollPosition,this.mouseStartPosition={x:t.screenX,y:t.screenY},Cc.dispatch(Si(Oi.GRABBING)),xi.canvas.style.cursor="none"}mouseUpHandler(e){this.startScrollPosition=null,this.mouseStartPosition=null,Cc.dispatch(Si(Oi.GRAB)),xi.canvas.style.cursor="none"}mouseMoveHandler(e){if(this.startScrollPosition&&this.mouseStartPosition){const t=e.event,i={x:t.screenX,y:t.screenY},a=Ii.subtract(i,this.mouseStartPosition),n=Ii.subtract(this.startScrollPosition,a);ia.setScrollPosition(n),Cc.dispatch(Si(Oi.GRABBING))}else Cc.dispatch(Si(Oi.GRAB));xi.canvas.style.cursor="none"}}var ra=(e=>(e.START="START",e.END="END",e))(ra||{});class sa extends Mi{constructor(e){super(e),t(this,"lineCreationStartPoint"),t(this,"lineUpdateAnchorType"),t(this,"startNewLabelCreation",e=>{this.lineCreationStartPoint=Bi.setPointBetweenPixels(e.mousePositionOnViewPortContent),la.setViewPortActionsDisabledStatus(!0)}),t(this,"finishNewLabelCreation",e=>{const t=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),i={start:this.lineCreationStartPoint,end:t},a=Bi.transferLineFromViewPortContentToImage(i,e),n=_i.getActiveLabelNameId(),o=_i.getActiveImageData(),r={id:Xi(),labelId:n,line:a,isVisible:!0};o.labelLines.push(r),Cc.dispatch(li(o.id,o)),Cc.dispatch(ui(!0)),Cc.dispatch(oi(r.id)),this.lineCreationStartPoint=null,la.setViewPortActionsDisabledStatus(!1)}),this.labelType=Ye.LINE}mouseDownHandler(e){const t=Bi.isMouseOverImage(e),i=Bi.isMouseOverCanvas(e),a=this.getAnchorTypeUnderMouse(e),n=this.getLineUnderMouse(e);i&&(a&&!this.isResizeInProgress()?this.startExistingLabelUpdate(n.id,a):null!==n?Cc.dispatch(oi(n.id)):!this.isInProgress()&&t?this.startNewLabelCreation(e):this.isInProgress()&&this.finishNewLabelCreation(e))}mouseUpHandler(e){this.isResizeInProgress()&&this.endExistingLabelUpdate(e)}mouseMoveHandler(e){if(Bi.isMouseOverImage(e)){const t=this.getLineUnderMouse(e);t?_i.getHighlightedLabelId()!==t.id&&Cc.dispatch(ri(t.id)):null!==_i.getHighlightedLabelId()&&Cc.dispatch(ri(null))}}render(e){this.drawExistingLabels(e),this.drawActivelyCreatedLabel(e),this.drawActivelyResizeLabel(e),this.updateCursorStyle(e)}drawExistingLabels(e){const t=_i.getActiveLabelId(),i=_i.getHighlightedLabelId();_i.getActiveImageData().labelLines.forEach(a=>{if(a.isVisible){const n=a.id===t||a.id===i,o=Bi.transferLineFromImageToViewPortContent(a.line,e);a.id===t&&this.isResizeInProgress()||this.drawLine(a.labelId,o,n)}})}drawActivelyCreatedLabel(e){if(this.isInProgress()){const t={start:this.lineCreationStartPoint,end:e.mousePositionOnViewPortContent};Pi.drawLine(this.canvas,t.start,t.end,Ci.lineActiveColor,Ci.LINE_THICKNESS),Pi.drawCircleWithFill(this.canvas,this.lineCreationStartPoint,Ke.RESIZE_HANDLE_DIMENSION_PX/2,Ci.defaultAnchorColor)}}drawActivelyResizeLabel(e){const t=_i.getActiveLineLabel();if(t&&this.isResizeInProgress()){const i=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=Bi.transferLineFromImageToViewPortContent(t.line,e),n={start:this.lineUpdateAnchorType===ra.START?i:a.start,end:this.lineUpdateAnchorType===ra.END?i:a.end};this.drawLine(t.labelId,n,!0)}}updateCursorStyle(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!Ri.getImageDragModeStatus()){if(Bi.isMouseOverCanvas(e)){const t=this.getAnchorTypeUnderMouse(e);!this.isInProgress()&&t||this.isResizeInProgress()?Cc.dispatch(Si(Oi.MOVE)):Bi.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"}else this.canvas.style.cursor="default"}}drawLine(e,t,i){const a=Mi.resolveLabelLineColor(e,i),n=Mi.resolveLabelAnchorColor(i),o={start:Bi.setPointBetweenPixels(t.start),end:Bi.setPointBetweenPixels(t.end)};Pi.drawLine(this.canvas,o.start,o.end,a,Ci.LINE_THICKNESS),i&&Ni.getPoints(t).forEach(e=>Pi.drawCircleWithFill(this.canvas,e,Ke.RESIZE_HANDLE_DIMENSION_PX/2,n))}isInProgress(){return!!this.lineCreationStartPoint}isResizeInProgress(){return!!this.lineUpdateAnchorType}cancelLabelCreation(){this.lineCreationStartPoint=null,la.setViewPortActionsDisabledStatus(!1)}startExistingLabelUpdate(e,t){Cc.dispatch(oi(e)),this.lineUpdateAnchorType=t,la.setViewPortActionsDisabledStatus(!0)}endExistingLabelUpdate(e){this.applyUpdateToLineLabel(e),this.lineUpdateAnchorType=null,la.setViewPortActionsDisabledStatus(!1)}applyUpdateToLineLabel(e){const t=_i.getActiveImageData(),i=_i.getActiveLineLabel();t.labelLines=t.labelLines.map(t=>{if(t.id!==i.id)return t;{const i=jt.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=Bi.transferPointFromViewPortContentToImage(i,e);return{...t,line:{start:this.lineUpdateAnchorType===ra.START?a:t.line.start,end:this.lineUpdateAnchorType===ra.END?a:t.line.end}}}}),Cc.dispatch(li(t.id,t)),Cc.dispatch(oi(i.id))}getLineUnderMouse(e){const t=e.mousePositionOnViewPortContent;if(!t)return null;const i=_i.getActiveImageData().labelLines.filter(e=>e.isVisible),a=Ci.anchorHoverSize.width/2;for(const n of i){const i=Bi.transferLineFromImageToViewPortContent(n.line,e);if(Bi.isMouseOverLine(t,i,a))return n}return null}getAnchorTypeUnderMouse(e){const t=e.mousePositionOnViewPortContent;if(!t)return null;const i=_i.getActiveImageData().labelLines.filter(e=>e.isVisible),a=Ci.anchorHoverSize.width/2;for(const n of i){const i=Bi.transferLineFromImageToViewPortContent(n.line,e);if(Bi.isMouseOverAnchor(t,i.start,a))return ra.START;if(Bi.isMouseOverAnchor(t,i.end,a))return ra.END}return null}}class la{static mountSupportRenderingEngine(e){switch(e){case Ye.RECT:xi.supportRenderingEngine=new Yi(xi.canvas);break;case Ye.POINT:xi.supportRenderingEngine=new qi(xi.canvas);break;case Ye.LINE:xi.supportRenderingEngine=new sa(xi.canvas);break;case Ye.POLYGON:xi.supportRenderingEngine=new Ji(xi.canvas);break;default:xi.supportRenderingEngine=null}}static swapSupportRenderingEngine(e){la.mountSupportRenderingEngine(e)}static mountRenderEnginesAndHelpers(e){xi.viewPortHelper=new oa,xi.primaryRenderingEngine=new na(xi.canvas),la.mountSupportRenderingEngine(e)}static fullRender(){Pi.clearCanvas(xi.canvas),xi.primaryRenderingEngine.render(la.getEditorData()),xi.supportRenderingEngine&&xi.supportRenderingEngine.render(la.getEditorData())}static setLoadingStatus(e){xi.isLoading=e}static setActiveImage(e){xi.image=e}static setViewPortActionsDisabledStatus(e){xi.viewPortActionsDisabled=e}static getEditorData(e){return{mousePositionOnViewPortContent:xi.mousePositionOnViewPortContent,viewPortContentSize:Zi.getSize(xi.canvas),activeKeyCombo:yr.getActiveCombo(),event:e,zoom:Ri.getZoom(),viewPortSize:xi.viewPortSize,defaultRenderImageRect:xi.defaultRenderImageRect,viewPortContentImageRect:ia.calculateViewPortContentImageRect(),realImageSize:Qi.getSize(xi.image),absoluteViewPortContentScrollPosition:ia.getAbsoluteScrollPosition()}}static updateMousePositionIndicator(e){if(!xi.image||!xi.canvas)return xi.mousePositionIndicator.style.display="none",void(xi.cursor.style.display="none");const t=Zi.getMousePositionOnCanvasFromEvent(e,xi.canvas),i=ia.getAbsoluteScrollPosition(),a=ia.calculateViewPortContentImageRect(),n=Ii.subtract(t,i),o=jt.isPointInside(a,t);if(jt.isPointInside({x:0,y:0,...xi.viewPortSize},n)&&!Ri.getPreventCustomCursorStatus())if(xi.cursor.style.left=n.x+"px",xi.cursor.style.top=n.y+"px",xi.cursor.style.display="block",o&&![Oi.GRAB,Oi.GRABBING].includes(Ri.getCustomCursorStyle())){const e=Qi.getSize(xi.image).width/a.width,i=Ii.multiply(Ii.subtract(t,a),e),o="x: "+Math.round(i.x)+", y: "+Math.round(i.y);xi.mousePositionIndicator.innerHTML=o,xi.mousePositionIndicator.style.left=n.x+15+"px",xi.mousePositionIndicator.style.top=n.y+15+"px",xi.mousePositionIndicator.style.display="block"}else xi.mousePositionIndicator.style.display="none";else xi.cursor.style.display="none",xi.mousePositionIndicator.style.display="none"}}class ca{static getActions(){return this.actions}}t(ca,"actions",[]);class da{static getPreviousImage(){const e=_i.getActiveImageIndex();da.getImageByIndex(e-1)}static getNextImage(){const e=_i.getActiveImageIndex();da.getImageByIndex(e+1)}static getImageByIndex(e){if(xi.viewPortActionsDisabled)return;const t=_i.getImagesData().length;if(!(e<0||e>t-1)){const t=Cc.getState(),i=t.general.fixZoom,a=t.general.zoom,n=ia.getRelativeScrollPosition();i?ia.setZoom(a):ia.setZoom(1),Cc.dispatch(ai(e)),Cc.dispatch(oi(null)),i&&n&&setTimeout(()=>{ia.setScrollPosition(ia.calculateAbsoluteScrollPosition(n))},0)}}static setActiveLabelOnActiveImage(e){const t=_i.getLabelNames();if(t.length<e+1)return;const i=_i.getActiveImageData();Cc.dispatch(li(i.id,da.mapNewImageData(i,e))),Cc.dispatch(ni(t[1].id))}static mapNewImageData(e,t){const i=_i.getActiveLabelType(),a=_i.getLabelNames();let n={...e};switch(i){case Ye.POINT:const i=_i.getActivePointLabel();n.labelPoints=e.labelPoints.map(e=>e.id===i.id?{...e,labelId:a[t].id,status:Hi.ACCEPTED}:e),Cc.dispatch(oi(i.id));break;case Ye.LINE:const o=_i.getActiveLineLabel();n.labelLines=e.labelLines.map(e=>e.id===o.id?{...e,labelId:a[t].id,status:Hi.ACCEPTED}:e),Cc.dispatch(oi(o.id));break;case Ye.RECT:const r=_i.getActiveRectLabel();n.labelRects=e.labelRects.map(e=>e.id===r.id?{...e,labelId:a[t].id,status:Hi.ACCEPTED}:e),Cc.dispatch(oi(r.id));break;case Ye.POLYGON:const s=_i.getActivePolygonLabel();n.labelPolygons=e.labelPolygons.map(e=>e.id===s.id?{...e,labelId:a[t].id,status:Hi.ACCEPTED}:e),Cc.dispatch(oi(s.id));break;case Ye.IMAGE_RECOGNITION:const l=a[t].id;e.labelNameIds.includes(l)?n.labelNameIds=S.exports.remove(e.labelNameIds,e=>e!==l):n.labelNameIds=e.labelNameIds.concat(l)}return n}}var pa,ua,ha={exports:{}};pa=ha,function(){if(pa.exports)return function(e){pa.exports=e()};if("undefined"!=typeof window)return function(e){window.MobileDetect=e()};throw new Error("unknown environment")}()(function(){var e,t={mobileDetectRules:{phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},detectMobileBrowsers:{fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i}},i=Object.prototype.hasOwnProperty;function a(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function n(e,t){var i,a,n=e.length;if(!n||!t)return!1;for(i=t.toLowerCase(),a=0;a<n;++a)if(i===e[a].toLowerCase())return!0;return!1}function o(e){for(var t in e)i.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function r(e,t){this.ua=function(e){return(e||"").substr(0,500)}(e),this._cache={},this.maxPhoneWidth=t||600}return t.FALLBACK_PHONE="UnknownPhone",t.FALLBACK_TABLET="UnknownTablet",t.FALLBACK_MOBILE="UnknownMobile",e="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},function(){var a,n,r,s,l,c,d=t.mobileDetectRules;for(a in d.props)if(i.call(d.props,a)){for(n=d.props[a],e(n)||(n=[n]),l=n.length,s=0;s<l;++s)(c=(r=n[s]).indexOf("[VER]"))>=0&&(r=r.substring(0,c)+"([\\w._\\+]+)"+r.substring(c+5)),n[s]=new RegExp(r,"i");d.props[a]=n}o(d.oss),o(d.phones),o(d.tablets),o(d.uas),o(d.utils),d.oss0={WindowsPhoneOS:d.oss.WindowsPhoneOS,WindowsMobileOS:d.oss.WindowsMobileOS}}(),t.findMatch=function(e,t){for(var a in e)if(i.call(e,a)&&e[a].test(t))return a;return null},t.findMatches=function(e,t){var a=[];for(var n in e)i.call(e,n)&&e[n].test(t)&&a.push(n);return a},t.getVersionStr=function(e,a){var n,o,r,s,l=t.mobileDetectRules.props;if(i.call(l,e))for(r=(n=l[e]).length,o=0;o<r;++o)if(null!==(s=n[o].exec(a)))return s[1];return null},t.getVersion=function(e,i){var a=t.getVersionStr(e,i);return a?t.prepareVersionNo(a):NaN},t.prepareVersionNo=function(e){var t;return 1===(t=e.split(/[a-z._ \/\-]/i)).length&&(e=t[0]),t.length>1&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},t.isMobileFallback=function(e){return t.detectMobileBrowsers.fullPattern.test(e)||t.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},t.isTabletFallback=function(e){return t.detectMobileBrowsers.tabletPattern.test(e)},t.prepareDetectionCache=function(e,i,a){if(e.mobile===ua){var n,o,s;if(o=t.findMatch(t.mobileDetectRules.tablets,i))return e.mobile=e.tablet=o,void(e.phone=null);if(n=t.findMatch(t.mobileDetectRules.phones,i))return e.mobile=e.phone=n,void(e.tablet=null);t.isMobileFallback(i)?(s=r.isPhoneSized(a))===ua?(e.mobile=t.FALLBACK_MOBILE,e.tablet=e.phone=null):s?(e.mobile=e.phone=t.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=t.FALLBACK_TABLET,e.phone=null):t.isTabletFallback(i)?(e.mobile=e.tablet=t.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null}},t.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile"),"C")},t.detectOS=function(e){return t.findMatch(t.mobileDetectRules.oss0,e)||t.findMatch(t.mobileDetectRules.oss,e)},t.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},r.prototype={constructor:r,mobile:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return t.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===ua&&(this._cache.userAgent=t.findMatch(t.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===ua&&(this._cache.userAgents=t.findMatches(t.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===ua&&(this._cache.os=t.detectOS(this.ua)),this._cache.os},version:function(e){return t.getVersion(e,this.ua)},versionStr:function(e){return t.getVersionStr(e,this.ua)},is:function(e){return n(this.userAgents(),e)||a(e,this.os())||a(e,this.phone())||a(e,this.tablet())||n(t.findMatches(t.mobileDetectRules.utils,this.ua),e)},match:function(e){return e instanceof RegExp||(e=new RegExp(e,"i")),e.test(this.ua)},isPhoneSized:function(e){return r.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===ua&&(this._cache.grade=t.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?r.isPhoneSized=function(e){return e<0?ua:t.getDeviceSmallerSide()<=e}:r.isPhoneSized=function(){},r._impl=t,r.version="1.4.5 2021-03-13",r});const ma=ha.exports;class fa{static getMobileDeviceData(e){const t=new ma(e);return{manufacturer:t.mobile(),browser:t.userAgent(),os:t.os()}}static isMac(e){return!!e.toLowerCase().match("mac")}static isSafari(e){return!!e.toLowerCase().match("safari")}static isFirefox(e){return!!e.toLowerCase().match("firefox")}}class ga{static deleteActiveLabel(){const e=_i.getActiveImageData(),t=_i.getActiveLabelId();ga.deleteImageLabelById(e.id,t)}static deleteImageLabelById(e,t){switch(_i.getActiveLabelType()){case Ye.POINT:ga.deletePointLabelById(e,t);break;case Ye.RECT:ga.deleteRectLabelById(e,t);break;case Ye.POLYGON:ga.deletePolygonLabelById(e,t)}}static deleteRectLabelById(e,t){const i=_i.getImageDataById(e),a={...i,labelRects:S.exports.filter(i.labelRects,e=>e.id!==t)};Cc.dispatch(li(i.id,a))}static deletePointLabelById(e,t){const i=_i.getImageDataById(e),a={...i,labelPoints:S.exports.filter(i.labelPoints,e=>e.id!==t)};Cc.dispatch(li(i.id,a))}static deleteLineLabelById(e,t){const i=_i.getImageDataById(e),a={...i,labelLines:S.exports.filter(i.labelLines,e=>e.id!==t)};Cc.dispatch(li(i.id,a))}static deletePolygonLabelById(e,t){const i=_i.getImageDataById(e),a={...i,labelPolygons:S.exports.filter(i.labelPolygons,e=>e.id!==t)};Cc.dispatch(li(i.id,a))}static toggleLabelVisibilityById(e,t){const i=_i.getImageDataById(e),a={...i,labelPoints:i.labelPoints.map(e=>e.id===t?Ki.toggleAnnotationVisibility(e):e),labelRects:i.labelRects.map(e=>e.id===t?Ki.toggleAnnotationVisibility(e):e),labelPolygons:i.labelPolygons.map(e=>e.id===t?Ki.toggleAnnotationVisibility(e):e),labelLines:i.labelLines.map(e=>e.id===t?Ki.toggleAnnotationVisibility(e):e)};Cc.dispatch(li(i.id,a))}static removeLabelNames(e){const t=_i.getImagesData().map(t=>ga.removeLabelNamesFromImageData(t,e));Cc.dispatch(di(t))}static removeLabelNamesFromImageData(e,t){return{...e,labelRects:e.labelRects.map(e=>t.includes(e.id)?{...e,id:null}:e),labelPoints:e.labelPoints.map(e=>t.includes(e.id)?{...e,id:null}:e),labelPolygons:e.labelPolygons.map(e=>t.includes(e.id)?{...e,id:null}:e),labelNameIds:e.labelNameIds.filter(e=>!t.includes(e))}}static copyLabelsFromPreviousImage(){const e=_i.getActiveImageIndex();if(e<=0)return;const t=_i.getImagesData()[e-1],i=_i.getActiveImageData(),a=_i.getActiveLabelType();let n={...i};switch(a){case Ye.RECT:const e=t.labelRects.map(e=>({...e,id:Xi()}));n.labelRects=[...i.labelRects,...e];break;case Ye.POINT:const a=t.labelPoints.map(e=>({...e,id:Xi()}));n.labelPoints=[...i.labelPoints,...a];break;case Ye.POLYGON:const o=t.labelPolygons.map(e=>({...e,id:Xi()}));n.labelPolygons=[...i.labelPolygons,...o];break;case Ye.LINE:const r=t.labelLines.map(e=>({...e,id:Xi()}));n.labelLines=[...i.labelLines,...r]}Cc.dispatch(li(i.id,n))}static labelExistsInLabelNames(e){return _i.getLabelNames().map(e=>e.name).includes(e)}}function ba(e){return{type:ii.UPDATE_SUGGESTED_LABEL_LIST,payload:{labelList:e}}}function va(e){return{type:ii.UPDATE_ROBOFLOW_API_DETAILS,payload:{roboflowAPIDetails:e}}}function Ta(e){return{type:ii.SUBMIT_NEW_NOTIFICATION,payload:{notification:e}}}var Sa=(e=>(e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.MESSAGE="MESSAGE",e.WARNING="WARNING",e))(Sa||{});class ya{static createErrorNotification(e){return{id:Xi(),type:Sa.ERROR,header:e.header,description:e.description}}static createMessageNotification(e){return{id:Xi(),type:Sa.MESSAGE,header:e.header,description:e.description}}static createWarningNotification(e){return{id:Xi(),type:Sa.WARNING,header:e.header,description:e.description}}}var Aa=(e=>(e[e.EMPTY_LABEL_NAME_ERROR=0]="EMPTY_LABEL_NAME_ERROR",e[e.NON_UNIQUE_LABEL_NAMES_ERROR=1]="NON_UNIQUE_LABEL_NAMES_ERROR",e[e.MODEL_DOWNLOAD_ERROR=2]="MODEL_DOWNLOAD_ERROR",e[e.MODEL_INFERENCE_ERROR=3]="MODEL_INFERENCE_ERROR",e[e.MODEL_LOAD_ERROR=4]="MODEL_LOAD_ERROR",e[e.LABELS_FILE_UPLOAD_ERROR=5]="LABELS_FILE_UPLOAD_ERROR",e[e.ANNOTATION_FILE_PARSE_ERROR=6]="ANNOTATION_FILE_PARSE_ERROR",e[e.ANNOTATION_IMPORT_ASSERTION_ERROR=7]="ANNOTATION_IMPORT_ASSERTION_ERROR",e[e.UNSUPPORTED_INFERENCE_SERVER_MESSAGE=8]="UNSUPPORTED_INFERENCE_SERVER_MESSAGE",e[e.ROBOFLOW_INFERENCE_SERVER_ERROR=9]="ROBOFLOW_INFERENCE_SERVER_ERROR",e))(Aa||{});const wa={[Aa.EMPTY_LABEL_NAME_ERROR]:{header:"Empty label name",description:"Looks like you didn't assign name to one of your labels. Unfortunately it is mandatory for every label to have unique name value. Insert correct name or delete empty label and try again."},[Aa.NON_UNIQUE_LABEL_NAMES_ERROR]:{header:"Non unique label names",description:"Looks like not all your label names are unique. Unique names are necessary to guarantee correct data export when you complete your work. Make your names unique and try again."},[Aa.MODEL_DOWNLOAD_ERROR]:{header:"Model could not be downloaded",description:"Looks like we ware unable to download tensorflow.js model from external server. Make sure that you are connected to internet and try again."},[Aa.MODEL_INFERENCE_ERROR]:{header:"Inference failed",description:"Looks like we were unable to run inference of your image. Please help us improve Make Sense and let us know."},[Aa.MODEL_LOAD_ERROR]:{header:"Model could not be loaded",description:"Looks like we ware unable to load your tensorflow.js model from uploaded files. Make sure that you uploaded all model shard files. Please re-upload all model files once again."},[Aa.LABELS_FILE_UPLOAD_ERROR]:{header:"Labels file was not uploaded",description:"Looks like you forgot to upload text file containing list of detected classes names. We need it to map YOLOv5 model output to labels. Please re-upload all model files once again."},[Aa.ANNOTATION_FILE_PARSE_ERROR]:{header:"Annotation files could not be parsed",description:"The contents of an annotation file is not valid JSON, CSV, or XML. Please fix the files selected to import and try again."},[Aa.ANNOTATION_IMPORT_ASSERTION_ERROR]:{header:"Annotation files did not contain valid data",description:"Missing or invalid annotations provided during import. Please fix the files selected to import and try again."},[Aa.UNSUPPORTED_INFERENCE_SERVER_MESSAGE]:{header:"Selected inference server is not yet supported",description:"Integration with selected inference server is still under construction. Stay tuned for more updates on our GitHub."},[Aa.ROBOFLOW_INFERENCE_SERVER_ERROR]:{header:"Roboflow connection failed",description:"Looks like we ware unable to connect to your Roboflow model. Please, make sure that the model specification and Roboflow API key, are correct."}},xa=class{static loadModel(e){A.exports.load().then(t=>{var i;xa.model=t,Cc.dispatch((i=!0,{type:ii.UPDATE_SSD_OBJECT_DETECTOR_STATUS,payload:{isSSDObjectDetectorLoaded:i}})),Cc.dispatch(si(Ye.RECT));_i.getActiveLabelType()===Ye.RECT&&Pa.detectRectsForActiveImage(),e&&e()}).catch(e=>{Cc.dispatch(Ta(ya.createErrorNotification(wa[Aa.MODEL_DOWNLOAD_ERROR])))})}static predict(e,t){xa.model&&xa.model.detect(e).then(e=>{t&&t(e)}).catch(e=>{Cc.dispatch(Ta(ya.createErrorNotification(wa[Aa.MODEL_INFERENCE_ERROR])))})}};let Ea=xa;t(Ea,"model");class Pa{static detectRectsForActiveImage(){const e=_i.getActiveImageData();Pa.detectRects(e.id,ti.getById(e.id))}static detectRects(e,t){!_i.getImageDataById(e).isVisitedBySSDObjectDetector&&mi.isAISSDObjectDetectorModelLoaded()&&(Cc.dispatch(Ti(We.LOADER)),Ea.predict(t,t=>{const i=Pa.extractNewSuggestedLabelNames(_i.getLabelNames(),t),a=mi.getRejectedSuggestedLabelList(),n=gr.excludeRejectedLabelNames(i,a);n.length>0?(Cc.dispatch(ba(n)),Cc.dispatch(Ti(We.SUGGEST_LABEL_NAMES))):Cc.dispatch(Ti(null)),Pa.saveRectPredictions(e,t)}))}static saveRectPredictions(e,t){const i=_i.getImageDataById(e),a=Pa.mapPredictionsToRectLabels(t),n={...i,labelRects:i.labelRects.concat(a),isVisitedBySSDObjectDetector:!0};Cc.dispatch(li(i.id,n))}static mapPredictionsToRectLabels(e){return e.map(e=>({id:Xi(),labelIndex:null,labelId:null,rect:{x:e.bbox[0],y:e.bbox[1],width:e.bbox[2],height:e.bbox[3]},isVisible:!0,isCreatedByAI:!0,status:Hi.UNDECIDED,suggestedLabel:e.class}))}static extractNewSuggestedLabelNames(e,t){return t.reduce((t,i)=>(t.includes(i.class)||S.exports.findLast(e,{name:i.class})||t.push(i.class),t),[])}static acceptAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.map(e=>{if(!e.isCreatedByAI)return e;const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}})};Cc.dispatch(li(t.id,t))}static rejectAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.filter(e=>!e.isCreatedByAI)};Cc.dispatch(li(t.id,t))}}const Ia=class{static loadModel(e){w({architecture:"ResNet50",outputStride:32,inputResolution:257,quantBytes:2}).then(t=>{var i;Ia.model=t,Cc.dispatch((i=!0,{type:ii.UPDATE_POSE_DETECTOR_STATUS,payload:{isPoseDetectorLoaded:i}})),Cc.dispatch(si(Ye.POINT));_i.getActiveLabelType()===Ye.POINT&&Oa.detectPoseForActiveImage(),e&&e()}).catch(e=>{Cc.dispatch(Ta(ya.createErrorNotification(wa[Aa.MODEL_DOWNLOAD_ERROR])))})}static predict(e,t){Ia.model&&Ia.model.estimateMultiplePoses(e).then(e=>{t&&t(e)}).catch(e=>{Cc.dispatch(Ta(ya.createErrorNotification(wa[Aa.MODEL_INFERENCE_ERROR])))})}};let Ca=Ia;t(Ca,"model");class Oa{static detectPoseForActiveImage(){const e=_i.getActiveImageData();Oa.detectPoses(e.id,ti.getById(e.id))}static detectPoses(e,t){!_i.getImageDataById(e).isVisitedByPoseDetector&&mi.isAIPoseDetectorModelLoaded()&&(Cc.dispatch(Ti(We.LOADER)),Ca.predict(t,i=>{const a=Oa.extractNewSuggestedLabelNames(_i.getLabelNames(),i),n=mi.getRejectedSuggestedLabelList(),o=gr.excludeRejectedLabelNames(a,n);o.length>0?(Cc.dispatch(ba(o)),Cc.dispatch(Ti(We.SUGGEST_LABEL_NAMES))):Cc.dispatch(Ti(null)),Oa.savePosePredictions(e,i,t)}))}static savePosePredictions(e,t,i){const a=_i.getImageDataById(e),n=Oa.mapPredictionsToPointLabels(t).filter(e=>Ut.isValueInRange(e.point.x,0,i.width)).filter(e=>Ut.isValueInRange(e.point.y,0,i.height)),o={...a,labelPoints:a.labelPoints.concat(n),isVisitedByPoseDetector:!0};Cc.dispatch(li(a.id,o))}static mapPredictionsToPointLabels(e){return e.map(e=>e.keypoints.map(e=>({id:Xi(),labelIndex:null,labelId:null,point:{x:e.position.x,y:e.position.y},isVisible:!0,isCreatedByAI:!0,status:Hi.UNDECIDED,suggestedLabel:e.part}))).reduce((e,t)=>e.concat(t),[])}static extractNewSuggestedLabelNames(e,t){return t.map(e=>e.keypoints).reduce((e,t)=>e.concat(t),[]).map(e=>e.part).reduce((t,i)=>(t.includes(i)||S.exports.findLast(e,{name:i})||t.push(i),t),[])}static acceptAllSuggestedPointLabels(e){const t={...e,labelPoints:e.labelPoints.map(e=>{if(!e.isCreatedByAI)return e;const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}})};Cc.dispatch(li(t.id,t))}static rejectAllSuggestedPointLabels(e){const t={...e,labelPoints:e.labelPoints.filter(e=>!e.isCreatedByAI)};Cc.dispatch(li(t.id,t))}}function _a(e,t,i,a,n,o,r){try{var s=e[o](r),l=s.value}catch(c){return void i(c)}s.done?t(l):Promise.resolve(l).then(a,n)}function La(e){return function(){var t=this,i=arguments;return new Promise(function(a,n){var o=e.apply(t,i);function r(e){_a(o,a,n,r,s,"next",e)}function s(e){_a(o,a,n,r,s,"throw",e)}r(void 0)})}}var Da=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t=function(e){var t,i=Object.prototype,a=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(L){l=function(e,t,i){return e[t]=i}}function c(e,t,i,a){var n=t&&t.prototype instanceof g?t:g,o=Object.create(n.prototype),r=new C(a||[]);return o._invoke=function(e,t,i){var a=p;return function(n,o){if(a===h)throw new Error("Generator is already running");if(a===m){if("throw"===n)throw o;return _()}for(i.method=n,i.arg=o;;){var r=i.delegate;if(r){var s=E(r,i);if(s){if(s===f)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===p)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=h;var l=d(e,t,i);if("normal"===l.type){if(a=i.done?m:u,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a=m,i.method="throw",i.arg=l.arg)}}}(e,i,r),o}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(L){return{type:"throw",arg:L}}}e.wrap=c;var p="suspendedStart",u="suspendedYield",h="executing",m="completed",f={};function g(){}function b(){}function v(){}var T={};l(T,o,function(){return this});var S=Object.getPrototypeOf,y=S&&S(S(O([])));y&&y!==i&&a.call(y,o)&&(T=y);var A=v.prototype=g.prototype=Object.create(T);function w(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){function i(n,o,r,s){var l=d(e[n],e,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&a.call(p,"__await")?t.resolve(p.__await).then(function(e){i("next",e,r,s)},function(e){i("throw",e,r,s)}):t.resolve(p).then(function(e){c.value=e,r(c)},function(e){return i("throw",e,r,s)})}s(l.arg)}var n;this._invoke=function(e,a){function o(){return new t(function(t,n){i(e,a,t,n)})}return n=n?n.then(o,o):o()}}function E(e,i){var a=e.iterator[i.method];if(a===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,E(e,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=d(a,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,f;var o=n.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(a.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}return{next:_}}function _(){return{value:t,done:!0}}return b.prototype=v,l(A,"constructor",v),l(v,"constructor",b),b.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,r,function(){return this}),e.AsyncIterator=x,e.async=function(t,i,a,n,o){void 0===o&&(o=Promise);var r=new x(c(t,i,a,n),o);return e.isGeneratorFunction(i)?r:r.next().then(function(e){return e.done?e.value:r.next()})},w(A),l(A,s,"Generator"),l(A,o,function(){return this}),l(A,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var a=t.pop();if(a in e)return i.value=a,i.done=!1,i}return i.done=!0,i}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(a,n){return s.type="throw",s.arg=e,i.next=a,n&&(i.method="next",i.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),I(i),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var n=a.arg;I(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,a){return this.delegate={iterator:O(e),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}),Ra=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],Ma=[640,640],Na={source:"https://raw.githubusercontent.com/SkalskiP/yolov5js-zoo/master/models/coco/yolov5n/model.json",classNames:Ra},ka={source:"https://raw.githubusercontent.com/SkalskiP/yolov5js-zoo/master/models/coco/yolov5s/model.json",classNames:Ra},Ba={source:"https://raw.githubusercontent.com/SkalskiP/yolov5js-zoo/master/models/coco/yolov5m/model.json",classNames:Ra},Ga=function(){function e(e,t,i){this.model=e,this.inferenceResolution=t,this.classNames=i}return e.preprocessImage=function(e,t){var i=P(e),a=[e.height,e.width];return[I.resizeBilinear(i,t).div(255).expandDims(0),a]},e.postprocessResults=function(e,t,i,a,n,o){for(var r=void 0!==o?o:0,s=a[0],l=a[1],c=[],d=0;d<t.length;d++){var p=t[d];if(!(p<r)){for(var u=[],h=0;h<4;h++)u[h]=e[4*d+h];var m=u[0]*l,f=u[1]*s,g=u[2]*l-m,b=u[3]*s-f,v=i[d],T=void 0!==n?n[i[d]]:void 0;c.push({x:m,y:f,width:g,height:b,score:p,classId:v,class:T})}}return c},e.prototype.detect=function(){var t=La(Da.mark(function t(i,a){var n,o,r,s,l,c,d,p=this;return Da.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=O(function(){return e.preprocessImage(i,p.inferenceResolution)}),o=n[0],r=n[1],t.next=3,this.model.executeAsync(o);case 3:return s=t.sent,l=s[0].dataSync(),c=s[1].dataSync(),d=s[2].dataSync(),o.dispose(),C(s),t.abrupt("return",e.postprocessResults(l,c,d,r,this.classNames,a));case 10:case"end":return t.stop()}},t,this)}));return function(e,i){return t.apply(this,arguments)}}(),e}();function Ha(e,t){return Va.apply(this,arguments)}function Va(){return(Va=La(Da.mark(function e(t,i){return Da.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=Ma),"string"!=typeof t.source){e.next=5;break}return e.abrupt("return",x(t.source).then(function(e){return new Ga(e,i,t.classNames)}));case 5:return e.abrupt("return",x(E(t.source)).then(function(e){return new Ga(e,i,t.classNames)}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}const za=class{static loadModel(e,t,i){const a=_i.getActiveImageData(),n=ti.getById(a.id);za.loadModelSafely(e,n).then(e=>{var i;za.model=e,Cc.dispatch((i=!0,{type:ii.UPDATE_YOLO_V5_OBJECT_DETECTOR_STATUS,payload:{isYOLOV5ObjectDetectorLoaded:i}})),Cc.dispatch(si(Ye.RECT));_i.getActiveLabelType()===Ye.RECT&&Ua.detectRectsForActiveImage(),t&&t()}).catch(e=>{console.log(e),i&&i()})}static loadModelSafely(e,t){return new Promise((i,a)=>{Ha(e,[640,640]).then(n=>{n.detect(t).then(e=>i(n)).catch(n=>{Ha(e,[1280,1280]).then(e=>{e.detect(t).then(t=>i(e)).catch(a)}).catch(a)})}).catch(a)})}static predict(e,t){za.model&&za.model.detect(e).then(e=>{t&&t(e)}).catch(e=>{console.log(e),Cc.dispatch(Ta(ya.createErrorNotification(wa[Aa.MODEL_INFERENCE_ERROR])))})}};let Fa=za;t(Fa,"model");class Ua{static detectRectsForActiveImage(){const e=_i.getActiveImageData();Ua.detectRects(e.id,ti.getById(e.id))}static detectRects(e,t){!_i.getImageDataById(e).isVisitedByYOLOObjectDetector&&mi.isAIYOLOObjectDetectorModelLoaded()&&(Cc.dispatch(Ti(We.LOADER)),Fa.predict(t,t=>{const i=Ua.extractNewSuggestedLabelNames(_i.getLabelNames(),t),a=mi.getRejectedSuggestedLabelList(),n=gr.excludeRejectedLabelNames(i,a);n.length>0?(Cc.dispatch(ba(n)),Cc.dispatch(Ti(We.SUGGEST_LABEL_NAMES))):Cc.dispatch(Ti(null)),Ua.saveRectPredictions(e,t)}))}static saveRectPredictions(e,t){const i=_i.getImageDataById(e),a=Ua.mapPredictionsToRectLabels(t),n={...i,labelRects:i.labelRects.concat(a),isVisitedByYOLOObjectDetector:!0};Cc.dispatch(li(i.id,n))}static mapPredictionsToRectLabels(e){return e.map(e=>({id:Xi(),labelIndex:null,labelId:null,rect:{x:e.x,y:e.y,width:e.width,height:e.height},isVisible:!0,isCreatedByAI:!0,status:Hi.UNDECIDED,suggestedLabel:e.class}))}static extractNewSuggestedLabelNames(e,t){return t.reduce((t,i)=>(t.includes(i.class)||S.exports.findLast(e,{name:i.class})||t.push(i.class),t),[])}static acceptAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.map(e=>{if(!e.isCreatedByAI)return e;const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}})};Cc.dispatch(li(t.id,t))}static rejectAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.filter(e=>!e.isCreatedByAI)};Cc.dispatch(li(t.id,t))}}function ja(e,t){return function(){return e.apply(t,arguments)}}const{toString:Wa}=Object.prototype,{getPrototypeOf:Xa}=Object,{iterator:Ka,toStringTag:Ya}=Symbol,Za=(qa=Object.create(null),e=>{const t=Wa.call(e);return qa[t]||(qa[t]=t.slice(8,-1).toLowerCase())});var qa;const Ja=e=>(e=e.toLowerCase(),t=>Za(t)===e),$a=e=>t=>typeof t===e,{isArray:Qa}=Array,en=$a("undefined");function tn(e){return null!==e&&!en(e)&&null!==e.constructor&&!en(e.constructor)&&on(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const an=Ja("ArrayBuffer");const nn=$a("string"),on=$a("function"),rn=$a("number"),sn=e=>null!==e&&"object"==typeof e,ln=e=>{if("object"!==Za(e))return!1;const t=Xa(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ya in e||Ka in e)},cn=Ja("Date"),dn=Ja("File"),pn=Ja("Blob"),un=Ja("FileList"),hn=Ja("URLSearchParams"),[mn,fn,gn,bn]=["ReadableStream","Request","Response","Headers"].map(Ja);function vn(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let a,n;if("object"!=typeof e&&(e=[e]),Qa(e))for(a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else{if(tn(e))return;const n=i?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let r;for(a=0;a<o;a++)r=n[a],t.call(null,e[r],r,e)}}function Tn(e,t){if(tn(e))return null;t=t.toLowerCase();const i=Object.keys(e);let a,n=i.length;for(;n-- >0;)if(a=i[n],t===a.toLowerCase())return a;return null}const Sn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,yn=e=>!en(e)&&e!==Sn;const An=(wn="undefined"!=typeof Uint8Array&&Xa(Uint8Array),e=>wn&&e instanceof wn);var wn;const xn=Ja("HTMLFormElement"),En=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Pn=Ja("RegExp"),In=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),a={};vn(i,(i,n)=>{let o;!1!==(o=t(i,n,e))&&(a[n]=o||i)}),Object.defineProperties(e,a)};const Cn=Ja("AsyncFunction"),On=(_n="function"==typeof setImmediate,Ln=on(Sn.postMessage),_n?setImmediate:Ln?(Dn=`axios@${Math.random()}`,Rn=[],Sn.addEventListener("message",({source:e,data:t})=>{e===Sn&&t===Dn&&Rn.length&&Rn.shift()()},!1),e=>{Rn.push(e),Sn.postMessage(Dn,"*")}):e=>setTimeout(e));var _n,Ln,Dn,Rn;const Mn="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Sn):"undefined"!=typeof process&&process.nextTick||On,Nn={isArray:Qa,isArrayBuffer:an,isBuffer:tn,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||on(e.append)&&("formdata"===(t=Za(e))||"object"===t&&on(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&an(e.buffer),t},isString:nn,isNumber:rn,isBoolean:e=>!0===e||!1===e,isObject:sn,isPlainObject:ln,isEmptyObject:e=>{if(!sn(e)||tn(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:mn,isRequest:fn,isResponse:gn,isHeaders:bn,isUndefined:en,isDate:cn,isFile:dn,isBlob:pn,isRegExp:Pn,isFunction:on,isStream:e=>sn(e)&&on(e.pipe),isURLSearchParams:hn,isTypedArray:An,isFileList:un,forEach:vn,merge:function e(){const{caseless:t,skipUndefined:i}=yn(this)&&this||{},a={},n=(n,o)=>{const r=t&&Tn(a,o)||o;ln(a[r])&&ln(n)?a[r]=e(a[r],n):ln(n)?a[r]=e({},n):Qa(n)?a[r]=n.slice():i&&en(n)||(a[r]=n)};for(let o=0,r=arguments.length;o<r;o++)arguments[o]&&vn(arguments[o],n);return a},extend:(e,t,i,{allOwnKeys:a}={})=>(vn(t,(t,a)=>{i&&on(t)?e[a]=ja(t,i):e[a]=t},{allOwnKeys:a}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,a)=>{let n,o,r;const s={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)r=n[o],a&&!a(r,e,t)||s[r]||(t[r]=e[r],s[r]=!0);e=!1!==i&&Xa(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:Za,kindOfTest:Ja,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const a=e.indexOf(t,i);return-1!==a&&a===i},toArray:e=>{if(!e)return null;if(Qa(e))return e;let t=e.length;if(!rn(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Ka]).call(e);let a;for(;(a=i.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const a=[];for(;null!==(i=e.exec(t));)a.push(i);return a},isHTMLForm:xn,hasOwnProperty:En,hasOwnProp:En,reduceDescriptors:In,freezeMethods:e=>{In(e,(t,i)=>{if(on(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const a=e[i];on(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))})},toObjectSet:(e,t)=>{const i={},a=e=>{e.forEach(e=>{i[e]=!0})};return Qa(e)?a(e):a(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,i){return t.toUpperCase()+i}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Tn,global:Sn,isContextDefined:yn,isSpecCompliantForm:function(e){return!!(e&&on(e.append)&&"FormData"===e[Ya]&&e[Ka])},toJSONObject:e=>{const t=new Array(10),i=(e,a)=>{if(sn(e)){if(t.indexOf(e)>=0)return;if(tn(e))return e;if(!("toJSON"in e)){t[a]=e;const n=Qa(e)?[]:{};return vn(e,(e,t)=>{const o=i(e,a+1);!en(o)&&(n[t]=o)}),t[a]=void 0,n}}return e};return i(e,0)},isAsyncFn:Cn,isThenable:e=>e&&(sn(e)||on(e))&&on(e.then)&&on(e.catch),setImmediate:On,asap:Mn,isIterable:e=>null!=e&&on(e[Ka])};function kn(e,t,i,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}Nn.inherits(kn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nn.toJSONObject(this.config),code:this.code,status:this.status}}});const Bn=kn.prototype,Gn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Gn[e]={value:e}}),Object.defineProperties(kn,Gn),Object.defineProperty(Bn,"isAxiosError",{value:!0}),kn.from=(e,t,i,a,n,o)=>{const r=Object.create(Bn);Nn.toFlatObject(e,r,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return kn.call(r,s,l,i,a,n),e&&null==r.cause&&Object.defineProperty(r,"cause",{value:e,configurable:!0}),r.name=e&&e.name||"Error",o&&Object.assign(r,o),r};function Hn(e){return Nn.isPlainObject(e)||Nn.isArray(e)}function Vn(e){return Nn.endsWith(e,"[]")?e.slice(0,-2):e}function zn(e,t,i){return e?e.concat(t).map(function(e,t){return e=Vn(e),!i&&t?"["+e+"]":e}).join(i?".":""):t}const Fn=Nn.toFlatObject(Nn,{},null,function(e){return/^is[A-Z]/.test(e)});function Un(e,t,i){if(!Nn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(i=Nn.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Nn.isUndefined(t[e])})).metaTokens,n=i.visitor||c,o=i.dots,r=i.indexes,s=(i.Blob||"undefined"!=typeof Blob&&Blob)&&Nn.isSpecCompliantForm(t);if(!Nn.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Nn.isDate(e))return e.toISOString();if(Nn.isBoolean(e))return e.toString();if(!s&&Nn.isBlob(e))throw new kn("Blob is not supported. Use a Buffer instead.");return Nn.isArrayBuffer(e)||Nn.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,n){let s=e;if(e&&!n&&"object"==typeof e)if(Nn.endsWith(i,"{}"))i=a?i:i.slice(0,-2),e=JSON.stringify(e);else if(Nn.isArray(e)&&function(e){return Nn.isArray(e)&&!e.some(Hn)}(e)||(Nn.isFileList(e)||Nn.endsWith(i,"[]"))&&(s=Nn.toArray(e)))return i=Vn(i),s.forEach(function(e,a){!Nn.isUndefined(e)&&null!==e&&t.append(!0===r?zn([i],a,o):null===r?i:i+"[]",l(e))}),!1;return!!Hn(e)||(t.append(zn(n,i,o),l(e)),!1)}const d=[],p=Object.assign(Fn,{defaultVisitor:c,convertValue:l,isVisitable:Hn});if(!Nn.isObject(e))throw new TypeError("data must be an object");return function e(i,a){if(!Nn.isUndefined(i)){if(-1!==d.indexOf(i))throw Error("Circular reference detected in "+a.join("."));d.push(i),Nn.forEach(i,function(i,o){!0===(!(Nn.isUndefined(i)||null===i)&&n.call(t,i,Nn.isString(o)?o.trim():o,a,p))&&e(i,a?a.concat(o):[o])}),d.pop()}}(e),t}function jn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Wn(e,t){this._pairs=[],e&&Un(e,this,t)}const Xn=Wn.prototype;function Kn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yn(e,t,i){if(!t)return e;const a=i&&i.encode||Kn;Nn.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let o;if(o=n?n(t,i):Nn.isURLSearchParams(t)?t.toString():new Wn(t,i).toString(a),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Xn.append=function(e,t){this._pairs.push([e,t])},Xn.toString=function(e){const t=e?function(t){return e.call(this,t,jn)}:jn;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Zn=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Nn.forEach(this.handlers,function(t){null!==t&&e(t)})}},qn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jn={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Wn,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},$n="undefined"!=typeof window&&"undefined"!=typeof document,Qn="object"==typeof navigator&&navigator||void 0,eo=$n&&(!Qn||["ReactNative","NativeScript","NS"].indexOf(Qn.product)<0),to="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,io=$n&&window.location.href||"http://localhost",ao={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$n,hasStandardBrowserWebWorkerEnv:to,hasStandardBrowserEnv:eo,navigator:Qn,origin:io},Symbol.toStringTag,{value:"Module"})),...Jn};function no(e){function t(e,i,a,n){let o=e[n++];if("__proto__"===o)return!0;const r=Number.isFinite(+o),s=n>=e.length;if(o=!o&&Nn.isArray(a)?a.length:o,s)return Nn.hasOwnProp(a,o)?a[o]=[a[o],i]:a[o]=i,!r;a[o]&&Nn.isObject(a[o])||(a[o]=[]);return t(e,i,a[o],n)&&Nn.isArray(a[o])&&(a[o]=function(e){const t={},i=Object.keys(e);let a;const n=i.length;let o;for(a=0;a<n;a++)o=i[a],t[o]=e[o];return t}(a[o])),!r}if(Nn.isFormData(e)&&Nn.isFunction(e.entries)){const i={};return Nn.forEachEntry(e,(e,a)=>{t(function(e){return Nn.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,i,0)}),i}return null}const oo={transitional:qn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,n=Nn.isObject(e);n&&Nn.isHTMLForm(e)&&(e=new FormData(e));if(Nn.isFormData(e))return a?JSON.stringify(no(e)):e;if(Nn.isArrayBuffer(e)||Nn.isBuffer(e)||Nn.isStream(e)||Nn.isFile(e)||Nn.isBlob(e)||Nn.isReadableStream(e))return e;if(Nn.isArrayBufferView(e))return e.buffer;if(Nn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Un(e,new ao.classes.URLSearchParams,{visitor:function(e,t,i,a){return ao.isNode&&Nn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=Nn.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Un(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||a?(t.setContentType("application/json",!1),function(e,t,i){if(Nn.isString(e))try{return(t||JSON.parse)(e),Nn.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||oo.transitional,i=t&&t.forcedJSONParsing,a="json"===this.responseType;if(Nn.isResponse(e)||Nn.isReadableStream(e))return e;if(e&&Nn.isString(e)&&(i&&!this.responseType||a)){const i=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(n){if(i){if("SyntaxError"===n.name)throw kn.from(n,kn.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ao.classes.FormData,Blob:ao.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nn.forEach(["delete","get","head","post","put","patch"],e=>{oo.headers[e]={}});const ro=oo,so=Nn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lo=Symbol("internals");function co(e){return e&&String(e).trim().toLowerCase()}function po(e){return!1===e||null==e?e:Nn.isArray(e)?e.map(po):String(e)}function uo(e,t,i,a,n){return Nn.isFunction(a)?a.call(this,t,i):(n&&(t=i),Nn.isString(t)?Nn.isString(a)?-1!==t.indexOf(a):Nn.isRegExp(a)?a.test(t):void 0:void 0)}class ho{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function n(e,t,i){const n=co(t);if(!n)throw new Error("header name must be a non-empty string");const o=Nn.findKey(a,n);(!o||void 0===a[o]||!0===i||void 0===i&&!1!==a[o])&&(a[o||t]=po(e))}const o=(e,t)=>Nn.forEach(e,(e,i)=>n(e,i,t));if(Nn.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Nn.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let i,a,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),a=e.substring(n+1).trim(),!i||t[i]&&so[i]||("set-cookie"===i?t[i]?t[i].push(a):t[i]=[a]:t[i]=t[i]?t[i]+", "+a:a)}),t})(e),t);else if(Nn.isObject(e)&&Nn.isIterable(e)){let i,a,n={};for(const t of e){if(!Nn.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[a=t[0]]=(i=n[a])?Nn.isArray(i)?[...i,t[1]]:[i,t[1]]:t[1]}o(n,t)}else null!=e&&n(t,e,i);return this}get(e,t){if(e=co(e)){const i=Nn.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(e);)t[a[1]]=a[2];return t}(e);if(Nn.isFunction(t))return t.call(this,e,i);if(Nn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=co(e)){const i=Nn.findKey(this,e);return!(!i||void 0===this[i]||t&&!uo(0,this[i],i,t))}return!1}delete(e,t){const i=this;let a=!1;function n(e){if(e=co(e)){const n=Nn.findKey(i,e);!n||t&&!uo(0,i[n],n,t)||(delete i[n],a=!0)}}return Nn.isArray(e)?e.forEach(n):n(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const n=t[i];e&&!uo(0,this[n],n,e,!0)||(delete this[n],a=!0)}return a}normalize(e){const t=this,i={};return Nn.forEach(this,(a,n)=>{const o=Nn.findKey(i,n);if(o)return t[o]=po(a),void delete t[n];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}(n):String(n).trim();r!==n&&delete t[n],t[r]=po(a),i[r]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Nn.forEach(this,(i,a)=>{null!=i&&!1!==i&&(t[a]=e&&Nn.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(e=>i.set(e)),i}static accessor(e){const t=(this[lo]=this[lo]={accessors:{}}).accessors,i=this.prototype;function a(e){const a=co(e);t[a]||(!function(e,t){const i=Nn.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+i,{value:function(e,i,n){return this[a].call(this,t,e,i,n)},configurable:!0})})}(i,e),t[a]=!0)}return Nn.isArray(e)?e.forEach(a):a(e),this}}ho.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Nn.reduceDescriptors(ho.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[i]=e}}}),Nn.freezeMethods(ho);const mo=ho;function fo(e,t){const i=this||ro,a=t||i,n=mo.from(a.headers);let o=a.data;return Nn.forEach(e,function(e){o=e.call(i,o,n.normalize(),t?t.status:void 0)}),n.normalize(),o}function go(e){return!(!e||!e.__CANCEL__)}function bo(e,t,i){kn.call(this,null==e?"canceled":e,kn.ERR_CANCELED,t,i),this.name="CanceledError"}function vo(e,t,i){const a=i.config.validateStatus;i.status&&a&&!a(i.status)?t(new kn("Request failed with status code "+i.status,[kn.ERR_BAD_REQUEST,kn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}Nn.inherits(bo,kn,{__CANCEL__:!0});const To=(e,t,i=3)=>{let a=0;const n=function(e,t){e=e||10;const i=new Array(e),a=new Array(e);let n,o=0,r=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=a[r];n||(n=l),i[o]=s,a[o]=l;let d=r,p=0;for(;d!==o;)p+=i[d++],d%=e;if(o=(o+1)%e,o===r&&(r=(r+1)%e),l-n<t)return;const u=c&&l-c;return u?Math.round(1e3*p/u):void 0}}(50,250);return function(e,t){let i,a,n=0,o=1e3/t;const r=(t,o=Date.now())=>{n=o,i=null,a&&(clearTimeout(a),a=null),e(...t)};return[(...e)=>{const t=Date.now(),s=t-n;s>=o?r(e,t):(i=e,a||(a=setTimeout(()=>{a=null,r(i)},o-s)))},()=>i&&r(i)]}(i=>{const o=i.loaded,r=i.lengthComputable?i.total:void 0,s=o-a,l=n(s);a=o;e({loaded:o,total:r,progress:r?o/r:void 0,bytes:s,rate:l||void 0,estimated:l&&r&&o<=r?(r-o)/l:void 0,event:i,lengthComputable:null!=r,[t?"download":"upload"]:!0})},i)},So=(e,t)=>{const i=null!=e;return[a=>t[0]({lengthComputable:i,total:e,loaded:a}),t[1]]},yo=e=>(...t)=>Nn.asap(()=>e(...t)),Ao=ao.hasStandardBrowserEnv?(wo=new URL(ao.origin),xo=ao.navigator&&/(msie|trident)/i.test(ao.navigator.userAgent),e=>(e=new URL(e,ao.origin),wo.protocol===e.protocol&&wo.host===e.host&&(xo||wo.port===e.port))):()=>!0;var wo,xo;const Eo=ao.hasStandardBrowserEnv?{write(e,t,i,a,n,o,r){if("undefined"==typeof document)return;const s=[`${e}=${encodeURIComponent(t)}`];Nn.isNumber(i)&&s.push(`expires=${new Date(i).toUTCString()}`),Nn.isString(a)&&s.push(`path=${a}`),Nn.isString(n)&&s.push(`domain=${n}`),!0===o&&s.push("secure"),Nn.isString(r)&&s.push(`SameSite=${r}`),document.cookie=s.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Po(e,t,i){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==i)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Io=e=>e instanceof mo?{...e}:e;function Co(e,t){t=t||{};const i={};function a(e,t,i,a){return Nn.isPlainObject(e)&&Nn.isPlainObject(t)?Nn.merge.call({caseless:a},e,t):Nn.isPlainObject(t)?Nn.merge({},t):Nn.isArray(t)?t.slice():t}function n(e,t,i,n){return Nn.isUndefined(t)?Nn.isUndefined(e)?void 0:a(void 0,e,0,n):a(e,t,0,n)}function o(e,t){if(!Nn.isUndefined(t))return a(void 0,t)}function r(e,t){return Nn.isUndefined(t)?Nn.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function s(i,n,o){return o in t?a(i,n):o in e?a(void 0,i):void 0}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:s,headers:(e,t,i)=>n(Io(e),Io(t),0,!0)};return Nn.forEach(Object.keys({...e,...t}),function(a){const o=l[a]||n,r=o(e[a],t[a],a);Nn.isUndefined(r)&&o!==s||(i[a]=r)}),i}const Oo=e=>{const t=Co({},e);let{data:i,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:o,headers:r,auth:s}=t;if(t.headers=r=mo.from(r),t.url=Yn(Po(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&r.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),Nn.isFormData(i))if(ao.hasStandardBrowserEnv||ao.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(Nn.isFunction(i.getHeaders)){const e=i.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,i])=>{t.includes(e.toLowerCase())&&r.set(e,i)})}if(ao.hasStandardBrowserEnv&&(a&&Nn.isFunction(a)&&(a=a(t)),a||!1!==a&&Ao(t.url))){const e=n&&o&&Eo.read(o);e&&r.set(n,e)}return t},_o="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,i){const a=Oo(e);let n=a.data;const o=mo.from(a.headers).normalize();let r,s,l,c,d,{responseType:p,onUploadProgress:u,onDownloadProgress:h}=a;function m(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(r),a.signal&&a.signal.removeEventListener("abort",r)}let f=new XMLHttpRequest;function g(){if(!f)return;const a=mo.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());vo(function(e){t(e),m()},function(e){i(e),m()},{data:p&&"text"!==p&&"json"!==p?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:a,config:e,request:f}),f=null}f.open(a.method.toUpperCase(),a.url,!0),f.timeout=a.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(i(new kn("Request aborted",kn.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const a=new kn(t&&t.message?t.message:"Network Error",kn.ERR_NETWORK,e,f);a.event=t||null,i(a),f=null},f.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const n=a.transitional||qn;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),i(new kn(t,n.clarifyTimeoutError?kn.ETIMEDOUT:kn.ECONNABORTED,e,f)),f=null},void 0===n&&o.setContentType(null),"setRequestHeader"in f&&Nn.forEach(o.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Nn.isUndefined(a.withCredentials)||(f.withCredentials=!!a.withCredentials),p&&"json"!==p&&(f.responseType=a.responseType),h&&([l,d]=To(h,!0),f.addEventListener("progress",l)),u&&f.upload&&([s,c]=To(u),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(r=t=>{f&&(i(!t||t.type?new bo(null,e,f):t),f.abort(),f=null)},a.cancelToken&&a.cancelToken.subscribe(r),a.signal&&(a.signal.aborted?r():a.signal.addEventListener("abort",r)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);b&&-1===ao.protocols.indexOf(b)?i(new kn("Unsupported protocol "+b+":",kn.ERR_BAD_REQUEST,e)):f.send(n||null)})},Lo=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,a=new AbortController;const n=function(e){if(!i){i=!0,r();const t=e instanceof Error?e:this.reason;a.abort(t instanceof kn?t:new bo(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,n(new kn(`timeout ${t} of ms exceeded`,kn.ETIMEDOUT))},t);const r=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:s}=a;return s.unsubscribe=()=>Nn.asap(r),s}},Do=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let a,n=0;for(;n<i;)a=n+t,yield e.slice(n,a),n=a},Ro=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},Mo=(e,t,i,a)=>{const n=async function*(e,t){for await(const i of Ro(e))yield*Do(i,t)}(e,t);let o,r=0,s=e=>{o||(o=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await n.next();if(t)return s(),void e.close();let o=a.byteLength;if(i){let e=r+=o;i(e)}e.enqueue(new Uint8Array(a))}catch(t){throw s(t),t}},cancel:e=>(s(e),n.return())},{highWaterMark:2})},{isFunction:No}=Nn,ko=(({Request:e,Response:t})=>({Request:e,Response:t}))(Nn.global),{ReadableStream:Bo,TextEncoder:Go}=Nn.global,Ho=(e,...t)=>{try{return!!e(...t)}catch(i){return!1}},Vo=e=>{e=Nn.merge.call({skipUndefined:!0},ko,e);const{fetch:t,Request:i,Response:a}=e,n=t?No(t):"function"==typeof fetch,o=No(i),r=No(a);if(!n)return!1;const s=n&&No(Bo),l=n&&("function"==typeof Go?(c=new Go,e=>c.encode(e)):async e=>new Uint8Array(await new i(e).arrayBuffer()));var c;const d=o&&s&&Ho(()=>{let e=!1;const t=new i(ao.origin,{body:new Bo,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),p=r&&s&&Ho(()=>Nn.isReadableStream(new a("").body)),u={stream:p&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!u[e]&&(u[e]=(t,i)=>{let a=t&&t[e];if(a)return a.call(t);throw new kn(`Response type '${e}' is not supported`,kn.ERR_NOT_SUPPORT,i)})});const h=async(e,t)=>{const a=Nn.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Nn.isBlob(e))return e.size;if(Nn.isSpecCompliantForm(e)){const t=new i(ao.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Nn.isArrayBufferView(e)||Nn.isArrayBuffer(e)?e.byteLength:(Nn.isURLSearchParams(e)&&(e+=""),Nn.isString(e)?(await l(e)).byteLength:void 0)})(t):a};return async e=>{let{url:n,method:r,data:s,signal:l,cancelToken:c,timeout:m,onDownloadProgress:f,onUploadProgress:g,responseType:b,headers:v,withCredentials:T="same-origin",fetchOptions:S}=Oo(e),y=t||fetch;b=b?(b+"").toLowerCase():"text";let A=Lo([l,c&&c.toAbortSignal()],m),w=null;const x=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let E;try{if(g&&d&&"get"!==r&&"head"!==r&&0!==(E=await h(v,s))){let e,t=new i(n,{method:"POST",body:s,duplex:"half"});if(Nn.isFormData(s)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,i]=So(E,To(yo(g)));s=Mo(t.body,65536,e,i)}}Nn.isString(T)||(T=T?"include":"omit");const t=o&&"credentials"in i.prototype,l={...S,signal:A,method:r.toUpperCase(),headers:v.normalize().toJSON(),body:s,duplex:"half",credentials:t?T:void 0};w=o&&new i(n,l);let c=await(o?y(w,S):y(n,l));const m=p&&("stream"===b||"response"===b);if(p&&(f||m&&x)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Nn.toFiniteNumber(c.headers.get("content-length")),[i,n]=f&&So(t,To(yo(f),!0))||[];c=new a(Mo(c.body,65536,i,()=>{n&&n(),x&&x()}),e)}b=b||"text";let P=await u[Nn.findKey(u,b)||"text"](c,e);return!m&&x&&x(),await new Promise((t,i)=>{vo(t,i,{data:P,headers:mo.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(P){if(x&&x(),P&&"TypeError"===P.name&&/Load failed|fetch/i.test(P.message))throw Object.assign(new kn("Network Error",kn.ERR_NETWORK,e,w),{cause:P.cause||P});throw kn.from(P,P&&P.code,e,w)}}},zo=new Map,Fo=e=>{let t=e&&e.env||{};const{fetch:i,Request:a,Response:n}=t,o=[a,n,i];let r,s,l=o.length,c=zo;for(;l--;)r=o[l],s=c.get(r),void 0===s&&c.set(r,s=l?new Map:Vo(t)),c=s;return s};Fo();const Uo={http:null,xhr:_o,fetch:{get:Fo}};Nn.forEach(Uo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(i){}Object.defineProperty(e,"adapterName",{value:t})}});const jo=e=>`- ${e}`,Wo=e=>Nn.isFunction(e)||null===e||!1===e;const Xo={getAdapter:function(e,t){e=Nn.isArray(e)?e:[e];const{length:i}=e;let a,n;const o={};for(let r=0;r<i;r++){let i;if(a=e[r],n=a,!Wo(a)&&(n=Uo[(i=String(a)).toLowerCase()],void 0===n))throw new kn(`Unknown adapter '${i}'`);if(n&&(Nn.isFunction(n)||(n=n.get(t))))break;o[i||"#"+r]=n}if(!n){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new kn("There is no suitable adapter to dispatch the request "+(i?e.length>1?"since :\n"+e.map(jo).join("\n"):" "+jo(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:Uo};function Ko(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bo(null,e)}function Yo(e){Ko(e),e.headers=mo.from(e.headers),e.data=fo.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Xo.getAdapter(e.adapter||ro.adapter,e)(e).then(function(t){return Ko(e),t.data=fo.call(e,e.transformResponse,t),t.headers=mo.from(t.headers),t},function(t){return go(t)||(Ko(e),t&&t.response&&(t.response.data=fo.call(e,e.transformResponse,t.response),t.response.headers=mo.from(t.response.headers))),Promise.reject(t)})}const Zo="1.13.2",qo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qo[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Jo={};qo.transitional=function(e,t,i){function a(e,t){return"[Axios v"+Zo+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,o)=>{if(!1===e)throw new kn(a(n," has been removed"+(t?" in "+t:"")),kn.ERR_DEPRECATED);return t&&!Jo[n]&&(Jo[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},qo.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};const $o={assertOptions:function(e,t,i){if("object"!=typeof e)throw new kn("options must be an object",kn.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const o=a[n],r=t[o];if(r){const t=e[o],i=void 0===t||r(t,o,e);if(!0!==i)throw new kn("option "+o+" must be "+i,kn.ERR_BAD_OPTION_VALUE);continue}if(!0!==i)throw new kn("Unknown option "+o,kn.ERR_BAD_OPTION)}},validators:qo},Qo=$o.validators;class er{constructor(e){this.defaults=e||{},this.interceptors={request:new Zn,response:new Zn}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+t):i.stack=t}catch(a){}}throw i}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Co(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:n}=t;void 0!==i&&$o.assertOptions(i,{silentJSONParsing:Qo.transitional(Qo.boolean),forcedJSONParsing:Qo.transitional(Qo.boolean),clarifyTimeoutError:Qo.transitional(Qo.boolean)},!1),null!=a&&(Nn.isFunction(a)?t.paramsSerializer={serialize:a}:$o.assertOptions(a,{encode:Qo.function,serialize:Qo.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$o.assertOptions(t,{baseUrl:Qo.spelling("baseURL"),withXsrfToken:Qo.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=n&&Nn.merge(n.common,n[t.method]);n&&Nn.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=mo.concat(o,n);const r=[];let s=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,p=0;if(!s){const e=[Yo.bind(this),void 0];for(e.unshift(...r),e.push(...l),d=e.length,c=Promise.resolve(t);p<d;)c=c.then(e[p++],e[p++]);return c}d=r.length;let u=t;for(;p<d;){const e=r[p++],t=r[p++];try{u=e(u)}catch(h){t.call(this,h);break}}try{c=Yo.call(this,u)}catch(h){return Promise.reject(h)}for(p=0,d=l.length;p<d;)c=c.then(l[p++],l[p++]);return c}getUri(e){return Yn(Po((e=Co(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Nn.forEach(["delete","get","head","options"],function(e){er.prototype[e]=function(t,i){return this.request(Co(i||{},{method:e,url:t,data:(i||{}).data}))}}),Nn.forEach(["post","put","patch"],function(e){function t(t){return function(i,a,n){return this.request(Co(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}er.prototype[e]=t(),er.prototype[e+"Form"]=t(!0)});const tr=er;class ir{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const i=this;this.promise.then(e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{i.subscribe(e),t=e}).then(e);return a.cancel=function(){i.unsubscribe(t)},a},e(function(e,a,n){i.reason||(i.reason=new bo(e,a,n),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ir(function(t){e=t}),cancel:e}}}const ar=ir;const nr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nr).forEach(([e,t])=>{nr[t]=e});const or=nr;const rr=function e(t){const i=new tr(t),a=ja(tr.prototype.request,i);return Nn.extend(a,tr.prototype,i,{allOwnKeys:!0}),Nn.extend(a,i,null,{allOwnKeys:!0}),a.create=function(i){return e(Co(t,i))},a}(ro);rr.Axios=tr,rr.CanceledError=bo,rr.CancelToken=ar,rr.isCancel=go,rr.VERSION=Zo,rr.toFormData=Un,rr.AxiosError=kn,rr.Cancel=rr.CanceledError,rr.all=function(e){return Promise.all(e)},rr.spread=function(e){return function(t){return e.apply(null,t)}},rr.isAxiosError=function(e){return Nn.isObject(e)&&!0===e.isAxiosError},rr.mergeConfig=Co,rr.AxiosHeaders=mo,rr.formToJSON=e=>no(Nn.isHTMLForm(e)?new FormData(e):e),rr.getAdapter=Xo.getAdapter,rr.HttpStatusCode=or,rr.default=rr;const sr=rr;class lr{static loadModel(e,t,i){Cc.dispatch(va(e)),Cc.dispatch(si(Ye.RECT));if(_i.getActiveLabelType()===Ye.RECT){const e=_i.getActiveImageData(),a=()=>{Cc.dispatch(va({status:!1,model:"",key:""})),i()};lr.predict(e,t,a)}}static predict(e,t,i){const a=mi.getRoboflowAPIDetails();hi.loadImageBase64(e.fileData).then(e=>{sr({method:"POST",url:"https://detect.roboflow.com/"+a.model,params:{api_key:a.key},data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{const i=e.data.predictions.map(e=>({x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,score:e.confidence,class:e.class}));t(i)}).catch(i)})}}class cr{static detectRects(e){!e.isVisitedByRoboflowAPI&&mi.isRoboflowAPIModelLoaded()&&(Cc.dispatch(Ti(We.LOADER)),lr.predict(e,t=>{const i=cr.extractNewSuggestedLabelNames(_i.getLabelNames(),t),a=mi.getRejectedSuggestedLabelList(),n=gr.excludeRejectedLabelNames(i,a);n.length>0?(Cc.dispatch(ba(n)),Cc.dispatch(Ti(We.SUGGEST_LABEL_NAMES))):Cc.dispatch(Ti(null)),cr.saveRectPredictions(e,t)}))}static saveRectPredictions(e,t){const i=cr.mapPredictionsToRectLabels(t),a={...e,labelRects:e.labelRects.concat(i),isVisitedByRoboflowAPI:!0};Cc.dispatch(li(e.id,a))}static mapPredictionsToRectLabels(e){return e.map(e=>({id:Xi(),labelIndex:null,labelId:null,rect:{x:e.x,y:e.y,width:e.width,height:e.height},isVisible:!0,isCreatedByAI:!0,status:Hi.UNDECIDED,suggestedLabel:e.class}))}static extractNewSuggestedLabelNames(e,t){return t.reduce((t,i)=>(t.includes(i.class)||S.exports.findLast(e,{name:i.class})||t.push(i.class),t),[])}static acceptAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.map(e=>{const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}})};Cc.dispatch(li(t.id,t))}static rejectAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.filter(e=>e.status===Hi.ACCEPTED)};Cc.dispatch(li(t.id,t))}}class dr extends Error{constructor(){super("Given predicate results in more than one value being matched."),this.name="ArrayUtilAmbiguousMatchError"}}class pr extends Error{constructor(){super("Given array is empty."),this.name="EmptyArrayError"}}class ur extends Error{constructor(){super("Index can not be negative."),this.name="NegativeIndexError"}}class hr{static partition(e,t){return e.reduce((e,i)=>(t(i)?e.pass.push(i):e.fail.push(i),e),{pass:[],fail:[]})}static match(e,t,i){return e.reduce((e,a)=>{const n=t.filter(e=>i(a,e));if(1===n.length)e.push([a,n[0]]);else if(n.length>1)throw new dr;return e},[])}static unzip(e){return e.reduce((e,t)=>(e[0].push(t[0]),e[1].push(t[1]),e),[[],[]])}static getByInfiniteIndex(e,t){if(0===e.length)throw new pr;if(t<0)throw new ur;return e[t%e.length]}}const mr=new class{constructor(){t(this,"baseUrl","http://localhost:8000")}setBaseUrl(e){this.baseUrl=e.replace(/\/$/,"")}getBaseUrl(){return this.baseUrl}async annotateImage(e){const t=new FormData;t.append("file",e);try{return(await sr.post(`${this.baseUrl}/annotate`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){return console.error("Error calling backend API:",i),{success:!1,annotations:[],count:0,error:i instanceof Error?i.message:"Unknown error"}}}async healthCheck(){try{return 200===(await sr.get(`${this.baseUrl}/`)).status}catch(e){return!1}}};class fr{static detectRectsForActiveImage(){const e=_i.getActiveImageData();fr.detectRects(e.id,ti.getById(e.id))}static async detectRects(e,t){if(!mi.isAIDisabled()&&!_i.getImageDataById(e).isVisitedByObjectDetector){Cc.dispatch(Ti(We.LOADER));try{const i=await fr.imageToBlob(t),a=new File([i],"image.jpg",{type:"image/jpeg"}),n=await mr.annotateImage(a);if(n.success&&n.annotations.length>0){const t=fr.convertAnnotationsToDetectedObjects(n.annotations),i=fr.extractNewSuggestedLabelNames(_i.getLabelNames(),t),a=gr.excludeRejectedLabelNames(i,[]);if(a.length>0){const e=_i.getLabelNames(),t=a.reduce((t,i,a)=>(t.push({name:i,id:Xi(),color:hr.getByInfiniteIndex(Ke.LABEL_COLORS_PALETTE,e.length+a)}),t),[...e]);Cc.dispatch(pi(t))}Cc.dispatch(Ti(null)),fr.saveRectPredictions(e,t,_i.getLabelNames())}else Cc.dispatch(Ti(null)),console.error("Backend annotation failed:",n.error)}catch(i){Cc.dispatch(Ti(null)),console.error("Error during backend detection:",i)}}}static async imageToBlob(e){return new Promise((t,i)=>{const a=document.createElement("canvas");a.width=e.naturalWidth,a.height=e.naturalHeight;const n=a.getContext("2d");n?(n.drawImage(e,0,0),a.toBlob(e=>{e?t(e):i(new Error("Could not convert image to blob"))},"image/jpeg",.95)):i(new Error("Could not get canvas context"))})}static convertAnnotationsToDetectedObjects(e){return e.map(e=>({bbox:[e.bbox[0]-e.bbox[2]/2,e.bbox[1]-e.bbox[3]/2,e.bbox[2],e.bbox[3]],class:e.class,score:e.score}))}static saveRectPredictions(e,t,i){const a=_i.getImageDataById(e),n=i||_i.getLabelNames(),o=fr.mapPredictionsToRectLabels(t,n),r={...a,labelRects:a.labelRects.concat(o),isVisitedByObjectDetector:!0};Cc.dispatch(li(a.id,r))}static mapPredictionsToRectLabels(e,t){return e.map(e=>{const i=t.find(t=>t.name===e.class);return{id:Xi(),labelIndex:null,labelId:i?i.id:null,rect:{x:e.bbox[0],y:e.bbox[1],width:e.bbox[2],height:e.bbox[3]},isVisible:!0,isCreatedByAI:!0,status:Hi.UNDECIDED,suggestedLabel:e.class}})}static extractNewSuggestedLabelNames(e,t){return t.reduce((t,i)=>(t.includes(i.class)||S.exports.findLast(e,{name:i.class})||t.push(i.class),t),[])}static acceptAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.map(e=>{if(!e.isCreatedByAI)return e;const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}})};Cc.dispatch(li(t.id,t))}static rejectAllSuggestedRectLabels(e){const t={...e,labelRects:e.labelRects.filter(e=>!e.isCreatedByAI)};Cc.dispatch(li(t.id,t))}}class gr{static excludeRejectedLabelNames(e,t){return e.reduce((e,i)=>(t.includes(i)||e.push(i),e),[])}static detect(e,t){if(mi.isAIDisabled())return;const i=_i.getImageDataById(e),a=_i.getActiveLabelType(),n=mi.isAIYOLOObjectDetectorModelLoaded(),o=mi.isAISSDObjectDetectorModelLoaded(),r=mi.isAIBackendObjectDetectorLoaded(),s=mi.isRoboflowAPIModelLoaded();switch(a){case Ye.RECT:o&&Pa.detectRects(e,t),n&&Ua.detectRects(e,t),r&&fr.detectRects(e,t),s&&cr.detectRects(i);break;case Ye.POINT:Oa.detectPoses(e,t)}}static rejectAllSuggestedLabels(e){const t=_i.getActiveLabelType(),i=mi.isAIYOLOObjectDetectorModelLoaded(),a=mi.isAISSDObjectDetectorModelLoaded(),n=mi.isAIBackendObjectDetectorLoaded(),o=mi.isRoboflowAPIModelLoaded();switch(t){case Ye.RECT:a&&Pa.rejectAllSuggestedRectLabels(e),i&&Ua.rejectAllSuggestedRectLabels(e),n&&fr.rejectAllSuggestedRectLabels(e),o&&cr.rejectAllSuggestedRectLabels(e);break;case Ye.POINT:Oa.rejectAllSuggestedPointLabels(e)}}static acceptAllSuggestedLabels(e){const t=_i.getActiveLabelType(),i=mi.isAIYOLOObjectDetectorModelLoaded(),a=mi.isAISSDObjectDetectorModelLoaded(),n=mi.isAIBackendObjectDetectorLoaded(),o=mi.isRoboflowAPIModelLoaded();switch(t){case Ye.RECT:a&&Pa.acceptAllSuggestedRectLabels(e),i&&Ua.acceptAllSuggestedRectLabels(e),n&&fr.acceptAllSuggestedRectLabels(e),o&&cr.acceptAllSuggestedRectLabels(e);break;case Ye.POINT:Oa.acceptAllSuggestedPointLabels(e)}}}class br extends ca{}t(br,"actions",[{keyCombo:["Enter"],action:e=>{if(xi.supportRenderingEngine&&xi.supportRenderingEngine.labelType===Ye.POLYGON){const e=la.getEditorData();xi.supportRenderingEngine.addLabelAndFinishCreation(e)}la.fullRender()}},{keyCombo:["Escape"],action:e=>{if(xi.supportRenderingEngine)switch(xi.supportRenderingEngine.labelType){case Ye.POLYGON:case Ye.LINE:xi.supportRenderingEngine.cancelLabelCreation()}la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","ArrowLeft"]:["Control","ArrowLeft"],action:e=>{da.getPreviousImage()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","ArrowRight"]:["Control","ArrowRight"],action:e=>{da.getNextImage()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","+"]:["Control","+"],action:e=>{ia.zoomIn()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","-"]:["Control","-"],action:e=>{ia.zoomOut()}},{keyCombo:["ArrowRight"],action:e=>{e.preventDefault(),ia.translateViewPortPosition(je.RIGHT)}},{keyCombo:["ArrowLeft"],action:e=>{e.preventDefault(),ia.translateViewPortPosition(je.LEFT)}},{keyCombo:["ArrowUp"],action:e=>{e.preventDefault(),ia.translateViewPortPosition(je.BOTTOM)}},{keyCombo:["ArrowDown"],action:e=>{e.preventDefault(),ia.translateViewPortPosition(je.TOP)}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Backspace"]:["Delete"],action:e=>{ga.deleteActiveLabel()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","0"]:["Control","0"],action:e=>{da.setActiveLabelOnActiveImage(0),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","1"]:["Control","1"],action:e=>{da.setActiveLabelOnActiveImage(1),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","2"]:["Control","2"],action:e=>{da.setActiveLabelOnActiveImage(2),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","3"]:["Control","3"],action:e=>{da.setActiveLabelOnActiveImage(3),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","4"]:["Control","4"],action:e=>{da.setActiveLabelOnActiveImage(4),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","5"]:["Control","5"],action:e=>{da.setActiveLabelOnActiveImage(5),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","6"]:["Control","6"],action:e=>{da.setActiveLabelOnActiveImage(6),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","7"]:["Control","7"],action:e=>{da.setActiveLabelOnActiveImage(7),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","8"]:["Control","8"],action:e=>{da.setActiveLabelOnActiveImage(8),la.fullRender()}},{keyCombo:fa.isMac(window.navigator.userAgent)?["Alt","9"]:["Control","9"],action:e=>{da.setActiveLabelOnActiveImage(9),la.fullRender()}},{keyCombo:["r"],action:e=>{ga.copyLabelsFromPreviousImage(),la.fullRender()}},{keyCombo:["m"],action:e=>{Cc.dispatch(wi(!Ri.getMoveModeStatus()))}},{keyCombo:["a"],action:e=>{const t=_i.getActiveImageData();gr.acceptAllSuggestedLabels(t),la.fullRender()}},{keyCombo:["x"],action:e=>{const t=_i.getActiveImageData();gr.rejectAllSuggestedLabels(t),la.fullRender()}}]);class vr{static close(){Cc.dispatch(Ti(null)),yr.restoreCtx()}}class Tr extends ca{}t(Tr,"actions",[{keyCombo:["Escape"],action:e=>{const t=Ri.getActivePopupType();Ke.CLOSEABLE_POPUPS.includes(t)&&vr.close()}}]);const Sr=class{static getActiveCombo(){return Sr.activeCombo}static init(){window.addEventListener(Li.KEY_DOWN,Sr.onDown),window.addEventListener(Li.KEY_UP,Sr.onUp),window.addEventListener(Li.FOCUS,Sr.onFocus)}static switchCtx(e){const t=Ri.getActiveContext();t!==e&&(Sr.contextHistory.push(t),Sr.updateCtx(e))}static updateCtx(e){var t;switch(Cc.dispatch((t=e,{type:ii.UPDATE_CONTEXT,payload:{activeContext:t}})),e){case vi.EDITOR:Sr.actions=br.getActions();break;case vi.POPUP:Sr.actions=Tr.getActions();break;default:Sr.actions=[]}}static restoreCtx(){Sr.updateCtx(Sr.contextHistory.pop())}static onDown(e){const t=Sr.getKeyCodeFromEvent(e);Sr.isInCombo(t)||Sr.addToCombo(t),Sr.execute(e)}static onUp(e){const t=Sr.getKeyCodeFromEvent(e);Sr.removeFromCombo(t)}static onFocus(){Sr.activeCombo=[]}static execute(e){for(let t=0;t<Sr.actions.length;t++){const i=Sr.actions[t];Sr.matchCombo(Sr.activeCombo,i.keyCombo)&&i.action(e)}}static isInCombo(e){return Sr.activeCombo.indexOf(e)>=0}static addToCombo(e){Sr.activeCombo.push(e)}static removeFromCombo(e){const t=Sr.activeCombo.indexOf(e);t>=0&&Sr.activeCombo.splice(t,1)}static getKeyCodeFromEvent(e){return e.key}static matchCombo(e,t){return S.exports.isEmpty(S.exports.xor(e,t))}};let yr=Sr;t(yr,"activeCombo",[]),t(yr,"actions",[]),t(yr,"contextHistory",[]);class Ar extends a.Component{constructor(e){super(e),t(this,"imagesListRef"),t(this,"updateListSize",()=>{if(!this.imagesListRef)return;const e=this.imagesListRef.getBoundingClientRect();this.setState({size:{width:e.width,height:e.height}})}),t(this,"isImageChecked",e=>{const t=this.props.imagesData[e];switch(this.props.activeLabelType){case Ye.LINE:return t.labelLines.length>0;case Ye.IMAGE_RECOGNITION:return t.labelNameIds.length>0;case Ye.POINT:return t.labelPoints.filter(e=>e.status===Hi.ACCEPTED).length>0;case Ye.POLYGON:return t.labelPolygons.length>0;case Ye.RECT:return t.labelRects.filter(e=>e.status===Hi.ACCEPTED).length>0}}),t(this,"onClickHandler",e=>{da.getImageByIndex(e)}),t(this,"renderImagePreview",(e,t,i,a)=>s(bi,{style:a,size:{width:150,height:150},isScrolling:t,isChecked:this.isImageChecked(e),imageData:this.props.imagesData[e],onClick:()=>this.onClickHandler(e),isSelected:this.props.activeImageIndex===e},e)),this.state={size:null}}componentDidMount(){this.updateListSize(),window.addEventListener(Li.RESIZE,this.updateListSize)}componentWillUnmount(){window.removeEventListener(Li.RESIZE,this.updateListSize)}render(){const{size:e}=this.state;return s("div",{className:"ImagesList",ref:e=>this.imagesListRef=e,onClick:()=>yr.switchCtx(vi.LEFT_NAVBAR),children:!!e&&s(Wt,{size:e,childSize:{width:150,height:150},childCount:this.props.imagesData.length,childRender:this.renderImagePreview,overScanHeight:200})})}}const wr=Ve(e=>({activeImageIndex:e.labels.activeImageIndex,imagesData:e.labels.imagesData,activeLabelType:e.labels.activeLabelType}),{})(Ar),xr=[{labelType:Ye.IMAGE_RECOGNITION,headerText:"Image recognition",imageSrc:"ico/object.png",imageAlt:"object",projectType:aa.IMAGE_RECOGNITION},{labelType:Ye.RECT,headerText:"Rect",imageSrc:"ico/rectangle.png",imageAlt:"rectangle",projectType:aa.OBJECT_DETECTION},{labelType:Ye.POINT,headerText:"Point",imageSrc:"ico/point.png",imageAlt:"point",projectType:aa.OBJECT_DETECTION},{labelType:Ye.LINE,headerText:"Line",imageSrc:"ico/line.png",imageAlt:"line",projectType:aa.OBJECT_DETECTION},{labelType:Ye.POLYGON,headerText:"Polygon",imageSrc:"ico/polygon.png",imageAlt:"polygon",projectType:aa.OBJECT_DETECTION}],Er=i.exports.forwardRef((e,t)=>{const{buttonSize:i,padding:a,image:n,imageAlt:o,href:r,onClick:l,style:c,isActive:p,isDisabled:u,externalClassName:h}=e,m=a||10,f={...c,width:i.width,height:i.height},g={maxWidth:i.width-m,maxHeight:i.height-m};return d("div",{className:y("ImageButton",h,{active:p,disabled:u}),style:f,onClick:e=>{e.stopPropagation(),l&&l()},ref:t,children:[!!r&&s("a",{href:r,style:g,target:"_blank",rel:"noopener noreferrer",children:s("img",{draggable:!1,alt:o,src:n,style:g})}),!r&&s("img",{draggable:!1,alt:o,src:n,style:g})]})});class Pr extends i.exports.Component{constructor(e){super(e),t(this,"dropdownOptionHeight",30),t(this,"dropdownOptionCount",6),t(this,"dropdownMargin",4),t(this,"dropdownLabel"),t(this,"dropdown"),t(this,"openDropdown",()=>{0===_i.getLabelNames().length?this.props.updateActivePopupType(We.UPDATE_LABEL):(this.setState({isOpen:!0,filterQuery:"",selectedIndex:0}),window.addEventListener(Li.MOUSE_DOWN,this.closeDropdown))}),t(this,"closeDropdown",e=>{const t={x:e.clientX,y:e.clientY},i=this.dropdown.getBoundingClientRect(),a={x:i.left,y:i.top,width:i.width,height:i.height};jt.isPointInside(a,t)||(this.setState({isOpen:!1}),window.removeEventListener(Li.MOUSE_DOWN,this.closeDropdown))}),t(this,"getDropdownStyle",()=>{const e=this.dropdownLabel.getBoundingClientRect(),t=this.getFilteredOptions().length,i=Math.min(t,this.dropdownOptionCount)*this.dropdownOptionHeight+34,a=Math.max(e.width,300),n=window.innerWidth-e.right,o={width:a,height:i,right:Math.max(n,10)};return 2*window.innerHeight/3<e.top?Object.assign(o,{top:e.top-this.dropdownMargin-i}):Object.assign(o,{top:e.bottom+this.dropdownMargin})}),t(this,"getFilteredOptions",()=>this.props.options.filter(e=>e.name.toLowerCase().includes(this.state.filterQuery.toLowerCase()))),t(this,"selectOption",e=>{this.setState({isOpen:!1}),window.removeEventListener(Li.MOUSE_DOWN,this.closeDropdown),this.props.onSelectLabel(this.props.id,e),this.props.updateHighlightedLabelId(null),this.props.updateActiveLabelId(this.props.id)}),t(this,"handleSearchChange",e=>{this.setState({filterQuery:e.target.value,selectedIndex:0})}),t(this,"handleSearchKeyDown",e=>{const t=this.getFilteredOptions();"ArrowDown"===e.key?this.setState({selectedIndex:(this.state.selectedIndex+1)%t.length}):"ArrowUp"===e.key?this.setState({selectedIndex:(this.state.selectedIndex-1+t.length)%t.length}):"Enter"===e.key?t.length>0&&this.selectOption(t[this.state.selectedIndex].id):"Escape"===e.key&&(this.setState({isOpen:!1}),window.removeEventListener(Li.MOUSE_DOWN,this.closeDropdown))}),t(this,"getDropdownOptions",()=>this.getFilteredOptions().map((e,t)=>s("div",{className:y("DropdownOption",{selected:t===this.state.selectedIndex}),style:{height:this.dropdownOptionHeight},onClick:t=>{this.selectOption(e.id),t.stopPropagation()},children:e.name},e.id))),t(this,"mouseEnterHandler",()=>{this.props.updateHighlightedLabelId(this.props.id)}),t(this,"mouseLeaveHandler",()=>{this.props.updateHighlightedLabelId(null)}),t(this,"onClickHandler",()=>{this.props.updateActiveLabelId(this.props.id)}),t(this,"getToggleVisibilityButton",e=>void 0===this.props.toggleLabelVisibility?null:s(Er,{externalClassName:"icon",image:this.props.isVisible?"ico/eye.png":"ico/hide.png",imageAlt:"label is hidden",buttonSize:{width:28,height:28},onClick:()=>this.props.toggleLabelVisibility(e)})),this.state={animate:!1,isOpen:!1,filterQuery:"",selectedIndex:0}}componentDidMount(){requestAnimationFrame(()=>{this.setState({animate:!0}),this.props.isActive&&!this.props.value&&this.openDropdown()})}componentDidUpdate(e){!this.props.isActive||e.isActive||this.props.value||requestAnimationFrame(()=>{this.openDropdown()})}getClassName(){return y("LabelInputField",{loaded:this.state.animate,active:this.props.isActive})}render(){const{size:e,id:t,value:i,onDelete:a}=this.props;return s("div",{className:this.getClassName(),style:{width:e.width,height:e.height},onMouseEnter:this.mouseEnterHandler,onMouseLeave:this.mouseLeaveHandler,onClick:this.onClickHandler,children:d("div",{className:"LabelInputFieldWrapper",style:{width:e.width,height:e.height},children:[s("div",{className:"Marker",style:i?{backgroundColor:i.color}:{}}),d("div",{className:"Content",children:[d("div",{className:"ContentWrapper",children:[s("div",{className:"DropdownLabel",ref:e=>this.dropdownLabel=e,onClick:this.openDropdown,children:i?S.exports.truncate(i.name,{length:Ke.MAX_DROPDOWN_OPTION_LENGTH}):"Select label"}),this.state.isOpen&&d("div",{className:"Dropdown",style:this.getDropdownStyle(),ref:e=>this.dropdown=e,children:[s("div",{className:"SearchInputWrapper",children:s("input",{autoFocus:!0,className:"SearchInput",type:"text",placeholder:"Search label...",value:this.state.filterQuery,onChange:this.handleSearchChange,onKeyDown:this.handleSearchKeyDown,onClick:e=>e.stopPropagation()})}),s(zt,{renderTrackHorizontal:e=>s("div",{...e,className:"track-horizontal"}),style:{height:"calc(100% - 34px)"},children:s("div",{children:this.getDropdownOptions()})})]})]}),d("div",{className:"ContentWrapper",children:[this.getToggleVisibilityButton(t),s(Er,{externalClassName:"icon",image:"ico/trash.png",imageAlt:"remove label",buttonSize:{width:28,height:28},onClick:()=>a(t)})]})]})]})},t)}}const Ir=Ve(e=>({}),{updateHighlightedLabelId:ri,updateActiveLabelId:oi,updateActivePopupType:Ti})(Pr),Cr=Ve(e=>({firstLabelCreatedFlag:e.labels.firstLabelCreatedFlag}),{})(({firstLabelCreatedFlag:e,labelBefore:t,labelAfter:i})=>{const a=d(p,{children:[s("img",{draggable:!1,alt:"lets_start",src:"ico/rocket.png"}),s("p",{className:"extraBold",children:t})]});return s("div",{className:"EmptyLabelList",children:e?d(p,{children:[s("img",{draggable:!1,alt:"no_labels",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:i})]}):a})}),Or=Ve(e=>({activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}),{updateImageDataByIdAction:li,updateActiveLabelNameIdAction:ni,updateActiveLabelIdAction:oi})(({size:e,imageData:t,updateImageDataByIdAction:i,labelNames:a,updateActiveLabelNameIdAction:n,activeLabelId:o,highlightedLabelId:r,updateActiveLabelIdAction:l})=>{const c={width:e.width,height:e.height},d={width:e.width,height:40*t.labelRects.length},p=e=>{ga.deleteRectLabelById(t.id,e)},u=e=>{ga.toggleLabelVisibilityById(t.id,e)},h=(e,a)=>{const o={...t,labelRects:t.labelRects.map(t=>t.id===e?{...t,labelId:a,status:Hi.ACCEPTED}:t)};i(t.id,o),n(a)};return s("div",{className:"RectLabelsList",style:c,onClickCapture:()=>{l(null)},children:0===t.labelRects.filter(e=>e.status===Hi.ACCEPTED).length?s(Cr,{labelBefore:"draw your first bounding box",labelAfter:"no labels created for this image yet"}):s(zt,{children:s("div",{className:"RectLabelsListContent",style:d,children:t.labelRects.filter(e=>e.status===Hi.ACCEPTED).map(t=>s(Ir,{size:{width:e.width,height:40},isActive:t.id===o,isHighlighted:t.id===r,isVisible:t.isVisible,id:t.id,onDelete:p,value:null!==t.labelId?S.exports.findLast(a,{id:t.labelId}):null,options:a,onSelectLabel:h,toggleLabelVisibility:u},t.id))})})})}),_r=Ve(e=>({activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}),{updateImageDataByIdAction:li,updateActiveLabelNameIdAction:ni,updateActiveLabelIdAction:oi})(({size:e,imageData:t,updateImageDataByIdAction:i,labelNames:a,updateActiveLabelNameIdAction:n,activeLabelId:o,highlightedLabelId:r,updateActiveLabelIdAction:l})=>{const c={width:e.width,height:e.height},d={width:e.width,height:40*t.labelPoints.length},p=e=>{ga.deletePointLabelById(t.id,e)},u=e=>{ga.toggleLabelVisibilityById(t.id,e)},h=(e,a)=>{const o={...t,labelPoints:t.labelPoints.map(t=>t.id===e?{...t,labelId:a}:t)};i(t.id,o),n(a)};return s("div",{className:"PointLabelsList",style:c,onClickCapture:()=>{l(null)},children:0===t.labelPoints.filter(e=>e.status===Hi.ACCEPTED).length?s(Cr,{labelBefore:"mark your first point",labelAfter:"no labels created for this image yet"}):s(zt,{children:s("div",{className:"PointLabelsListContent",style:d,children:t.labelPoints.filter(e=>e.status===Hi.ACCEPTED).map(t=>s(Ir,{size:{width:e.width,height:40},isActive:t.id===o,isHighlighted:t.id===r,isVisible:t.isVisible,id:t.id,onDelete:p,value:null!==t.labelId?S.exports.findLast(a,{id:t.labelId}):null,options:a,onSelectLabel:h,toggleLabelVisibility:u},t.id))})})})}),Lr=Ve(e=>({activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}),{updateImageDataByIdAction:li,updateActiveLabelNameIdAction:ni,updateActiveLabelIdAction:oi})(({size:e,imageData:t,updateImageDataByIdAction:i,labelNames:a,updateActiveLabelNameIdAction:n,activeLabelId:o,highlightedLabelId:r,updateActiveLabelIdAction:l})=>{const c={width:e.width,height:e.height},d={width:e.width,height:40*t.labelPolygons.length},p=e=>{ga.deletePolygonLabelById(t.id,e)},u=e=>{ga.toggleLabelVisibilityById(t.id,e)},h=(e,a)=>{const o={...t,labelPolygons:t.labelPolygons.map(t=>t.id===e?{...t,labelId:a}:t)};i(t.id,o),n(a)};return s("div",{className:"PolygonLabelsList",style:c,onClickCapture:()=>{l(null)},children:0===t.labelPolygons.length?s(Cr,{labelBefore:"draw your first polygon",labelAfter:"no labels created for this image yet"}):s(zt,{children:s("div",{className:"PolygonLabelsListContent",style:d,children:t.labelPolygons.map(t=>s(Ir,{size:{width:e.width,height:40},isActive:t.id===o,isHighlighted:t.id===r,isVisible:t.isVisible,id:t.id,onDelete:p,value:null!==t.labelId?S.exports.findLast(a,{id:t.labelId}):null,options:a,onSelectLabel:h,toggleLabelVisibility:u},t.id))})})})}),Dr=Ve(e=>({activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}),{updateImageDataByIdAction:li,updateActiveLabelNameIdAction:ni,updateActiveLabelIdAction:oi})(({size:e,imageData:t,updateImageDataByIdAction:i,labelNames:a,updateActiveLabelNameIdAction:n,activeLabelId:o,highlightedLabelId:r,updateActiveLabelIdAction:l})=>{const c={width:e.width,height:e.height},d={width:e.width,height:40*t.labelLines.length},p=e=>{ga.deleteLineLabelById(t.id,e)},u=e=>{ga.toggleLabelVisibilityById(t.id,e)},h=(e,a)=>{const o={...t,labelLines:t.labelLines.map(t=>t.id===e?{...t,labelId:a}:t)};i(t.id,o),n(a)};return s("div",{className:"LineLabelsList",style:c,onClickCapture:()=>{l(null)},children:0===t.labelLines.length?s(Cr,{labelBefore:"draw your first line",labelAfter:"no labels created for this image yet"}):s(zt,{children:s("div",{className:"LineLabelsListContent",style:d,children:t.labelLines.map(t=>s(Ir,{size:{width:e.width,height:40},isActive:t.id===o,isHighlighted:t.id===r,isVisible:t.isVisible,id:t.id,onDelete:p,value:null!==t.labelId?S.exports.findLast(a,{id:t.labelId}):null,options:a,onSelectLabel:h,toggleLabelVisibility:u},t.id))})})})}),Rr=Ve(e=>({labelNames:e.labels.labels}),{updateImageDataById:li,updateActivePopupType:Ti})(({size:e,imageData:t,updateImageDataById:i,labelNames:a,updateActivePopupType:n})=>{const o={width:e.width,height:e.height},r={width:e.width,height:40*t.labelPolygons.length},l=()=>{n(We.UPDATE_LABEL)};return s("div",{className:"TagLabelsList",style:o,children:0===a.length?d("div",{className:"EmptyLabelList",onClick:l,children:[s("img",{draggable:!1,alt:"upload",src:"ico/type-writer.png"}),s("p",{className:"extraBold",children:"Your label list is empty"})]},"empty-label-list"):s(zt,{children:s("div",{className:"TagLabelsListContent",style:r,children:[...a.map(e=>{return s("div",{className:(a=e.id,y("TagItem",{active:t.labelNameIds.includes(a)})),onClickCapture:()=>(e=>{t.labelNameIds.includes(e)?i(t.id,{...t,labelNameIds:S.exports.remove(t.labelNameIds,t=>t!==e)}):i(t.id,{...t,labelNameIds:t.labelNameIds.concat(e)})})(e.id),children:e.name},e.id);var a}),s(Er,{image:"ico/plus.png",imageAlt:"plus",buttonSize:{width:32,height:32},onClick:l})]},"tag-labels-list-content")})},"tag-labels-list")});class Mr extends a.Component{constructor(e){super(e),t(this,"labelsToolkitRef"),t(this,"tabs"),t(this,"updateToolkitSize",()=>{if(!this.labelsToolkitRef)return;const e=this.labelsToolkitRef.getBoundingClientRect();this.setState({size:{width:e.width,height:e.height}})}),t(this,"headerClickHandler",e=>{this.props.updateActiveLabelType(e),this.props.updateActiveLabelId(null)}),t(this,"getLabelCount",e=>{const{activeImageIndex:t,imagesData:i}=this.props,a=i[t];if(!a)return 0;switch(e){case Ye.RECT:return a.labelRects.length;case Ye.POINT:return a.labelPoints.length;case Ye.LINE:return a.labelLines.length;case Ye.POLYGON:return a.labelPolygons.length;case Ye.IMAGE_RECOGNITION:return a.labelNameIds.length;default:return 0}}),t(this,"renderChildren",()=>{const{size:e}=this.state,{activeImageIndex:t,imagesData:i,activeLabelType:a}=this.props;return this.tabs.reduce((n,o,r)=>{const l=o===a,c=S.exports.find(xr,{labelType:o}),p=e.height-this.tabs.length*Ke.TOOLKIT_TAB_HEIGHT_PX,u=this.getLabelCount(o),h=e=>y(e,{active:l}),m=d("div",{className:h("Header"),onClick:()=>this.headerClickHandler(o),style:{height:Ke.TOOLKIT_TAB_HEIGHT_PX},children:[s("div",{className:"Marker"}),d("div",{className:"HeaderGroupWrapper",children:[s("img",{draggable:!1,className:"Ico",src:c.imageSrc,alt:c.imageAlt}),`${c.headerText} (${u})`]}),s("div",{className:"HeaderGroupWrapper",children:s("img",{draggable:!1,className:"Arrow",src:"ico/down.png",alt:"down_arrow"})})]},"Header_"+r),f=d("div",{className:h("Content"),style:{height:l?p:0},children:[o===Ye.RECT&&s(Or,{size:{width:e.width-20,height:p-20},imageData:i[t]}),o===Ye.POINT&&s(_r,{size:{width:e.width-20,height:p-20},imageData:i[t]}),o===Ye.LINE&&s(Dr,{size:{width:e.width-20,height:p-20},imageData:i[t]}),o===Ye.POLYGON&&s(Lr,{size:{width:e.width-20,height:p-20},imageData:i[t]}),o===Ye.IMAGE_RECOGNITION&&s(Rr,{size:{width:e.width-20,height:p-20},imageData:i[t]})]},"Content_"+r);return n.push([m,f]),n},[])}),this.state={size:null},this.tabs=e.projectType===aa.IMAGE_RECOGNITION?[Ye.IMAGE_RECOGNITION]:[Ye.RECT,Ye.POINT,Ye.LINE,Ye.POLYGON];const i=e.activeLabelType?e.activeLabelType:this.tabs[0];e.updateActiveLabelType(i)}componentDidMount(){this.updateToolkitSize(),window.addEventListener(Li.RESIZE,this.updateToolkitSize)}componentWillUnmount(){window.removeEventListener(Li.RESIZE,this.updateToolkitSize)}render(){return s("div",{className:"LabelsToolkit",ref:e=>this.labelsToolkitRef=e,onClick:()=>yr.switchCtx(vi.RIGHT_NAVBAR),children:this.state.size&&this.renderChildren()})}}const Nr=Ve(e=>({activeImageIndex:e.labels.activeImageIndex,activeLabelType:e.labels.activeLabelType,imagesData:e.labels.imagesData,projectType:e.general.projectData.type}),{updateImageDataById:li,updateActiveLabelType:si,updateActiveLabelId:oi})(Mr),kr=e=>{const{direction:t,isOpen:i,isWithContext:a,renderContent:n,renderCompanion:o}=e;return d("div",{className:y("SideNavigationBar",{left:t===je.LEFT,right:t===je.RIGHT,"with-context":a,closed:!i}),children:[s("div",{className:"CompanionBar",children:o&&o()}),i&&s("div",{className:"NavigationBarContentWrapper",children:n&&n()})]})},Br=e=>{const{key:t,label:i,onClick:a,style:n,isActive:o,isDisabled:r,image:l,imageAlt:c}=e;return d("div",{className:y("VerticalEditorButton",{active:o,disabled:r}),onClick:a||void 0,style:n,children:[l&&s("img",{draggable:!1,alt:c,src:l}),i]},t)};class Gr{}t(Gr,"getIndicator",e=>{switch(e){case Oi.ADD:return"ico/plus.png";case Oi.RESIZE:return"ico/resize.png";case Oi.CLOSE:return"ico/close.png";case Oi.MOVE:return"ico/move.png";case Oi.CANCEL:return"ico/cancel.png";case Oi.GRAB:return"ico/hand-fill.png";case Oi.GRABBING:return"ico/hand-fill-grab.png";default:return null}}),t(Gr,"getCursorStyle",e=>y("Cursor",{move:e===Oi.MOVE,add:e===Oi.ADD,resize:e===Oi.RESIZE,close:e===Oi.CLOSE,cancel:e===Oi.CANCEL,grab:e===Oi.GRAB,grabbing:e===Oi.GRABBING}));class Hr{}t(Hr,"mobileDeviceData"),t(Hr,"isMac"),t(Hr,"isSafari"),t(Hr,"isFirefox");const Vr=Ve(e=>({activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId}),{updatePreventCustomCursorStatus:yi,updateImageDataById:li})(({position:e,updatePreventCustomCursorStatus:t,activeLabelId:a,highlightedLabelId:n,labelData:o,imageData:r,updateImageDataById:l})=>{const[c,u]=i.exports.useState(!1),h=()=>c||o.id===a||o.id===n;return s("div",{className:y("LabelControlPanel",{"is-active":h()}),style:{top:e.y,left:e.x},onMouseEnter:()=>{t(!0),u(!0)},onMouseLeave:()=>{t(!1),u(!1)},children:h()&&d(p,{children:[s(Er,{image:"ico/plus.png",imageAlt:"plus",buttonSize:{width:30,height:30},padding:15,onClick:()=>{const e={...r,labelRects:r.labelRects.map(e=>{if(e.id===o.id){const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}}return e}),labelPoints:r.labelPoints.map(e=>{if(e.id===o.id){const t=S.exports.findLast(_i.getLabelNames(),{name:e.suggestedLabel});return{...e,status:Hi.ACCEPTED,labelId:t?t.id:e.labelId}}return e})};l(r.id,e),t(!1)}}),s(Er,{image:"ico/trash.png",imageAlt:"trash",buttonSize:{width:30,height:30},padding:15,onClick:()=>{ga.deleteImageLabelById(r.id,o.id),t(!1)}}),o.suggestedLabel&&ga.labelExistsInLabelNames(o.suggestedLabel)?s("div",{className:"SuggestedLabel",children:o.suggestedLabel}):null]})})});class zr extends a.Component{constructor(e){super(e),t(this,"loadImage",async e=>{if(e.loadStatus)la.setActiveImage(ti.getById(e.id)),gr.detect(e.id,ti.getById(e.id)),this.updateModelAndRender();else if(!xi.isLoading){la.setLoadingStatus(!0);const t=t=>this.saveLoadedImage(t,e);hi.loadImage(e.fileData).then(e=>t(e)).catch(e=>this.handleLoadImageError())}}),t(this,"saveLoadedImage",(e,t)=>{t.loadStatus=!0,this.props.updateImageDataById(t.id,t),ti.storeImage(t.id,e),la.setActiveImage(e),gr.detect(t.id,e),la.setLoadingStatus(!1),this.updateModelAndRender()}),t(this,"handleLoadImageError",()=>{}),t(this,"updateModelAndRender",()=>{ia.updateViewPortSize(),ia.updateDefaultViewPortImageRect(),ia.resizeViewPortContent(),la.fullRender()}),t(this,"update",e=>{const t=la.getEditorData(e);xi.mousePositionOnViewPortContent=Zi.getMousePositionOnCanvasFromEvent(e,xi.canvas),xi.primaryRenderingEngine.update(t),this.props.imageDragMode?xi.viewPortHelper.update(t):xi.supportRenderingEngine&&xi.supportRenderingEngine.update(t),!this.props.activePopupType&&la.updateMousePositionIndicator(e),la.fullRender()}),t(this,"handleZoom",e=>{if(e.ctrlKey||Hr.isMac&&e.metaKey){const t=Math.sign(e.deltaY);Hr.isMac&&-1===t||!Hr.isMac&&1===t?ia.zoomOut():(Hr.isMac&&1===t||!Hr.isMac&&-1===t)&&ia.zoomIn()}xi.mousePositionOnViewPortContent=Zi.getMousePositionOnCanvasFromEvent(e,xi.canvas)}),t(this,"getOptionsPanels",()=>{const e=la.getEditorData();return this.props.activeLabelType===Ye.RECT?this.props.imageData.labelRects.filter(e=>e.isCreatedByAI&&e.status!==Hi.ACCEPTED).map(t=>{const i={x:t.rect.x,y:t.rect.y},a=Bi.transferPointFromImageToViewPortContent(i,e);return s(Vr,{position:a,labelData:t,imageData:this.props.imageData},t.id)}):this.props.activeLabelType===Ye.POINT?this.props.imageData.labelPoints.filter(e=>e.isCreatedByAI&&e.status!==Hi.ACCEPTED).map(t=>{const i={x:t.point.x,y:t.point.y},a=Bi.transferPointFromImageToViewPortContent(i,e);return s(Vr,{position:a,labelData:t,imageData:this.props.imageData},t.id)}):null}),t(this,"onScrollbarsUpdate",e=>{const t={width:e.scrollWidth,height:e.scrollHeight};S.exports.isEqual(t,this.state.viewPortSize)||this.setState({viewPortSize:t})}),this.state={viewPortSize:{width:0,height:0}}}componentDidMount(){this.mountEventListeners();const{imageData:e,activeLabelType:t}=this.props;yr.switchCtx(vi.EDITOR),la.mountRenderEnginesAndHelpers(t),Qt.addAndRun(this.loadImage(e)),ia.resizeCanvas(this.props.size)}componentWillUnmount(){this.unmountEventListeners()}componentDidUpdate(e,t,i){const{imageData:a,activeLabelType:n}=this.props;e.imageData.id!==a.id&&Qt.addAndRun(this.loadImage(a)),e.activeLabelType!==n&&(la.swapSupportRenderingEngine(n),gr.detect(a.id,ti.getById(a.id))),this.updateModelAndRender()}mountEventListeners(){window.addEventListener(Li.MOUSE_MOVE,this.update),window.addEventListener(Li.MOUSE_UP,this.update),xi.canvas.addEventListener(Li.MOUSE_DOWN,this.update),xi.canvas.addEventListener(Li.MOUSE_WHEEL,this.handleZoom)}unmountEventListeners(){window.removeEventListener(Li.MOUSE_MOVE,this.update),window.removeEventListener(Li.MOUSE_UP,this.update),xi.canvas.removeEventListener(Li.MOUSE_DOWN,this.update),xi.canvas.removeEventListener(Li.MOUSE_WHEEL,this.handleZoom)}render(){return d("div",{className:"Editor",ref:e=>xi.editor=e,draggable:!1,children:[s(zt,{ref:e=>xi.viewPortScrollbars=e,renderTrackHorizontal:e=>s("div",{...e,className:"track-horizontal"}),renderTrackVertical:e=>s("div",{...e,className:"track-vertical"}),onUpdate:this.onScrollbarsUpdate,children:d("div",{className:"ViewPortContent",children:[s("canvas",{className:"ImageCanvas",ref:e=>xi.canvas=e,draggable:!1,onContextMenu:e=>e.preventDefault()}),this.getOptionsPanels()]})}),s("div",{className:"MousePositionIndicator",ref:e=>xi.mousePositionIndicator=e,draggable:!1}),s("div",{className:Gr.getCursorStyle(this.props.customCursorStyle),ref:e=>xi.cursor=e,draggable:!1,children:s("img",{draggable:!1,alt:"indicator",src:Gr.getIndicator(this.props.customCursorStyle)})})]})}}const Fr=Ve(e=>({activeLabelType:e.labels.activeLabelType,activePopupType:e.general.activePopupType,activeLabelId:e.labels.activeLabelId,customCursorStyle:e.general.customCursorStyle,imageDragMode:e.general.imageDragMode,zoom:e.general.zoom}),{updateImageDataById:li})(zr),Ur=Ve(e=>({activeImageIndex:e.labels.activeImageIndex,activeContext:e.general.activeContext}),{})(({size:e,imageData:t,totalImageCount:i,activeImageIndex:a,activeContext:n})=>d("div",{className:y("EditorBottomNavigationBar",{"with-context":n===vi.EDITOR}),children:[s(Er,{image:"ico/left.png",imageAlt:"previous",buttonSize:{width:25,height:25},onClick:()=>da.getPreviousImage(),isDisabled:0===a,externalClassName:"left"}),e.width>400?d("div",{className:"CurrentImageName",children:[" ",t.fileData.name," "]}):d("div",{className:"CurrentImageCount",children:[" ",a+1+" / "+i," "]}),s(Er,{image:"ico/right.png",imageAlt:"next",buttonSize:{width:25,height:25},onClick:()=>da.getNextImage(),isDisabled:a===i-1,externalClassName:"right"})]})),jr={width:30,height:30},Wr=u(({className:e,...t})=>s(h,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${m.tooltip}`]:{backgroundColor:"#171717",color:"#ffffff",boxShadow:e.shadows[1],fontSize:12,maxWidth:200,textAlign:"center"}})),Xr=(e,t,i,a,n,o,r)=>s(Wr,{disableFocusListener:!0,title:t,TransitionComponent:f,TransitionProps:{timeout:600},placement:"bottom",children:s("div",{children:s(Er,{buttonSize:jr,padding:10,image:i,imageAlt:a,href:o,onClick:r,isActive:n})})},e),Kr=Ve(e=>({activeContext:e.general.activeContext,imageDragMode:e.general.imageDragMode,crossHairVisible:e.general.crossHairVisible,fixZoom:e.general.fixZoom,moveMode:e.general.moveMode,isAIDisabled:e.ai.isAIDisabled,activeLabelType:e.labels.activeLabelType}),{updateImageDragModeStatusAction:function(e){return{type:ii.UPDATE_IMAGE_DRAG_MODE_STATUS,payload:{imageDragMode:e}}},updateCrossHairVisibleStatusAction:function(e){return{type:ii.UPDATE_CROSS_HAIR_VISIBLE_STATUS,payload:{crossHairVisible:e}}},updateFixZoomStatusAction:function(e){return{type:ii.UPDATE_FIX_ZOOM_STATUS,payload:{fixZoom:e}}},updateMoveModeStatusAction:wi,updateDisabledAIFlagAction:function(e){return{type:ii.UPDATE_DISABLED_AI_FLAG,payload:{isAIDisabled:e}}}})(({activeContext:e,updateImageDragModeStatusAction:t,updateCrossHairVisibleStatusAction:i,updateFixZoomStatusAction:a,updateMoveModeStatusAction:n,updateDisabledAIFlagAction:o,imageDragMode:r,crossHairVisible:s,fixZoom:l,moveMode:c,isAIDisabled:p,activeLabelType:u})=>{const h=u===Ye.RECT&&mi.isAISSDObjectDetectorModelLoaded()||u===Ye.RECT&&mi.isAIYOLOObjectDetectorModelLoaded()||u===Ye.RECT&&mi.isAIBackendObjectDetectorLoaded()||u===Ye.RECT&&mi.isRoboflowAPIModelLoaded()||u===Ye.POINT&&mi.isAIPoseDetectorModelLoaded(),m=mi.isAISSDObjectDetectorModelLoaded()||mi.isAIYOLOObjectDetectorModelLoaded()||mi.isAIPoseDetectorModelLoaded()||mi.isAIBackendObjectDetectorLoaded();return d("div",{className:y("EditorTopNavigationBar",{"with-context":e===vi.EDITOR}),children:[d("div",{className:"ButtonWrapper",children:[Xr("zoom-in","zoom in","ico/zoom-in.png","zoom-in",!1,void 0,()=>ia.zoomIn()),Xr("zoom-out","zoom out","ico/zoom-out.png","zoom-out",!1,void 0,()=>ia.zoomOut()),Xr("zoom-fit","fit image to available space","ico/zoom-fit.png","zoom-fit",!1,void 0,()=>ia.setDefaultZoom()),Xr("zoom-max","maximum allowed image zoom","ico/zoom-max.png","zoom-max",!1,void 0,()=>ia.setOneForOneZoom())]}),d("div",{className:"ButtonWrapper",children:[Xr("image-drag-mode",r?"turn-off image drag mode":"turn-on image drag mode - works only when image is zoomed","ico/hand.png","image-drag-mode",r,void 0,()=>{(r||Ri.getZoom()!==$i.MIN_ZOOM)&&t(!r)}),Xr("cursor-cross-hair",s?"turn-off cursor cross-hair":"turn-on cursor cross-hair","ico/cross-hair.png","cross-hair",s,void 0,()=>{i(!s)}),Xr("fix-zoom",l?"turn-off fix zoom":"turn-on fix zoom","ico/refresh.png","fix-zoom",l,void 0,()=>{a(!l)}),Xr("move-mode",c?"turn-off move mode":"turn-on move mode","ico/move.png","move-mode",c,void 0,()=>{n(!c)}),m&&Xr("ai-inference",p?"turn-on AI inference":"turn-off AI inference","ico/ai.png","ai-inference",!p,void 0,()=>{o(!p)})]}),h&&d("div",{className:"ButtonWrapper",children:[Xr("accept-all","accept all proposed detections","ico/accept-all.png","accept-all",!1,void 0,()=>gr.acceptAllSuggestedLabels(_i.getActiveImageData())),Xr("reject-all","reject all proposed detections","ico/reject-all.png","reject-all",!1,void 0,()=>gr.rejectAllSuggestedLabels(_i.getActiveImageData()))]})]})}),Yr=Ve(e=>({windowSize:e.general.windowSize,activeImageIndex:e.labels.activeImageIndex,imagesData:e.labels.imagesData,activeContext:e.general.activeContext,projectType:e.general.projectData.type}))(e=>{const{windowSize:t,activeImageIndex:a,imagesData:n,activeContext:o,projectType:r}=e,[l,c]=i.exports.useState(!0),[u,h]=i.exports.useState(!0),m=()=>{if(t){const e=l?Ke.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX:Ke.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX,i=u?Ke.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX:Ke.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX;return{width:t.width-e-i,height:t.height-Ke.TOP_NAVIGATION_BAR_HEIGHT_PX-Ke.EDITOR_BOTTOM_NAVIGATION_BAR_HEIGHT_PX-Ke.EDITOR_TOP_NAVIGATION_BAR_HEIGHT_PX}}return null},f=()=>{l?l&&o===vi.LEFT_NAVBAR&&yr.restoreCtx():yr.switchCtx(vi.LEFT_NAVBAR),c(!l)},g=()=>{u?u&&o===vi.RIGHT_NAVBAR&&yr.restoreCtx():yr.switchCtx(vi.RIGHT_NAVBAR),h(!u)};return d("div",{className:"EditorContainer",children:[s(kr,{direction:je.LEFT,isOpen:l,isWithContext:o===vi.LEFT_NAVBAR,renderCompanion:()=>s(p,{children:s(Br,{label:"Images",image:"/ico/camera.png",imageAlt:"images",onClick:f,isActive:l})}),renderContent:()=>s(wr,{})},"left-side-navigation-bar"),d("div",{className:"EditorWrapper",onMouseDown:()=>yr.switchCtx(vi.EDITOR),children:[r===aa.OBJECT_DETECTION&&s(Kr,{},"editor-top-navigation-bar"),s(Fr,{size:m(),imageData:n[a]},"editor"),s(Ur,{imageData:n[a],size:m(),totalImageCount:n.length},"editor-bottom-navigation-bar")]},"editor-wrapper"),s(kr,{direction:je.RIGHT,isOpen:u,isWithContext:o===vi.RIGHT_NAVBAR,renderCompanion:()=>s(p,{children:s(Br,{label:"Labels",image:"/ico/tags.png",imageAlt:"labels",onClick:g,isActive:u})}),renderContent:()=>s(Nr,{})},"right-side-navigation-bar")]})}),Zr=Ve(e=>({imagesData:e.labels.imagesData,activeLabelType:e.labels.activeLabelType}),{})(({imagesData:e,activeLabelType:t})=>{const i=e.reduce((e,t)=>e+(t.labelPoints.length>0?1:0),0),a=e.reduce((e,t)=>e+(t.labelRects.length>0?1:0),0),n=e.reduce((e,t)=>e+(t.labelPolygons.length>0?1:0),0),o=e.reduce((e,t)=>e+(t.labelLines.length>0?1:0),0),r=e.reduce((e,t)=>e+(0!==t.labelNameIds.length?1:0),0);return s("div",{className:"StateBar",children:s("div",{style:{width:(()=>{switch(t){case Ye.POINT:return 100*i/e.length;case Ye.RECT:return 100*a/e.length;case Ye.POLYGON:return 100*n/e.length;case Ye.LINE:return 100*o/e.length;case Ye.IMAGE_RECOGNITION:return 100*r/e.length;default:return 0}})()+"%"},className:"done"})})}),qr=e=>{const{label:t,isPassword:i,onChange:a,onFocus:n,inputStyle:o,labelStyle:r,barStyle:l,value:c,onKeyUp:p}=e;return d("div",{className:"TextInput",children:[s("input",{value:c||void 0,type:i?"password":"text",style:o,onChange:a||void 0,onFocus:n||void 0,onKeyUp:p}),!!t&&s("label",{style:r,children:t}),s("div",{className:"Bar",style:l})]})},Jr=[{name:"Actions",imageSrc:"ico/actions.png",imageAlt:"actions",disabled:!1,children:[{name:"Edit Labels",description:"Modify labels list",imageSrc:"ico/tags.png",imageAlt:"labels",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.UPDATE_LABEL))},{name:"Import Images",description:"Load more images",imageSrc:"ico/camera.png",imageAlt:"images",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.IMPORT_IMAGES))},{name:"Import Annotations",description:"Import annotations from file",imageSrc:"ico/import-labels.png",imageAlt:"import-labels",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.IMPORT_ANNOTATIONS))},{name:"Export Annotations",description:"Export annotations to file",imageSrc:"ico/export-labels.png",imageAlt:"export-labels",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.EXPORT_ANNOTATIONS))},{name:"Run AI locally",description:"Run annotation model in browser",imageSrc:"ico/ai.png",imageAlt:"load-ai-model-in-browser",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.LOAD_AI_MODEL))},{name:"Connect AI server",description:"Run annotation model on server",imageSrc:"ico/api.png",imageAlt:"connect-ai-server",disabled:!1,onClick:()=>Cc.dispatch(Ti(We.CONNECT_AI_MODEL_VIA_API))}]},{name:"Community",imageSrc:"ico/plant.png",imageAlt:"community",disabled:!1,children:[{name:"Documentation",description:"Read more about Make Sense",imageSrc:"ico/documentation.png",imageAlt:"documentation",disabled:!1,onClick:()=>window.open("https://skalskip.github.io/make-sense","_blank")},{name:"Bugs and Features",description:"Report a bug or propose a new feature",imageSrc:"ico/bug.png",imageAlt:"bug",disabled:!1,onClick:()=>window.open("https://github.com/SkalskiP/make-sense/issues","_blank")}]}],$r=Ve(e=>({}),{updatePreventCustomCursorStatusAction:yi})(({updatePreventCustomCursorStatusAction:e})=>{const[t,a]=i.exports.useState(null),[n,o]=i.exports.useState(null),r=t=>{e(!0)},l=t=>{e(!1)},c=e=>{e.target.classList.contains("DropDownMenuTab")||e.target.classList.contains("DropDownMenuContentOption")||(a(null),document.removeEventListener(Li.MOUSE_DOWN,c))},u=(t,i)=>()=>{i||(t&&t(),a(null),e(!1),document.removeEventListener(Li.MOUSE_DOWN,c))},h=(e,i)=>{return d("div",{className:(n=i,y("DropDownMenuTab",{active:n===t})),onClick:e=>((e,i)=>{null===t&&document.addEventListener(Li.MOUSE_DOWN,c),t===e?(a(null),o(null)):(a(e),o({x:i.target.offsetLeft,y:35}))})(i,e),onMouseEnter:e=>((e,i)=>{null!==t&&t!==e&&(a(e),o({x:i.target.offsetLeft,y:35}))})(i,e),children:[s("img",{draggable:!1,src:e.imageSrc,alt:e.imageAlt}),e.name]},i);var n};return s("div",{className:"DropDownMenuWrapper",children:d(p,{children:[Jr.map((e,t)=>h(e,t)),(e=>{if(null!==t){const t={top:35,left:n.x,height:40*e.children.length+10};return s("div",{className:"DropDownMenuContent",style:t,onMouseEnter:r,onMouseLeave:l,children:e.children.map((e,t)=>{return d("div",{className:(i=e.disabled,y("DropDownMenuContentOption",{active:!i})),onClick:u(e.onClick,e.disabled),children:[s("div",{className:"Marker"}),s("img",{src:e.imageSrc,alt:e.imageAlt}),e.name]},t);var i})})}return null})(Jr[t])]})})}),Qr=Ve(e=>({projectData:e.general.projectData}),{updateActivePopupTypeAction:Ti,updateProjectDataAction:Ai})(e=>d("div",{className:"TopNavigationBar",children:[s(Zr,{}),d("div",{className:"TopNavigationBarWrapper",children:[s("div",{className:"NavigationBarGroupWrapper",children:d("div",{className:"Header",onClick:()=>e.updateActivePopupTypeAction(We.EXIT_PROJECT),children:[s("img",{draggable:!1,alt:"make-sense",src:"/make-sense-ico-transparent.png"}),"Make Sense"]})}),s("div",{className:"NavigationBarGroupWrapper",children:s($r,{})}),d("div",{className:"NavigationBarGroupWrapper middle",children:[s("div",{className:"ProjectName",children:"Project Name:"}),s(qr,{isPassword:!1,value:e.projectData.name,onChange:t=>{const i=t.target.value.toLowerCase().replace(" ","-");e.updateProjectDataAction({...e.projectData,name:i})},onFocus:e=>{e.target.setSelectionRange(0,e.target.value.length)}})]}),s("div",{className:"NavigationBarGroupWrapper",children:s(Er,{image:"ico/github-logo.png",imageAlt:"github-logo.png",buttonSize:{width:30,height:30},href:Ke.GITHUB_URL})})]})]})),es=Ve(e=>({activePopupType:e.general.activePopupType}))(({activePopupType:e})=>d("div",{className:y("EditorView",{withPopup:!!e}),draggable:!1,children:[s(Qr,{}),s(Yr,{})]})),ts=e=>{const{key:t,label:i,onClick:a,style:n,isActive:o,isDisabled:r,externalClassName:l}=e;return s("div",{className:y("TextButton",l,{active:o,disabled:r}),onClick:e=>{e.stopPropagation(),a&&a()},style:n,children:i},t)},is=[{displayName:"Github",imageSrc:"/ico/github-logo.png",imageAlt:"GitHub",href:Ke.GITHUB_URL,tooltipMessage:"Show us some love  on GitHub"},{displayName:"Medium",imageSrc:"/ico/medium-logo.png",imageAlt:"Medium",href:Ke.MEDIUM_URL,tooltipMessage:"Read our AI content on Medium"},{displayName:"YouTube",imageSrc:"/ico/youtube-logo.png",imageAlt:"YouTube",href:Ke.YOUTUBE_URL,tooltipMessage:"Watch our AI tutorials on YouTube"},{displayName:"Twitch",imageSrc:"/ico/twitch-logo.png",imageAlt:"Twitch",href:Ke.TWITCH_URL,tooltipMessage:"Fight along with us in Kaggle competitions on Twitch"}],as=[{displayText:"Open source and free to use under GPLv3 license",imageSrc:"ico/open-source.png",imageAlt:"open-source"},{displayText:"No advanced installation required, just open up your browser",imageSrc:"ico/online.png",imageAlt:"online"},{displayText:"We don't store your images, because we don't send them anywhere",imageSrc:"ico/private.png",imageAlt:"private"},{displayText:"Support multiple label types - rects, lines, points and polygons",imageSrc:"ico/labels.png",imageAlt:"labels"},{displayText:"Support output file formats like YOLO, VOC XML, VGG JSON, CSV",imageSrc:"ico/file.png",imageAlt:"file"},{displayText:"Use AI to make your work more productive",imageSrc:"ico/robot.png",imageAlt:"robot"}];function ns(e,t,i,a){return new(i||(i=Promise))(function(n,o){function r(e){try{l(a.next(e))}catch(t){o(t)}}function s(e){try{l(a.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((a=a.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const os=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function rs(e,t,i){const a=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const i=t.split(".").pop().toLowerCase(),a=os.get(i);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:n}=e,o="string"==typeof t?t:"string"==typeof n&&n.length>0?n:`./${e.name}`;return"string"!=typeof a.path&&ss(a,"path",o),void 0!==i&&Object.defineProperty(a,"handle",{value:i,writable:!1,configurable:!1,enumerable:!0}),ss(a,"relativePath",o),a}function ss(e,t,i){Object.defineProperty(e,t,{value:i,writable:!1,configurable:!1,enumerable:!0})}const ls=[".DS_Store","Thumbs.db"];function cs(e){return"object"==typeof e&&null!==e}function ds(e){return e.filter(e=>-1===ls.indexOf(e.name))}function ps(e){if(null===e)return[];const t=[];for(let i=0;i<e.length;i++){const a=e[i];t.push(a)}return t}function us(e){if("function"!=typeof e.webkitGetAsEntry)return ms(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?gs(t):ms(e,t)}function hs(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?hs(t):[t]],[])}function ms(e,t){return ns(this,void 0,void 0,function*(){var i;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,rs(e)}}const a=e.getAsFile();if(!a)throw new Error(`${e} is not a File`);return rs(a,null!==(i=null==t?void 0:t.fullPath)&&void 0!==i?i:void 0)})}function fs(e){return ns(this,void 0,void 0,function*(){return e.isDirectory?gs(e):function(e){return ns(this,void 0,void 0,function*(){return new Promise((t,i)=>{e.file(i=>{const a=rs(i,e.fullPath);t(a)},e=>{i(e)})})})}(e)})}function gs(e){const t=e.createReader();return new Promise((e,i)=>{const a=[];!function n(){t.readEntries(t=>ns(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(fs));a.push(e),n()}else try{const t=yield Promise.all(a);e(t)}catch(o){i(o)}}),e=>{i(e)})}()})}var bs=function(e,t){if(e&&t){var i=Array.isArray(t)?t:t.split(",");if(0===i.length)return!0;var a=e.name||"",n=(e.type||"").toLowerCase(),o=n.replace(/\/.*$/,"");return i.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?a.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):n===t})}return!0};function vs(e){return function(e){if(Array.isArray(e))return xs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ws(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ts(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function Ss(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(i),!0).forEach(function(t){ys(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ts(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function ys(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function As(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var a,n,o=[],r=!0,s=!1;try{for(i=i.call(e);!(r=(a=i.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(l){s=!0,n=l}finally{try{r||null==i.return||i.return()}finally{if(s)throw n}}return o}(e,t)||ws(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){if(e){if("string"==typeof e)return xs(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?xs(e,t):void 0}}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var Es=bs,Ps=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},Is=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Cs=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},Os={code:"too-many-files",message:"Too many files"};function _s(e,t){var i="application/x-moz-file"===e.type||Es(e,t);return[i,i?null:Ps(t)]}function Ls(e,t,i){if(Ds(e.size))if(Ds(t)&&Ds(i)){if(e.size>i)return[!1,Is(i)];if(e.size<t)return[!1,Cs(t)]}else{if(Ds(t)&&e.size<t)return[!1,Cs(t)];if(Ds(i)&&e.size>i)return[!1,Is(i)]}return[!0,null]}function Ds(e){return null!=e}function Rs(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function Ms(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function Ns(e){e.preventDefault()}function ks(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];return t.some(function(t){return!Rs(e)&&t&&t.apply(void 0,[e].concat(a)),Rs(e)})}}function Bs(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Gs(e){return/^.*\.[\w]+$/.test(e)}var Hs=["children"],Vs=["open"],zs=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Fs=["refKey","onChange","onClick"];function Us(e){return function(e){if(Array.isArray(e))return Xs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ws(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var a,n,o=[],r=!0,s=!1;try{for(i=i.call(e);!(r=(a=i.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(l){s=!0,n=l}finally{try{r||null==i.return||i.return()}finally{if(s)throw n}}return o}(e,t)||Ws(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ws(e,t){if(e){if("string"==typeof e)return Xs(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Xs(e,t):void 0}}function Xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ks(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function Ys(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ks(Object(i),!0).forEach(function(t){Zs(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ks(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function Zs(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qs(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)i=o[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)i=o[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Js=i.exports.forwardRef(function(e,t){var a=e.children,n=el(qs(e,Hs)),o=n.open,r=qs(n,Vs);return i.exports.useImperativeHandle(t,function(){return{open:o}},[o]),s(i.exports.Fragment,{children:a(Ys(Ys({},r),{},{open:o}))})});Js.displayName="Dropzone";var $s={disabled:!1,getFilesFromEvent:function(e){return ns(this,void 0,void 0,function*(){return cs(e)&&cs(e.dataTransfer)?function(e,t){return ns(this,void 0,void 0,function*(){if(e.items){const i=ps(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return i;return ds(hs(yield Promise.all(i.map(us))))}return ds(ps(e.files).map(e=>rs(e)))})}(e.dataTransfer,e.type):function(e){return cs(e)&&cs(e.target)}(e)?function(e){return ps(e.target.files).map(e=>rs(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return ns(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>rs(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Js.defaultProps=$s,Js.propTypes={children:c.exports.func,accept:c.exports.objectOf(c.exports.arrayOf(c.exports.string)),multiple:c.exports.bool,preventDropOnDocument:c.exports.bool,noClick:c.exports.bool,noKeyboard:c.exports.bool,noDrag:c.exports.bool,noDragEventsBubbling:c.exports.bool,minSize:c.exports.number,maxSize:c.exports.number,maxFiles:c.exports.number,disabled:c.exports.bool,getFilesFromEvent:c.exports.func,onFileDialogCancel:c.exports.func,onFileDialogOpen:c.exports.func,useFsAccessApi:c.exports.bool,autoFocus:c.exports.bool,onDragEnter:c.exports.func,onDragLeave:c.exports.func,onDragOver:c.exports.func,onDrop:c.exports.func,onDropAccepted:c.exports.func,onDropRejected:c.exports.func,onError:c.exports.func,validator:c.exports.func};var Qs={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function el(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ys(Ys({},$s),e),a=t.accept,n=t.disabled,o=t.getFilesFromEvent,r=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,p=t.onDragLeave,u=t.onDragOver,h=t.onDrop,m=t.onDropAccepted,f=t.onDropRejected,g=t.onFileDialogCancel,b=t.onFileDialogOpen,v=t.useFsAccessApi,T=t.autoFocus,S=t.preventDropOnDocument,y=t.noClick,A=t.noKeyboard,w=t.noDrag,x=t.noDragEventsBubbling,E=t.onError,P=t.validator,I=i.exports.useMemo(function(){return function(e){if(Ds(e))return Object.entries(e).reduce(function(e,t){var i=As(t,2),a=i[0],n=i[1];return[].concat(vs(e),[a],vs(n))},[]).filter(function(e){return Bs(e)||Gs(e)}).join(",")}(a)},[a]),C=i.exports.useMemo(function(){return function(e){return Ds(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=As(e,2),i=t[0],a=t[1],n=!0;return Bs(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),n=!1),Array.isArray(a)&&a.every(Gs)||(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),n=!1),n}).reduce(function(e,t){var i=As(t,2),a=i[0],n=i[1];return Ss(Ss({},e),{},ys({},a,n))},{})}]:e}(a)},[a]),O=i.exports.useMemo(function(){return"function"==typeof b?b:il},[b]),_=i.exports.useMemo(function(){return"function"==typeof g?g:il},[g]),L=i.exports.useRef(null),D=i.exports.useRef(null),R=js(i.exports.useReducer(tl,Qs),2),M=R[0],N=R[1],k=M.isFocused,B=M.isFileDialogActive,G=i.exports.useRef("undefined"!=typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),H=function(){!G.current&&B&&setTimeout(function(){D.current&&(D.current.files.length||(N({type:"closeDialog"}),_()))},300)};i.exports.useEffect(function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}},[D,B,_,G]);var V=i.exports.useRef([]),z=function(e){L.current&&L.current.contains(e.target)||(e.preventDefault(),V.current=[])};i.exports.useEffect(function(){return S&&(document.addEventListener("dragover",Ns,!1),document.addEventListener("drop",z,!1)),function(){S&&(document.removeEventListener("dragover",Ns),document.removeEventListener("drop",z))}},[L,S]),i.exports.useEffect(function(){return!n&&T&&L.current&&L.current.focus(),function(){}},[L,T,n]);var F=i.exports.useCallback(function(e){E?E(e):console.error(e)},[E]),U=i.exports.useCallback(function(e){e.preventDefault(),e.persist(),ie(e),V.current=[].concat(Us(V.current),[e.target]),Ms(e)&&Promise.resolve(o(e)).then(function(t){if(!Rs(e)||x){var i=t.length,a=i>0&&function(e){var t=e.files,i=e.accept,a=e.minSize,n=e.maxSize,o=e.multiple,r=e.maxFiles,s=e.validator;return!(!o&&t.length>1||o&&r>=1&&t.length>r)&&t.every(function(e){var t=As(_s(e,i),1)[0],o=As(Ls(e,a,n),1)[0],r=s?s(e):null;return t&&o&&!r})}({files:t,accept:I,minSize:s,maxSize:r,multiple:l,maxFiles:c,validator:P});N({isDragAccept:a,isDragReject:i>0&&!a,isDragActive:!0,type:"setDraggedFiles"}),d&&d(e)}}).catch(function(e){return F(e)})},[o,d,F,x,I,s,r,l,c,P]),j=i.exports.useCallback(function(e){e.preventDefault(),e.persist(),ie(e);var t=Ms(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(i){}return t&&u&&u(e),!1},[u,x]),W=i.exports.useCallback(function(e){e.preventDefault(),e.persist(),ie(e);var t=V.current.filter(function(e){return L.current&&L.current.contains(e)}),i=t.indexOf(e.target);-1!==i&&t.splice(i,1),V.current=t,t.length>0||(N({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ms(e)&&p&&p(e))},[L,p,x]),X=i.exports.useCallback(function(e,t){var i=[],a=[];e.forEach(function(e){var t=js(_s(e,I),2),n=t[0],o=t[1],l=js(Ls(e,s,r),2),c=l[0],d=l[1],p=P?P(e):null;if(n&&c&&!p)i.push(e);else{var u=[o,d];p&&(u=u.concat(p)),a.push({file:e,errors:u.filter(function(e){return e})})}}),(!l&&i.length>1||l&&c>=1&&i.length>c)&&(i.forEach(function(e){a.push({file:e,errors:[Os]})}),i.splice(0)),N({acceptedFiles:i,fileRejections:a,isDragReject:a.length>0,type:"setFiles"}),h&&h(i,a,t),a.length>0&&f&&f(a,t),i.length>0&&m&&m(i,t)},[N,l,I,s,r,c,h,m,f,P]),K=i.exports.useCallback(function(e){e.preventDefault(),e.persist(),ie(e),V.current=[],Ms(e)&&Promise.resolve(o(e)).then(function(t){Rs(e)&&!x||X(t,e)}).catch(function(e){return F(e)}),N({type:"reset"})},[o,X,F,x]),Y=i.exports.useCallback(function(){if(G.current){N({type:"openDialog"}),O();var e={multiple:l,types:C};window.showOpenFilePicker(e).then(function(e){return o(e)}).then(function(e){X(e,null),N({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(_(e),N({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?F(e):(G.current=!1,D.current?(D.current.value=null,D.current.click()):F(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else D.current&&(N({type:"openDialog"}),O(),D.current.value=null,D.current.click())},[N,O,_,v,X,F,C,l]),Z=i.exports.useCallback(function(e){L.current&&L.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Y()))},[L,Y]),q=i.exports.useCallback(function(){N({type:"focus"})},[]),J=i.exports.useCallback(function(){N({type:"blur"})},[]),$=i.exports.useCallback(function(){y||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?Y():setTimeout(Y,0))},[y,Y]),Q=function(e){return n?null:e},ee=function(e){return A?null:Q(e)},te=function(e){return w?null:Q(e)},ie=function(e){x&&e.stopPropagation()},ae=i.exports.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=void 0===t?"ref":t,a=e.role,o=e.onKeyDown,r=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,d=e.onDragOver,p=e.onDragLeave,u=e.onDrop,h=qs(e,zs);return Ys(Ys(Zs({onKeyDown:ee(ks(o,Z)),onFocus:ee(ks(r,q)),onBlur:ee(ks(s,J)),onClick:Q(ks(l,$)),onDragEnter:te(ks(c,U)),onDragOver:te(ks(d,j)),onDragLeave:te(ks(p,W)),onDrop:te(ks(u,K)),role:"string"==typeof a&&""!==a?a:"presentation"},i,L),n||A?{}:{tabIndex:0}),h)}},[L,Z,q,J,$,U,j,W,K,A,w,n]),ne=i.exports.useCallback(function(e){e.stopPropagation()},[]),oe=i.exports.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=void 0===t?"ref":t,a=e.onChange,n=e.onClick,o=qs(e,Fs);return Ys(Ys({},Zs({accept:I,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(ks(a,K)),onClick:Q(ks(n,ne)),tabIndex:-1},i,D)),o)}},[D,a,l,K,n]);return Ys(Ys({},M),{},{isFocused:k&&!n,getRootProps:ae,getInputProps:oe,rootRef:L,inputRef:D,open:Q(Y)})}function tl(e,t){switch(t.type){case"focus":return Ys(Ys({},e),{},{isFocused:!0});case"blur":return Ys(Ys({},e),{},{isFocused:!1});case"openDialog":return Ys(Ys({},Qs),{},{isFileDialogActive:!0});case"closeDialog":return Ys(Ys({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ys(Ys({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Ys(Ys({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Ys({},Qs);default:return e}}function il(){}class al{static createImageDataFromFileData(e){return{id:Xi(),fileData:e,loadStatus:!1,labelRects:[],labelPoints:[],labelLines:[],labelPolygons:[],labelNameIds:[],isVisitedByYOLOObjectDetector:!1,isVisitedBySSDObjectDetector:!1,isVisitedByPoseDetector:!1,isVisitedByRoboflowAPI:!1,isVisitedByObjectDetector:!1}}static cleanAnnotations(e){return{...e,labelRects:[],labelPoints:[],labelLines:[],labelPolygons:[],labelNameIds:[]}}static arrange(e,t){return e.sort((e,i)=>t.indexOf(e.id)-t.indexOf(i.id))}static loadMissingImages(e){return new Promise((t,i)=>{const a=e.filter(e=>!e.loadStatus),n=a.map(e=>e.fileData);hi.loadImages(n).then(e=>{ti.storeImages(a.map(e=>e.id),e),t()}).catch(e=>i(e))})}}const nl=Ve(e=>({projectData:e.general.projectData}),{updateActiveImageIndexAction:ai,addImageDataAction:ci,updateProjectDataAction:Ai,updateActivePopupTypeAction:Ti})(e=>{const{acceptedFiles:t,getRootProps:i,getInputProps:a}=el({accept:{"image/*":[".jpeg",".png"]}}),n=i=>{if(t.length>0){const a=S.exports.sortBy(t,e=>e.name);e.updateProjectDataAction({...e.projectData,type:i}),e.updateActiveImageIndexAction(0),e.addImageDataAction(a.map(e=>al.createImageDataFromFileData(e))),e.updateActivePopupTypeAction(We.INSERT_LABEL_NAMES)}};return d("div",{className:"ImagesDropZone",children:[s("div",{...i({className:"DropZone"}),children:0===t.length?d(p,{children:[s("input",{...a()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Drop images"}),s("p",{children:"or"}),s("p",{className:"extraBold",children:"Click here to select them"})]}):1===t.length?d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),s("p",{className:"extraBold",children:"1 image loaded"})]}):d(p,{children:[s("input",{...a()}),s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"},1),d("p",{className:"extraBold",children:[t.length," images loaded"]},2)]})}),d("div",{className:"DropZoneButtons",children:[s(ts,{label:"Object Detection",isDisabled:!t.length,onClick:()=>n(aa.OBJECT_DETECTION)}),s(ts,{label:"Image recognition",isDisabled:!t.length,onClick:()=>n(aa.IMAGE_RECOGNITION)})]})]})}),ol=()=>{const[e,t]=i.exports.useState(!1),[a,n]=i.exports.useState(!1),o=u(({className:e,...t})=>s(h,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${m.tooltip}`]:{backgroundColor:"#171717",color:"#ffffff",boxShadow:e.shadows[1],fontSize:11,maxWidth:120}}));return d("div",{className:y("MainView",{InProgress:e,Canceled:!e&&a}),children:[s("div",{className:"Slider",id:"lower",children:s("div",{className:"TriangleVertical",children:s("div",{className:"TriangleVerticalContent"})})}),s("div",{className:"Slider",id:"upper",children:s("div",{className:"TriangleVertical",children:s("div",{className:"TriangleVerticalContent"})})}),d("div",{className:"LeftColumn",children:[s("div",{className:"LogoWrapper",children:s("img",{draggable:!1,alt:"main-logo",src:"ico/main-image-color.png"})}),s("div",{className:"EditorFeaturesWrapper",children:as.map(e=>s("div",{className:"EditorFeaturesTiles",children:d("div",{className:"EditorFeaturesTilesWrapper",children:[s("img",{draggable:!1,alt:e.imageAlt,src:e.imageSrc}),s("div",{className:"EditorFeatureLabel",children:e.displayText})]})},e.displayText))}),s("div",{className:"TriangleVertical",children:s("div",{className:"TriangleVerticalContent"})}),e&&s(ts,{label:"Go Back",onClick:()=>{t(!1),n(!0)}})]}),d("div",{className:"RightColumn",children:[s("div",{}),s(nl,{}),s("div",{className:"SocialMediaWrapper",children:(r={width:30,height:30},is.map((e,t)=>s(o,{disableFocusListener:!0,title:e.tooltipMessage,TransitionComponent:f,TransitionProps:{timeout:600},placement:"left",children:s("div",{children:s(Er,{buttonSize:r,image:e.imageSrc,imageAlt:e.imageAlt,href:e.href})})},t)))}),!e&&s(ts,{label:"Get Started",onClick:()=>{t(!0)},externalClassName:"get-started-button"})]})]});var r},rl=({title:e,renderContent:t,acceptLabel:a,onAccept:n,skipAcceptButton:o,disableAcceptButton:r,rejectLabel:l,onReject:c,skipRejectButton:p,disableRejectButton:u})=>{const[h,m]=i.exports.useState(!1);return i.exports.useEffect(()=>{h||(yr.switchCtx(vi.POPUP),m(!0))},[h]),d("div",{className:"GenericYesNoPopup",children:[s("div",{className:"Header",children:e}),s("div",{className:"Content",children:t()}),d("div",{className:"Footer",children:[!p&&s(ts,{label:l||"NO, THANKS",onClick:c,externalClassName:"reject",isDisabled:u}),!o&&s(ts,{label:a||"YES",onClick:n,externalClassName:"accept",isDisabled:r})]})]})};class sl extends Error{constructor(e){super(e),this.name="YOLOAnnotationsLoadingError"}}class ll extends sl{constructor(){super("For YOLO labels to be loaded correctly, labels.txt file is required"),this.name="NoLabelNamesFileProvidedError"}}class cl extends sl{constructor(){super("Label names listed in labels.txt file should be unique"),this.name="LabelNamesNotUniqueError"}}class dl extends sl{constructor(e){super(`Unexpected error occurred during parsing of ${e} annotations file`),this.name="AnnotationsParsingError"}}class pl{static parseLabelsNamesFromString(e){const t=e.split(/[\r\n]/).filter(Boolean).map(e=>e.replace(/\s/g,""));if(S.exports.uniq(t).length!==t.length)throw new cl;return t.map(e=>Ki.createLabelName(e))}static loadLabelsList(e,t,i){const a=new FileReader;a.onloadend=e=>{try{const i=e.target.result,a=pl.parseLabelsNamesFromString(i);t(a)}catch(a){i(a)}},a.readAsText(e)}static parseYOLOAnnotationsFromString(e,t,i,a){return e.split(/[\r\n]/).filter(Boolean).map(e=>pl.parseYOLOAnnotationFromString(e,t,i,a))}static parseYOLOAnnotationFromString(e,t,i,a){const n=e.split(" ");if(!pl.validateYOLOAnnotationComponents(n,t.length))throw new dl(a);const o=t[parseInt(n[0])].id,r=parseFloat(n[1]),s=parseFloat(n[2]),l=parseFloat(n[3]),c=parseFloat(n[4]),d={x:(r-l/2)*i.width,y:(s-c/2)*i.height,width:l*i.width,height:c*i.height};return Ki.createLabelRect(o,d)}static validateYOLOAnnotationComponents(e,t){const i=e=>{const t=Number(e);return!isNaN(t)&&0<=t&&t<=1};return[5===e.length,(e=>{const i=parseInt(e);return!isNaN(i)&&0<=i&&i<t})(e[0]),i(e[1]),i(e[2]),i(e[3]),i(e[4])].every(Boolean)}}const ul=Ve(e=>({}),{updateActivePopupTypeAction:Ti,updateLabelNamesAction:pi,submitNewNotificationAction:Ta})(({updateActivePopupTypeAction:e,updateLabelNamesAction:t,submitNewNotificationAction:a})=>{const[n,o]=i.exports.useState([]),[r,l]=i.exports.useState(!1),c=e=>{o(e),l(!1)},u=e=>{l(!0),e instanceof cl&&a(ya.createErrorNotification(wa[Aa.NON_UNIQUE_LABEL_NAMES_ERROR]))},{acceptedFiles:h,getRootProps:m,getInputProps:f}=el({accept:{"text/plain":[".txt"]},multiple:!1,onDrop:e=>{1===e.length&&pl.loadLabelsList(e[0],c,u)}});return s(rl,{title:"Load file with labels description",renderContent:()=>d("div",{className:"LoadLabelsPopupContent",children:[s("div",{className:"Message",children:"Load a text file with a list of labels you are planning to use. The names of each label should be separated by new line. If you don't have a prepared file, no problem. You can create your own list now."}),s("div",{...m({className:"DropZone"}),children:r?d(p,{children:[s("input",{...f()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Loading of labels file was unsuccessful"}),s("p",{className:"extraBold",children:"Try again"})]}):0===h.length?d(p,{children:[s("input",{...f()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Drop labels file"}),s("p",{children:"or"}),s("p",{className:"extraBold",children:"Click here to select it"})]}):1===n.length?d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),s("p",{className:"extraBold",children:"only 1 label found"})]}):d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),d("p",{className:"extraBold",children:[n.length," labels found"]})]})})]}),acceptLabel:"Start project",onAccept:()=>{n.length>0&&(t(n),e(null))},disableAcceptButton:0===n.length,rejectLabel:"Back",onReject:()=>{e(We.INSERT_LABEL_NAMES)}})}),hl=({color:e,onClick:t})=>s("div",{className:"ColorSelectorView",style:{backgroundColor:e},onClick:t,children:s("img",{draggable:!1,alt:"refresh",src:"ico/refresh.png"})}),ml=g(b)({"& .MuiInputBase-root":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:hover:before":{borderBottomColor:"white"},"& label.Mui-focused":{color:Ke.SECONDARY_COLOR},"& .MuiInput-underline:after":{borderBottomColor:Ke.SECONDARY_COLOR}}),fl=Ve(e=>({projectType:e.general.projectData.type,enablePerClassColoration:e.general.enablePerClassColoration}),{updateActivePopupTypeAction:Ti,updateLabelNamesAction:pi,updatePerClassColorationStatusAction:function(e){return{type:ii.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS,payload:{enablePerClassColoration:e}}},submitNewNotificationAction:Ta})(({updateActivePopupTypeAction:e,updateLabelNamesAction:t,updatePerClassColorationStatusAction:a,submitNewNotificationAction:n,isUpdate:o,projectType:r,enablePerClassColoration:l})=>{const[c,p]=i.exports.useState(_i.getLabelNames()),u=e=>()=>{0===S.exports.filter(c,e=>""===e.name).length?S.exports.uniq(c.map(e=>e.name)).length===c.length?e():n(ya.createErrorNotification(wa[Aa.NON_UNIQUE_LABEL_NAMES_ERROR])):n(ya.createErrorNotification(wa[Aa.EMPTY_LABEL_NAME_ERROR]))},h=()=>{const e=[...c,Ki.createLabelName("")];p(e)},m=()=>u(h)(),f=()=>{a(!l)},g=e=>{"Enter"===e.key&&m()},b=c.map(e=>d("div",{className:"LabelEntry",children:[s(ml,{variant:"standard",id:"key",autoComplete:"off",autoFocus:!0,type:"text",margin:"dense",label:"Insert label",onKeyUp:g,value:e.name,onChange:t=>((e,t)=>{const i=c.map(i=>i.id===e?{...i,name:t}:i);p(i)})(e.id,t.target.value),style:{width:280},InputLabelProps:{shrink:!0}}),r===aa.OBJECT_DETECTION&&l&&s(hl,{color:e.color,onClick:()=>(e=>{const t=c.map(t=>t.id===e?{...t,color:S.exports.sample(Ke.LABEL_COLORS_PALETTE)}:t);p(t)})(e.id)}),s(Er,{image:"ico/trash.png",imageAlt:"remove_label",buttonSize:{width:30,height:30},onClick:()=>(e=>{const t=S.exports.reject(c,{id:e});p(t)})(e.id)})]},e.id)),v=()=>{const i=S.exports.reject(c,e=>0===e.name.length);c.length>0&&t(i),e(null)},T=()=>{const i=S.exports.reject(c,e=>0===e.name.length),a=Ki.labelNamesIdsDiff(_i.getLabelNames(),i);ga.removeLabelNames(a),t(i),e(null)};return s(rl,{title:o?"Edit labels":"Create labels",renderContent:()=>d("div",{className:"InsertLabelNamesPopup",children:[d("div",{className:"LeftContainer",children:[s(Er,{image:"ico/plus.png",imageAlt:"plus",buttonSize:{width:40,height:40},padding:25,onClick:m,externalClassName:"monochrome"}),c.length>0&&s(Er,{image:l?"ico/colors-on.png":"ico/colors-off.png",imageAlt:"per-class-coloration",buttonSize:{width:40,height:40},padding:15,onClick:f,isActive:l,externalClassName:l?"":"monochrome"})]}),d("div",{className:"RightContainer",children:[s("div",{className:"Message",children:o?"You can now edit the label names you use to describe the objects in the photos. Use the + button to add a new empty text field.":"Before you start, you can create a list of labels you plan to assign to objects in your project. You can also choose to skip that part for now and define label names as you go."}),s("div",{className:"LabelsContainer",children:0!==Object.keys(c).length?s(zt,{children:s("div",{className:"InsertLabelNamesPopupContent",children:b})}):d("div",{className:"EmptyList",onClick:h,children:[s("img",{draggable:!1,alt:"upload",src:"ico/type-writer.png"}),s("p",{className:"extraBold",children:"Your label list is empty"})]})})]})]}),acceptLabel:o?"Accept":"Start project",onAccept:o?()=>u(T)():()=>u(v)(),rejectLabel:o?"Cancel":"Load labels from file",onReject:o?()=>{e(null)}:()=>{e(We.LOAD_LABEL_NAMES)}})}),gl=Ve(e=>({}),{updateActiveLabelNameId:ni,updateLabelNames:pi,updateProjectData:Ai,updateActiveImageIndex:ai,updateImageData:di,updateFirstLabelCreatedFlag:ui})(({updateActiveLabelNameId:e,updateLabelNames:t,updateActiveImageIndex:i,updateImageData:a,updateFirstLabelCreatedFlag:n,updateProjectData:o})=>s(rl,{title:"Exit project",renderContent:()=>s("div",{className:"ExitProjectPopupContent",children:s("div",{className:"Message",children:"Are you sure you want to leave the editor? You will permanently lose all your progress."})}),acceptLabel:"Exit",onAccept:()=>{e(null),t([]),o({type:null,name:"my-project-name"}),i(null),a([]),n(!1),vr.close()},rejectLabel:"Back",onReject:()=>{vr.close()}})),bl=Ve(e=>({}),{addImageData:ci})(({addImageData:e})=>{const{acceptedFiles:t,getRootProps:i,getInputProps:a}=el({accept:{"image/*":[".jpeg",".png"]}});return s(rl,{title:"Load more images",renderContent:()=>s("div",{className:"LoadMoreImagesPopupContent",children:s("div",{...i({className:"DropZone"}),children:0===t.length?d(p,{children:[s("input",{...a()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Add new images"}),s("p",{children:"or"}),s("p",{className:"extraBold",children:"Click here to select them"})]}):1===t.length?d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),s("p",{className:"extraBold",children:"1 new image loaded"})]}):d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"},1),d("p",{className:"extraBold",children:[t.length," new images loaded"]},2)]})})}),acceptLabel:"Load",disableAcceptButton:t.length<1,onAccept:()=>{t.length>0&&(e(t.map(e=>al.createImageDataFromFileData(e))),vr.close())},rejectLabel:"Cancel",onReject:()=>{vr.close()}})}),vl=Ve(e=>({}),{updateLabelNames:pi,updateSuggestedLabelList:ba,updateRejectedSuggestedLabelList:function(e){return{type:ii.UPDATE_REJECTED_SUGGESTED_LABEL_LIST,payload:{labelList:e}}}})(({updateLabelNames:e,updateSuggestedLabelList:t,updateRejectedSuggestedLabelList:a})=>{const[n,o]=i.exports.useState(!1),[r,l]=i.exports.useState(mi.getSuggestedLabelList().map(e=>({name:e,flag:!1})));i.exports.useEffect(()=>{const e=e=>{"Enter"===e.key?c():"a"!==e.key&&"A"!==e.key||(n?u():p())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)});const c=()=>{e(h().reduce((e,t,i)=>(e.push({name:t,id:Xi(),color:hr.getByInfiniteIndex(Ke.LABEL_COLORS_PALETTE,i)}),e),_i.getLabelNames())),a(mi.getRejectedSuggestedLabelList().concat(m())),t([]),vr.close()},p=()=>{o(!0),l(r.map(e=>({...e,flag:!0})))},u=()=>{o(!1),l(r.map(e=>({...e,flag:!1})))},h=()=>r.reduce((e,t)=>(t.flag&&e.push(t.name),e),[]),m=()=>r.reduce((e,t)=>(t.flag||e.push(t.name),e),[]),f=()=>r.map(e=>e.name),g=()=>r.map((e,t)=>d("div",{className:"OptionsItem",onClick:()=>(e=>{const t=r.map((t,i)=>e===i?{...t,flag:!t.flag}:t);l(t);const i=t.reduce((e,t)=>e&&t.flag,!0);o(i)})(t),children:[e.flag?s("img",{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}):s("img",{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),e.name]},t));return s(rl,{title:"New classes found",renderContent:()=>d("div",{className:"SuggestLabelNamesPopupContent",children:[s("div",{className:"Message",children:"We found objects of classes that are not yet included in the list of labels. Select the names you would like to add. This will help to speed up the labeling process."}),s("div",{className:"AllToggle",children:d("div",{className:"OptionsItem",onClick:()=>n?u():p(),children:[s("img",n?{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}:{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),n?"Deselect all":"Select all"]})}),s("div",{className:"LabelNamesContainer",children:s(zt,{autoHeight:!0,children:s("div",{className:"LabelNamesContent",children:g()})})})]}),acceptLabel:"Accept",onAccept:c,rejectLabel:"Reject",onReject:()=>{a(mi.getRejectedSuggestedLabelList().concat(f())),t([]),vr.close()}})}),Tl=Ve(e=>({projectType:e.general.projectData.type}),{})(({title:e,activeLabelType:t,projectType:a,onLabelTypeChange:n,acceptLabel:o,onAccept:r,skipAcceptButton:l,disableAcceptButton:c,rejectLabel:p,onReject:u,renderInternalContent:h})=>{const[m,f]=i.exports.useState(t);return s(rl,{title:e,renderContent:()=>d("div",{className:"GenericLabelTypePopupContent",children:[s("div",{className:"LeftContainer",children:xr.filter(e=>e.projectType===a).map(e=>s(Er,{image:e.imageSrc,imageAlt:e.imageAlt,buttonSize:{width:40,height:40},padding:20,onClick:()=>{f(e.labelType),n(e.labelType)},isActive:m===e.labelType},e.labelType))}),s("div",{className:"RightContainer",children:h(m)})]}),acceptLabel:o,onAccept:()=>r(m),skipAcceptButton:l,disableAcceptButton:c,rejectLabel:p,onReject:()=>u(m)})});var Sl=(e=>(e.YOLO="YOLO",e.COCO="COCO",e.CSV="CSV",e.JSON="JSON",e.VOC="VOC",e.VGG="VGG",e))(Sl||{});const yl={[Ye.RECT]:[{type:Sl.COCO,label:"Single file in COCO JSON format."},{type:Sl.YOLO,label:"Multiple files in YOLO format along with labels names definition - labels.txt file."},{type:Sl.VOC,label:"Multiple files in VOC XML format."}],[Ye.POINT]:[],[Ye.LINE]:[],[Ye.POLYGON]:[{type:Sl.COCO,label:"Single file in COCO JSON format."}],[Ye.IMAGE_RECOGNITION]:[]},Al=()=>d("div",{className:"FeatureInProgress",children:[s("img",{draggable:!1,alt:"take_off",src:"ico/take-off.png"}),d("p",{className:"extraBold",children:["new feature ",s("br",{})," coming soon..."]})]});class wl extends Error{constructor(e){super(e),this.name="COCOAnnotationsLoadingError"}}class xl extends wl{constructor(e){super(e),this.name="COCOFormatValidationError"}}class El extends wl{constructor(){super("Unexpected error occurred during reading annotations from file"),this.name="COCOAnnotationReadingError"}}class Pl extends wl{constructor(){super("COCO annotation file need to be in JSON format"),this.name="COCOAnnotationDeserializationError"}}class Il extends wl{constructor(){super("COCO annotation requires single file but multiple were given"),this.name="COCOAnnotationFileCountError"}}class Cl{constructor(e){t(this,"labelType"),this.labelType=e}import(e,t,i){throw new Error("Method not implemented.")}}class Ol{static bbox2rect(e){return{x:e[0],y:e[1],width:e[2],height:e[3]}}static segmentation2vertices(e){return e.map(e=>S.exports.chunk(e,2).map(e=>({x:e[0],y:e[1]})))}}const _l=class extends Cl{import(e,t,i){e.length>1&&i(new Il);const a=new FileReader;a.readAsText(e[0]),a.onloadend=e=>{try{const i=_i.getImagesData(),a=_l.deserialize(e.target.result),{imagesData:n,labelNames:o}=this.applyLabels(i,a);t(n,o)}catch(a){i(a)}},a.onerror=()=>i(new El)}static deserialize(e){try{return JSON.parse(e)}catch(t){throw new Pl}}applyLabels(e,t){_l.validateCocoFormat(t);const{images:i,categories:a,annotations:n}=t,o=_l.mapCOCOCategories(a),r=e.map(e=>al.cleanAnnotations(e)),s=_l.partitionImageData(r,i),l=_l.mapImageData(s.pass,i);for(const d of n)if(l[d.image_id]&&1!==d.iscrowd&&(this.labelType.includes(Ye.RECT)&&l[d.image_id].labelRects.push(Ki.createLabelRect(o[d.category_id].id,Ol.bbox2rect(d.bbox))),this.labelType.includes(Ye.POLYGON))){const e=Ol.segmentation2vertices(d.segmentation);for(const t of e)l[d.image_id].labelPolygons.push(Ki.createLabelPolygon(o[d.category_id].id,t))}const c=Object.values(l).concat(s.fail);return{imagesData:al.arrange(c,e.map(e=>e.id)),labelNames:Object.values(o)}}static partitionImageData(e,t){const i=t.map(e=>e.file_name);return hr.partition(e,e=>i.includes(e.fileData.name))}static mapCOCOCategories(e){return e.reduce((e,t,i)=>(e[t.id]={id:Xi(),name:t.name,color:hr.getByInfiniteIndex(Ke.LABEL_COLORS_PALETTE,i)},e),{})}static mapImageData(e,t){const i=t.reduce((e,t)=>(e[t.file_name]=t.id,e),{});return e.reduce((e,t)=>(e[i[t.fileData.name]]=t,e),{})}static validateCocoFormat(e){const t=_l.requiredKeys.filter(t=>!e.hasOwnProperty(t));if(0!==t.length)throw new xl(`Uploaded file does not contain all required keys: ${t}`)}};let Ll=_l;t(Ll,"requiredKeys",["images","annotations","categories"]);const Dl=class extends Cl{import(e,t,i){try{const a=_i.getImagesData().map(e=>al.cleanAnnotations(e)),{labelNameFile:n,annotationFiles:o}=Dl.filterFilesData(e,a),[r,s]=Dl.matchImagesWithAnnotations(a,o),l=hi.readFile(n).then(e=>pl.parseLabelsNamesFromString(e)),c=al.loadMissingImages(r),d=hi.readFiles(s);Promise.all([l,c,d]).then(e=>{const[i,,n]=e,o=S.exports.zip(r,n).map(e=>Dl.applyAnnotations(e[0],e[1],i));t(Dl.injectImageDataWithAnnotations(a,o),i)}).catch(e=>i(e))}catch(a){i(a)}}static filterFilesData(e,t){const i=hr.partition(e,e=>e.name===Dl.labelsFileName);if(1!==i.pass.length)throw new ll;const a=t.map(e=>e.fileData.name).map(e=>hi.extractFileName(e)),n=hr.partition(e,e=>a.includes(hi.extractFileName(e.name)));return{labelNameFile:i.pass[0],annotationFiles:n.pass}}static matchImagesWithAnnotations(e,t){return hr.unzip(hr.match(e,t,(e,t)=>hi.extractFileName(e.fileData.name)===hi.extractFileName(t.name)))}static applyAnnotations(e,t,i){const a=ti.getById(e.id);return e.labelRects=pl.parseYOLOAnnotationsFromString(t,i,{width:a.width,height:a.height},e.fileData.name),e}static injectImageDataWithAnnotations(e,t){return e.map(e=>{const i=S.exports.find(t,{id:e.id});return i||e})}};let Rl=Dl;t(Rl,"labelsFileName","labels.txt");class Ml extends Error{constructor(e){super(e),this.name="DocumentParsingError"}}class Nl extends Error{constructor(e){super(e),this.name="AnnotationAssertionError"}}const kl=new DOMParser;class Bl extends Cl{import(e,t,i){try{const a=Bl.mapImageData();this.loadAndParseFiles(e).then(e=>{for(const t of e.fileParseResults)a[t.filename]&&(a[t.filename].labelRects=t.labeledBoxes);t(Array.from(Object.values(a)),Array.from(Object.values(e.labelNames)))}).catch(e=>i(e))}catch(a){i(a)}}loadAndParseFiles(e){return Promise.all(e.map(e=>e.text())).then(t=>t.reduce((t,i,a)=>{const n=e[a].name;try{return Bl.parseDocumentIntoImageData(Bl.tryParseVOCDocument(i),t)}catch(o){throw o instanceof Ml?new Ml(`Failed trying to parse ${n} as VOC XML document.`):o instanceof Nl?new Nl(`Failed trying to find required VOC annotations for ${n}.`):o}},{labelNames:{},fileParseResults:[]}))}static tryParseVOCDocument(e){try{return kl.parseFromString(e,"application/xml")}catch{throw new Ml}}static parseDocumentIntoImageData(e,{fileParseResults:t,labelNames:i}){try{const a=e.getElementsByTagName("annotation")[0].getElementsByTagName("filename")[0].textContent,[n,o]=this.parseAnnotationsFromFileString(e,i);return{labelNames:o,fileParseResults:t.concat({filename:a,labeledBoxes:n})}}catch{throw new Nl}}static parseAnnotationsFromFileString(e,t){const i=Object.assign({},t);return[Array.from(e.getElementsByTagName("object")).map(e=>{const t=e.getElementsByTagName("name")[0].textContent,a=e.getElementsByTagName("bndbox")[0],n=parseInt(a.getElementsByTagName("xmin")[0].textContent),o=parseInt(a.getElementsByTagName("xmax")[0].textContent),r=parseInt(a.getElementsByTagName("ymin")[0].textContent),s={x:n,y:r,height:parseInt(a.getElementsByTagName("ymax")[0].textContent)-r,width:o-n};i[t]||(i[t]=Ki.createLabelName(t));const l=i[t].id;return Ki.createLabelRect(l,s)}),i]}static mapImageData(){return _i.getImagesData().reduce((e,t)=>(e[t.fileData.name]=t,e),{})}}const Gl={[Sl.COCO]:Ll,[Sl.CSV]:void 0,[Sl.JSON]:void 0,[Sl.VGG]:void 0,[Sl.VOC]:Bl,[Sl.YOLO]:Rl},Hl=Ve(e=>({activeLabelType:e.labels.activeLabelType}),{updateImageDataAction:di,updateLabelNamesAction:pi,updateActiveLabelTypeAction:si})(({activeLabelType:e,updateImageDataAction:t,updateLabelNamesAction:a,updateActiveLabelTypeAction:n})=>{const o=e=>{const t=yl[e];return 1===t.length?t[0].type:null},[r,l]=i.exports.useState(e),[c,u]=i.exports.useState(o(e)),[h,m]=i.exports.useState([]),[f,g]=i.exports.useState([]),[b,v]=i.exports.useState(null),T=(e,t)=>{m(t),g(e),v(null)},S=e=>{m([]),g([]),v(e);const t=(e=>e instanceof Ml?Aa.ANNOTATION_FILE_PARSE_ERROR:e instanceof cl?Aa.NON_UNIQUE_LABEL_NAMES_ERROR:Aa.ANNOTATION_IMPORT_ASSERTION_ERROR)(e);Ta(ya.createErrorNotification(wa[t]))},{getRootProps:y,getInputProps:A}=el({accept:{"application/json":[".json"],"text/plain":[".txt"],"application/xml":[".xml"]},multiple:!0,onDrop:e=>{new Gl[c]([r]).import(e,T,S)}}),w=e=>e.map(e=>d("div",{className:"OptionsItem",onClick:()=>{return t=e.type,void u(t);var t},children:[e.type===c?s("img",{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}):s("img",{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),e.label]},e.type));return s(Tl,{activeLabelType:r,title:`Import ${r.toLowerCase()} annotations`,onLabelTypeChange:e=>{l(e),u(o(e)),m([]),g([]),v(null)},acceptLabel:"Import",onAccept:e=>{0!==h.length&&0!==f.length&&(t(f),a(h),n(e),vr.close())},skipAcceptButton:0===yl[r].length,disableAcceptButton:0===f.length||0===h.length||!!b,rejectLabel:"Cancel",onReject:e=>{vr.close()},renderInternalContent:e=>{if(!c&&0!==yl[e].length)return d(p,{children:[s("div",{className:"Message",children:"Select file format you would like to use to import labels."}),",",s("div",{className:"Options",children:w(yl[e])})]});return 0===yl[e].length?s(Al,{}):s("div",{...y({className:"DropZone"}),children:b?d(p,{children:[s("input",{...A()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Annotation import was unsuccessful"}),b.message,s("p",{className:"extraBold",children:"Try again"})]}):0!==f.length&&0!==h.length?d(p,{children:[s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),s("p",{className:"extraBold",children:"Annotation ready for import"}),"After import you will lose all your current annotations"]}):d(p,{children:[s("input",{...A()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:`Drop ${c} annotations`}),s("p",{children:"or"}),s("p",{className:"extraBold",children:"Click here to select them"})]})})}})});var Vl={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/Vl.exports=function e(t,i,a){function n(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof _&&_;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){return n(t[r][1][e]||e)},d,d.exports,e,t,i,a)}return i[r].exports}for(var o="function"==typeof _&&_,r=0;r<a.length;r++)n(a[r]);return n}({1:[function(e,t,i){var a=e("./utils"),n=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,n,r,s,l,c,d=[],p=0,u=e.length,h=u,m="string"!==a.getTypeOf(e);p<e.length;)h=u-p,n=m?(t=e[p++],i=p<u?e[p++]:0,p<u?e[p++]:0):(t=e.charCodeAt(p++),i=p<u?e.charCodeAt(p++):0,p<u?e.charCodeAt(p++):0),r=t>>2,s=(3&t)<<4|i>>4,l=1<h?(15&i)<<2|n>>6:64,c=2<h?63&n:64,d.push(o.charAt(r)+o.charAt(s)+o.charAt(l)+o.charAt(c));return d.join("")},i.decode=function(e){var t,i,a,r,s,l,c=0,d=0,p="data:";if(e.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var u,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=n.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(r=o.indexOf(e.charAt(c++)))>>4,i=(15&r)<<4|(s=o.indexOf(e.charAt(c++)))>>2,a=(3&s)<<6|(l=o.indexOf(e.charAt(c++))),u[d++]=t,64!==s&&(u[d++]=i),64!==l&&(u[d++]=a);return u}},{"./support":30,"./utils":32}],2:[function(e,t,i){var a=e("./external"),n=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),r=e("./stream/DataLengthProbe");function s(e,t,i,a,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=a,this.compressedContent=n}s.prototype={getContentWorker:function(){var e=new n(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new n(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,i){return e.pipe(new o).pipe(new r("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new r("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){var a=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){var a=e("./utils"),n=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==a.getTypeOf(e)?function(e,t,i,a){var o=n,r=a+i;e^=-1;for(var s=a;s<r;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,i,a){var o=n,r=a+i;e^=-1;for(var s=a;s<r;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){var a=null;a="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:a}},{lie:37}],7:[function(e,t,i){var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),o=e("./utils"),r=e("./stream/GenericWorker"),s=a?"uint8array":"array";function l(e,t){r.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",o.inherits(l,r),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){r.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new l("Deflate",e)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){function a(e,t){var i,a="";for(i=0;i<t;i++)a+=String.fromCharCode(255&e),e>>>=8;return a}function n(e,t,i,n,r,d){var p,u,h=e.file,m=e.compression,f=d!==s.utf8encode,g=o.transformTo("string",d(h.name)),b=o.transformTo("string",s.utf8encode(h.name)),v=h.comment,T=o.transformTo("string",d(v)),S=o.transformTo("string",s.utf8encode(v)),y=b.length!==h.name.length,A=S.length!==v.length,w="",x="",E="",P=h.dir,I=h.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var O=0;t&&(O|=8),f||!y&&!A||(O|=2048);var _,L,D,R=0,M=0;P&&(R|=16),"UNIX"===r?(M=798,R|=(_=h.unixPermissions,L=P,D=_,_||(D=L?16893:33204),(65535&D)<<16)):(M=20,R|=function(e){return 63&(e||0)}(h.dosPermissions)),p=I.getUTCHours(),p<<=6,p|=I.getUTCMinutes(),p<<=5,p|=I.getUTCSeconds()/2,u=I.getUTCFullYear()-1980,u<<=4,u|=I.getUTCMonth()+1,u<<=5,u|=I.getUTCDate(),y&&(x=a(1,1)+a(l(g),4)+b,w+="up"+a(x.length,2)+x),A&&(E=a(1,1)+a(l(T),4)+S,w+="uc"+a(E.length,2)+E);var N="";return N+="\n\0",N+=a(O,2),N+=m.magic,N+=a(p,2),N+=a(u,2),N+=a(C.crc32,4),N+=a(C.compressedSize,4),N+=a(C.uncompressedSize,4),N+=a(g.length,2),N+=a(w.length,2),{fileRecord:c.LOCAL_FILE_HEADER+N+g+w,dirRecord:c.CENTRAL_FILE_HEADER+a(M,2)+N+a(T.length,2)+"\0\0\0\0"+a(R,4)+a(n,4)+g+w+T}}var o=e("../utils"),r=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function d(e,t,i,a){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=a,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,r),d.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,a=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,r.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-a-1))/i:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t,i=this.streamFiles&&!e.file.dir,o=n(e,i,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),i)this.push({data:(t=e,c.DATA_DESCRIPTOR+a(t.crc32,4)+a(t.compressedSize,4)+a(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i,n,r,s,l,d,p=this.bytesWritten-e,u=(i=this.dirRecords.length,n=p,r=e,s=this.zipComment,l=this.encodeFileName,d=o.transformTo("string",l(s)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(i,2)+a(i,2)+a(n,4)+a(r,4)+a(d.length,2)+d);this.push({data:u,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},d.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!r.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(a){}return!0},d.prototype.lock=function(){r.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){var a=e("../compressions"),n=e("./ZipFileWorker");i.generateWorker=function(e,t,i){var o=new n(t.streamFiles,i,t.platform,t.encodeFileName),r=0;try{e.forEach(function(e,i){r++;var n=function(e,t){var i=e||t,n=a[i];if(!n)throw new Error(i+" is not a valid compression method !");return n}(i.options.compression,t.compression),s=i.options.compressionOptions||t.compressionOptions||{},l=i.dir,c=i.date;i._compressWorker(n,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(o)}),o.entriesCount=r}catch(s){o.error(s)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new a;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(e,t){return(new a).loadAsync(e,t)},a.external=e("./external"),t.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){var a=e("./utils"),n=e("./external"),o=e("./utf8"),r=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new n.Promise(function(t,i){var a=e.decompressed.getContentWorker().pipe(new s);a.on("error",function(e){i(e)}).on("end",function(){a.streamInfo.crc32!==e.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var i=this;return t=a.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var i=new r(t);return i.load(e),i}).then(function(e){var i=[n.Promise.resolve(e)],a=e.files;if(t.checkCRC32)for(var o=0;o<a.length;o++)i.push(c(a[o]));return n.Promise.all(i)}).then(function(e){for(var n=e.shift(),o=n.files,r=0;r<o.length;r++){var s=o[r],l=s.fileNameStr,c=a.resolve(s.fileNameStr);i.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(i.file(c).unsafeOriginalName=l)}return n.zipComment.length&&(i.comment=n.zipComment),i})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){var a=e("../utils"),n=e("../stream/GenericWorker");function o(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}a.inherits(o,n),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},o.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){var a=e("readable-stream").Readable;function n(e,t,i){a.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),i&&i(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}e("../utils").inherits(n,a),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){function a(e,t,i){var a,n=o.getTypeOf(t),s=o.extend(i||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=f(e)),s.createFolders&&(a=m(e))&&g.call(this,a,!0);var p="string"===n&&!1===s.binary&&!1===s.base64;i&&void 0!==i.binary||(s.binary=!p),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",n="string");var b=null;b=t instanceof c||t instanceof r?t:u.isNode&&u.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var v=new d(e,b,s);this.files[e]=v}var n=e("./utf8"),o=e("./utils"),r=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),d=e("./zipObject"),p=e("./generate"),u=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||a.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,a;for(t in this.files)a=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,a)},filter:function(e){var t=[];return this.forEach(function(i,a){e(i,a)&&t.push(a)}),t},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,a.call(this,e,t,i),this;if(b(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(b(e))return this.filter(function(t,i){return i.dir&&e.test(t)});var t=this.root+e,i=g.call(this,t),a=this.clone();return a.root=i.name,a},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter(function(t,i){return i.name.slice(0,e.length)===e}),a=0;a<i.length;a++)delete this.files[i[a].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");o.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var a=i.comment||this.comment||"";t=p.generateWorker(this,i,a)}catch(l){(t=new r("error")).error(l)}return new s(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){var a=e("./DataReader");function n(e){a.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,a),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),a=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===i&&this.data[o+2]===a&&this.data[o+3]===n)return o-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),a=e.charCodeAt(2),n=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&i===o[1]&&a===o[2]&&n===o[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){var a=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return a.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,i){var a=e("./Uint8ArrayReader");function n(e){a.call(this,e)}e("../utils").inherits(n,a),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){var a=e("./DataReader");function n(e){a.call(this,e)}e("../utils").inherits(n,a),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){var a=e("./ArrayReader");function n(e){a.call(this,e)}e("../utils").inherits(n,a),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){var a=e("../utils"),n=e("../support"),o=e("./ArrayReader"),r=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=a.getTypeOf(e);return a.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new l(a.transformTo("uint8array",e)):new o(a.transformTo("array",e)):new r(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,i){var a=e("./GenericWorker"),n=e("../utils");function o(e){a.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(o,a),o.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){var a=e("./GenericWorker"),n=e("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,a),o.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){var a=e("../utils"),n=e("./GenericWorker");function o(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}a.inherits(o,n),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){var a=e("../utils"),n=e("./GenericWorker");function o(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=a.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}a.inherits(o,n),o.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){function a(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=a},{}],29:[function(e,t,i){var a=e("../utils"),n=e("./ConvertWorker"),o=e("./GenericWorker"),r=e("../base64"),s=e("../support"),l=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(u){}function d(e,t){return new l.Promise(function(i,n){var o=[],s=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",function(e,i){o.push(e),t&&t(i)}).on("error",function(e){o=[],n(e)}).on("end",function(){try{var e=function(e,t,i){switch(e){case"blob":return a.newBlob(a.transformTo("arraybuffer",t),i);case"base64":return r.encode(t);default:return a.transformTo(e,t)}}(l,function(e,t){var i,a=0,n=null,o=0;for(i=0;i<t.length;i++)o+=t[i].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(n=new Uint8Array(o),i=0;i<t.length;i++)n.set(t[i],a),a+=t[i].length;return n;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),c);i(e)}catch(t){n(t)}o=[]}).resume()})}function p(e,t,i){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=i,a.checkSupport(r),this._worker=e.pipe(new n(r)),e.lock()}catch(s){this._worker=new o("error"),this._worker.error(s)}}p.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,function(e){t.call(i,e.data,e.meta)}):this._worker.on(e,function(){a.delay(t,arguments,i)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(a.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=0===new Blob([a],{type:"application/zip"}).size}catch(o){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(a),i.blob=0===n.getBlob("application/zip").size}catch(r){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(o){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){for(var a=e("./utils"),n=e("./support"),o=e("./nodejsUtils"),r=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){r.call(this,"utf-8 decode"),this.leftOver=null}function d(){r.call(this,"utf-8 encode")}s[254]=s[254]=1,i.utf8encode=function(e){return n.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,i,a,o,r,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(a=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(a-56320),o++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),o=r=0;r<l;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(a=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(a-56320),o++),i<128?t[r++]=i:(i<2048?t[r++]=192|i>>>6:(i<65536?t[r++]=224|i>>>12:(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63),t[r++]=128|i>>>6&63),t[r++]=128|63&i);return t}(e)},i.utf8decode=function(e){return n.nodebuffer?a.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,n,o,r=e.length,l=new Array(2*r);for(t=i=0;t<r;)if((n=e[t++])<128)l[i++]=n;else if(4<(o=s[n]))l[i++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&t<r;)n=n<<6|63&e[t++],o--;1<o?l[i++]=65533:n<65536?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|1023&n)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),a.applyFromCharCode(l)}(e=a.transformTo(n.uint8array?"uint8array":"array",e))},a.inherits(c,r),c.prototype.processChunk=function(e){var t=a.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var r=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+s[e[i]]>t?i:t}(t),l=t;r!==t.length&&(n.uint8array?(l=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)):(l=t.slice(0,r),this.leftOver=t.slice(r,t.length))),this.push({data:i.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,a.inherits(d,r),d.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){var a=e("./support"),n=e("./base64"),o=e("./nodejsUtils"),r=e("./external");function s(e){return e}function l(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(e),a.getBlob(t)}catch(o){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,i){var a=[],n=0,o=e.length;if(o<=i)return String.fromCharCode.apply(null,e);for(;n<o;)"array"===t||"nodebuffer"===t?a.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+i,o)))):a.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+i,o)))),n+=i;return a.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,a=i.getTypeOf(e),n=!0;if("uint8array"===a?n=c.applyCanBeUsed.uint8array:"nodebuffer"===a&&(n=c.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return c.stringifyByChunk(e,a,t)}catch(o){t=Math.floor(t/2)}return c.stringifyByChar(e)}function p(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}i.applyFromCharCode=d;var u={};u.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},u.array={string:d,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},u.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},u.uint8array={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},u.nodebuffer={string:d,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:s},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var a=i.getTypeOf(t);return u[a][e](t)},i.resolve=function(e){for(var t=e.split("/"),i=[],a=0;a<t.length;a++){var n=t[a];"."===n||""===n&&0!==a&&a!==t.length-1||(".."===n?i.pop():i.push(n))}return i.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":a.nodebuffer&&o.isBuffer(e)?"nodebuffer":a.uint8array&&e instanceof Uint8Array?"uint8array":a.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!a[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,a="";for(i=0;i<(e||"").length;i++)a+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return a},i.delay=function(e,t,i){setImmediate(function(){e.apply(i||null,t||[])})},i.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},i.prepareContent=function(e,t,o,s,c){return r.Promise.resolve(t).then(function(e){return a.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new r.Promise(function(t,i){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){i(e.target.error)},a.readAsArrayBuffer(e)}):e}).then(function(t){var d,p=i.getTypeOf(t);return p?("arraybuffer"===p?t=i.transformTo("uint8array",t):"string"===p&&(c?t=n.decode(t):o&&!0!==s&&(t=l(d=t,a.uint8array?new Uint8Array(d.length):new Array(d.length)))),t):r.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){var a=e("./reader/readerFor"),n=e("./utils"),o=e("./signature"),r=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var a=this.reader.readString(4)===t;return this.reader.setIndex(i),a},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",i=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,a=this.zip64EndOfCentralSize-44;0<a;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new r({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var a=t-i;if(0<a)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(a<0)throw new Error("Corrupted zip: missing "+Math.abs(a)+" bytes.")},prepareReader:function(e){this.reader=a(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){var a=e("./reader/readerFor"),n=e("./utils"),o=e("./compressedObject"),r=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=a(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,i,a,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),i=e.readInt(2),a=e.readData(i),this.extraFields[t]={id:t,length:i,value:a};e.setIndex(n)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var a=this.findExtraFieldUnicodeComment();if(null!==a)this.fileCommentStr=a;else{var o=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=a(e.value);return 1!==t.readInt(1)||r(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=a(e.value);return 1!==t.readInt(1)||r(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){function a(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var n=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),r=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");a.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var a="string"===(i=e.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!a&&(t=t.pipe(new r.Utf8EncodeWorker)),!o&&a&&(t=t.pipe(new r.Utf8DecodeWorker))}catch(s){(t=new l("error")).error(s)}return new n(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new r.Utf8EncodeWorker)),s.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)a.prototype[c[p]]=d;t.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,i){(function(e){var i,a,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,r=new n(d),s=e.document.createTextNode("");r.observe(s,{characterData:!0}),i=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var l=new e.MessageChannel;l.port1.onmessage=d,i=function(){l.port2.postMessage(0)}}var c=[];function d(){var e,t;a=!0;for(var i=c.length;i;){for(t=c,c=[],e=-1;++e<i;)t[e]();i=c.length}a=!1}t.exports=function(e){1!==c.push(e)||a||i()}}).call(this,void 0!==v?v:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){var a=e("immediate");function n(){}var o={},r=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&h(this,e)}function d(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function p(e,t,i){a(function(){var a;try{a=t(i)}catch(n){return o.reject(e,n)}a===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,a)})}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var i=!1;function a(t){i||(i=!0,o.reject(e,t))}function n(t){i||(i=!0,o.resolve(e,t))}var r=m(function(){t(n,a)});"error"===r.status&&a(r.value)}function m(e,t){var i={};try{i.value=e(t),i.status="success"}catch(a){i.status="error",i.value=a}return i}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){throw i})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===r)return this;var i=new this.constructor(n);return this.state!==l?p(i,this.state===s?e:t,this.outcome):this.queue.push(new d(i,e,t)),i},d.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){o.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},o.resolve=function(e,t){var i=m(u,t);if("error"===i.status)return o.reject(e,i.value);var a=i.value;if(a)h(e,a);else{e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=r,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(n),e)},c.reject=function(e){var t=new this(n);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var r=new Array(i),s=0,l=-1,c=new this(n);++l<i;)d(e[l],l);return c;function d(e,n){t.resolve(e).then(function(e){r[n]=e,++s!==i||a||(a=!0,o.resolve(c,r))},function(e){a||(a=!0,o.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,a=!1;if(!i)return this.resolve([]);for(var r,s=-1,l=new this(n);++s<i;)r=e[s],t.resolve(r).then(function(e){a||(a=!0,o.resolve(l,e))},function(e){a||(a=!0,o.reject(l,e))});return l}},{immediate:36}],38:[function(e,t,i){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){var a=e("./zlib/deflate"),n=e("./utils/common"),o=e("./utils/strings"),r=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,d=-1,p=0,u=8;function h(e){if(!(this instanceof h))return new h(e);this.options=n.assign({level:d,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(r[i]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var m;if(m="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=a.deflateSetDictionary(this.strm,m))!==c)throw new Error(r[i]);this._dict_set=!0}}function m(e,t){var i=new h(t);if(i.push(e,!0),i.err)throw i.msg||r[i.err];return i.result}h.prototype.push=function(e,t){var i,r,s=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(d),s.next_out=0,s.avail_out=d),1!==(i=a.deflate(s,r))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(o.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==i);return 4===r?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==r||(this.onEnd(c),!(s.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=h,i.deflate=m,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,m(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,m(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){var a=e("./zlib/inflate"),n=e("./utils/common"),o=e("./utils/strings"),r=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),d=Object.prototype.toString;function p(e){if(!(this instanceof p))return new p(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=a.inflateInit2(this.strm,t.windowBits);if(i!==r.Z_OK)throw new Error(s[i]);this.header=new c,a.inflateGetHeader(this.strm,this.header)}function u(e,t){var i=new p(t);if(i.push(e,!0),i.err)throw i.msg||s[i.err];return i.result}p.prototype.push=function(e,t){var i,s,l,c,p,u,h=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new n.Buf8(m),h.next_out=0,h.avail_out=m),(i=a.inflate(h,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&f&&(u="string"==typeof f?o.string2buf(f):"[object ArrayBuffer]"===d.call(f)?new Uint8Array(f):f,i=a.inflateSetDictionary(this.strm,u)),i===r.Z_BUF_ERROR&&!0===g&&(i=r.Z_OK,g=!1),i!==r.Z_STREAM_END&&i!==r.Z_OK)return this.onEnd(i),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&i!==r.Z_STREAM_END&&(0!==h.avail_in||s!==r.Z_FINISH&&s!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),c=h.next_out-l,p=o.buf2string(h.output,l),h.next_out=c,h.avail_out=m-c,c&&n.arraySet(h.output,h.output,l,c,0),this.onData(p)):this.onData(n.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((0<h.avail_in||0===h.avail_out)&&i!==r.Z_STREAM_END);return i===r.Z_STREAM_END&&(s=r.Z_FINISH),s===r.Z_FINISH?(i=a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===r.Z_OK):s!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),!(h.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=p,i.inflate=u,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var a in i)i.hasOwnProperty(a)&&(e[a]=i[a])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,a,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+a),n);else for(var o=0;o<a;o++)e[n+o]=t[i+o]},flattenChunks:function(e){var t,i,a,n,o,r;for(t=a=0,i=e.length;t<i;t++)a+=e[t].length;for(r=new Uint8Array(a),t=n=0,i=e.length;t<i;t++)o=e[t],r.set(o,n),n+=o.length;return r}},o={arraySet:function(e,t,i,a,n){for(var o=0;o<a;o++)e[n+o]=t[i+o]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(a)},{}],42:[function(e,t,i){var a=e("./common"),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(c){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){o=!1}for(var r=new a.Buf8(256),s=0;s<256;s++)r[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&n))return String.fromCharCode.apply(null,a.shrinkBuf(e,t));for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i}r[254]=r[254]=1,i.string2buf=function(e){var t,i,n,o,r,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new a.Buf8(l),o=r=0;r<l;o++)55296==(64512&(i=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?t[r++]=i:(i<2048?t[r++]=192|i>>>6:(i<65536?t[r++]=224|i>>>12:(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63),t[r++]=128|i>>>6&63),t[r++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new a.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,a,n,o,s=t||e.length,c=new Array(2*s);for(i=a=0;i<s;)if((n=e[i++])<128)c[a++]=n;else if(4<(o=r[n]))c[a++]=65533,i+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&i<s;)n=n<<6|63&e[i++],o--;1<o?c[a++]=65533:n<65536?c[a++]=n:(n-=65536,c[a++]=55296|n>>10&1023,c[a++]=56320|1023&n)}return l(c,a)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+r[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){t.exports=function(e,t,i,a){for(var n=65535&e,o=e>>>16&65535,r=0;0!==i;){for(i-=r=2e3<i?2e3:i;o=o+(n=n+t[a++]|0)|0,--r;);n%=65521,o%=65521}return n|o<<16}},{}],44:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){var a=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,n){var o=a,r=n+i;e^=-1;for(var s=n;s<r;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,i){var a,n=e("../utils/common"),o=e("./trees"),r=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,d=4,p=0,u=-2,h=-1,m=4,f=2,g=8,b=9,v=286,T=30,S=19,y=2*v+1,A=15,w=3,x=258,E=x+w+1,P=42,I=113,C=1,O=2,_=3,L=4;function D(e,t){return e.msg=l[t],t}function R(e){return(e<<1)-(4<e?9:0)}function M(e){for(var t=e.length;0<=--t;)e[t]=0}function N(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(n.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function k(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,N(e.strm)}function B(e,t){e.pending_buf[e.pending++]=t}function G(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function H(e,t){var i,a,n=e.max_chain_length,o=e.strstart,r=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-E?e.strstart-(e.w_size-E):0,c=e.window,d=e.w_mask,p=e.prev,u=e.strstart+x,h=c[o+r-1],m=c[o+r];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(i=t)+r]===m&&c[i+r-1]===h&&c[i]===c[o]&&c[++i]===c[o+1]){o+=2,i++;do{}while(c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&o<u);if(a=x-(u-o),o=u-x,r<a){if(e.match_start=t,s<=(r=a))break;h=c[o+r-1],m=c[o+r]}}}while((t=p[t&d])>l&&0!=--n);return r<=e.lookahead?r:e.lookahead}function V(e){var t,i,a,o,l,c,d,p,u,h,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-E)){for(n.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=i=e.hash_size;a=e.head[--t],e.head[t]=m<=a?a-m:0,--i;);for(t=i=m;a=e.prev[--t],e.prev[t]=m<=a?a-m:0,--i;);o+=m}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,p=e.strstart+e.lookahead,h=void 0,(u=o)<(h=c.avail_in)&&(h=u),i=0===h?0:(c.avail_in-=h,n.arraySet(d,c.input,c.next_in,h,p),1===c.state.wrap?c.adler=r(c.adler,d,h,p):2===c.state.wrap&&(c.adler=s(c.adler,d,h,p)),c.next_in+=h,c.total_in+=h,h),e.lookahead+=i,e.lookahead+e.insert>=w)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+w-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<w)););}while(e.lookahead<E&&0!==e.strm.avail_in)}function z(e,t){for(var i,a;;){if(e.lookahead<E){if(V(e),e.lookahead<E&&t===c)return C;if(0===e.lookahead)break}if(i=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-E&&(e.match_length=H(e,i)),e.match_length>=w)if(a=o._tr_tally(e,e.strstart-e.match_start,e.match_length-w),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=w){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else a=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(k(e,!1),0===e.strm.avail_out))return C}return e.insert=e.strstart<w-1?e.strstart:w-1,t===d?(k(e,!0),0===e.strm.avail_out?_:L):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?C:O}function F(e,t){for(var i,a,n;;){if(e.lookahead<E){if(V(e),e.lookahead<E&&t===c)return C;if(0===e.lookahead)break}if(i=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=w-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-E&&(e.match_length=H(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===w&&4096<e.strstart-e.match_start)&&(e.match_length=w-1)),e.prev_length>=w&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-w,a=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-w),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=w-1,e.strstart++,a&&(k(e,!1),0===e.strm.avail_out))return C}else if(e.match_available){if((a=o._tr_tally(e,0,e.window[e.strstart-1]))&&k(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return C}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<w-1?e.strstart:w-1,t===d?(k(e,!0),0===e.strm.avail_out?_:L):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?C:O}function U(e,t,i,a,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=a,this.func=n}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*y),this.dyn_dtree=new n.Buf16(2*(2*T+1)),this.bl_tree=new n.Buf16(2*(2*S+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(A+1),this.heap=new n.Buf16(2*v+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*v+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=f,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?P:I,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),p):D(e,u)}function X(e){var t,i=W(e);return i===p&&((t=e.state).window_size=2*t.w_size,M(t.head),t.max_lazy_match=a[t.level].max_lazy,t.good_match=a[t.level].good_length,t.nice_match=a[t.level].nice_length,t.max_chain_length=a[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=w-1,t.match_available=0,t.ins_h=0),i}function K(e,t,i,a,o,r){if(!e)return u;var s=1;if(t===h&&(t=6),a<0?(s=0,a=-a):15<a&&(s=2,a-=16),o<1||b<o||i!==g||a<8||15<a||t<0||9<t||r<0||m<r)return D(e,u);8===a&&(a=9);var l=new j;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+w-1)/w),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=r,l.method=i,X(e)}a=[new U(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(V(e),0===e.lookahead&&t===c)return C;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var a=e.block_start+i;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,k(e,!1),0===e.strm.avail_out))return C;if(e.strstart-e.block_start>=e.w_size-E&&(k(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===d?(k(e,!0),0===e.strm.avail_out?_:L):(e.strstart>e.block_start&&(k(e,!1),e.strm.avail_out),C)}),new U(4,4,8,4,z),new U(4,5,16,8,z),new U(4,6,32,32,z),new U(4,4,16,16,F),new U(8,16,32,32,F),new U(8,16,128,128,F),new U(8,32,128,256,F),new U(32,128,258,1024,F),new U(32,258,258,4096,F)],i.deflateInit=function(e,t){return K(e,t,g,15,8,0)},i.deflateInit2=K,i.deflateReset=X,i.deflateResetKeep=W,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,p):u},i.deflate=function(e,t){var i,n,r,l;if(!e||!e.state||5<t||t<0)return e?D(e,u):u;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==d)return D(e,0===e.avail_out?-5:u);if(n.strm=e,i=n.last_flush,n.last_flush=t,n.status===P)if(2===n.wrap)e.adler=0,B(n,31),B(n,139),B(n,8),n.gzhead?(B(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),B(n,255&n.gzhead.time),B(n,n.gzhead.time>>8&255),B(n,n.gzhead.time>>16&255),B(n,n.gzhead.time>>24&255),B(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),B(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(B(n,255&n.gzhead.extra.length),B(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(B(n,0),B(n,0),B(n,0),B(n,0),B(n,0),B(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),B(n,3),n.status=I);else{var h=g+(n.w_bits-8<<4)<<8;h|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(h|=32),h+=31-h%31,n.status=I,G(n,h),0!==n.strstart&&(G(n,e.adler>>>16),G(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),N(e),r=n.pending,n.pending!==n.pending_buf_size));)B(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),N(e),r=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,B(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),0===l&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),N(e),r=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,B(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>r&&(e.adler=s(e.adler,n.pending_buf,n.pending-r,r)),0===l&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&N(e),n.pending+2<=n.pending_buf_size&&(B(n,255&e.adler),B(n,e.adler>>8&255),e.adler=0,n.status=I)):n.status=I),0!==n.pending){if(N(e),0===e.avail_out)return n.last_flush=-1,p}else if(0===e.avail_in&&R(t)<=R(i)&&t!==d)return D(e,-5);if(666===n.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==c&&666!==n.status){var m=2===n.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(V(e),0===e.lookahead)){if(t===c)return C;break}if(e.match_length=0,i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(k(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===d?(k(e,!0),0===e.strm.avail_out?_:L):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?C:O}(n,t):3===n.strategy?function(e,t){for(var i,a,n,r,s=e.window;;){if(e.lookahead<=x){if(V(e),e.lookahead<=x&&t===c)return C;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=w&&0<e.strstart&&(a=s[n=e.strstart-1])===s[++n]&&a===s[++n]&&a===s[++n]){r=e.strstart+x;do{}while(a===s[++n]&&a===s[++n]&&a===s[++n]&&a===s[++n]&&a===s[++n]&&a===s[++n]&&a===s[++n]&&a===s[++n]&&n<r);e.match_length=x-(r-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=w?(i=o._tr_tally(e,1,e.match_length-w),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(k(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===d?(k(e,!0),0===e.strm.avail_out?_:L):e.last_lit&&(k(e,!1),0===e.strm.avail_out)?C:O}(n,t):a[n.level].func(n,t);if(m!==_&&m!==L||(n.status=666),m===C||m===_)return 0===e.avail_out&&(n.last_flush=-1),p;if(m===O&&(1===t?o._tr_align(n):5!==t&&(o._tr_stored_block(n,0,0,!1),3===t&&(M(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),N(e),0===e.avail_out))return n.last_flush=-1,p}return t!==d?p:n.wrap<=0?1:(2===n.wrap?(B(n,255&e.adler),B(n,e.adler>>8&255),B(n,e.adler>>16&255),B(n,e.adler>>24&255),B(n,255&e.total_in),B(n,e.total_in>>8&255),B(n,e.total_in>>16&255),B(n,e.total_in>>24&255)):(G(n,e.adler>>>16),G(n,65535&e.adler)),N(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?p:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==P&&69!==t&&73!==t&&91!==t&&103!==t&&t!==I&&666!==t?D(e,u):(e.state=null,t===I?D(e,-3):p):u},i.deflateSetDictionary=function(e,t){var i,a,o,s,l,c,d,h,m=t.length;if(!e||!e.state)return u;if(2===(s=(i=e.state).wrap)||1===s&&i.status!==P||i.lookahead)return u;for(1===s&&(e.adler=r(e.adler,t,m,0)),i.wrap=0,m>=i.w_size&&(0===s&&(M(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new n.Buf8(i.w_size),n.arraySet(h,t,m-i.w_size,i.w_size,0),t=h,m=i.w_size),l=e.avail_in,c=e.next_in,d=e.input,e.avail_in=m,e.next_in=0,e.input=t,V(i);i.lookahead>=w;){for(a=i.strstart,o=i.lookahead-(w-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[a+w-1])&i.hash_mask,i.prev[a&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=a,a++,--o;);i.strstart=a,i.lookahead=w-1,V(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=w-1,i.match_available=0,e.next_in=c,e.input=d,e.avail_in=l,i.wrap=s,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){t.exports=function(e,t){var i,a,n,o,r,s,l,c,d,p,u,h,m,f,g,b,v,T,S,y,A,w,x,E,P;i=e.state,a=e.next_in,E=e.input,n=a+(e.avail_in-5),o=e.next_out,P=e.output,r=o-(t-e.avail_out),s=o+(e.avail_out-257),l=i.dmax,c=i.wsize,d=i.whave,p=i.wnext,u=i.window,h=i.hold,m=i.bits,f=i.lencode,g=i.distcode,b=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{m<15&&(h+=E[a++]<<m,m+=8,h+=E[a++]<<m,m+=8),T=f[h&b];t:for(;;){if(h>>>=S=T>>>24,m-=S,0==(S=T>>>16&255))P[o++]=65535&T;else{if(!(16&S)){if(!(64&S)){T=f[(65535&T)+(h&(1<<S)-1)];continue t}if(32&S){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}y=65535&T,(S&=15)&&(m<S&&(h+=E[a++]<<m,m+=8),y+=h&(1<<S)-1,h>>>=S,m-=S),m<15&&(h+=E[a++]<<m,m+=8,h+=E[a++]<<m,m+=8),T=g[h&v];i:for(;;){if(h>>>=S=T>>>24,m-=S,!(16&(S=T>>>16&255))){if(!(64&S)){T=g[(65535&T)+(h&(1<<S)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(A=65535&T,m<(S&=15)&&(h+=E[a++]<<m,(m+=8)<S&&(h+=E[a++]<<m,m+=8)),l<(A+=h&(1<<S)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(h>>>=S,m-=S,(S=o-r)<A){if(d<(S=A-S)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(x=u,(w=0)===p){if(w+=c-S,S<y){for(y-=S;P[o++]=u[w++],--S;);w=o-A,x=P}}else if(p<S){if(w+=c+p-S,(S-=p)<y){for(y-=S;P[o++]=u[w++],--S;);if(w=0,p<y){for(y-=S=p;P[o++]=u[w++],--S;);w=o-A,x=P}}}else if(w+=p-S,S<y){for(y-=S;P[o++]=u[w++],--S;);w=o-A,x=P}for(;2<y;)P[o++]=x[w++],P[o++]=x[w++],P[o++]=x[w++],y-=3;y&&(P[o++]=x[w++],1<y&&(P[o++]=x[w++]))}else{for(w=o-A;P[o++]=P[w++],P[o++]=P[w++],P[o++]=P[w++],2<(y-=3););y&&(P[o++]=P[w++],1<y&&(P[o++]=P[w++]))}break}}break}}while(a<n&&o<s);a-=y=m>>3,h&=(1<<(m-=y<<3))-1,e.next_in=a,e.next_out=o,e.avail_in=a<n?n-a+5:5-(a-n),e.avail_out=o<s?s-o+257:257-(o-s),i.hold=h,i.bits=m}},{}],49:[function(e,t,i){var a=e("../utils/common"),n=e("./adler32"),o=e("./crc32"),r=e("./inffast"),s=e("./inftrees"),l=1,c=2,d=0,p=-2,u=1,h=852,m=592;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=u,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new a.Buf32(h),t.distcode=t.distdyn=new a.Buf32(m),t.sane=1,t.back=-1,d):p}function v(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,b(e)):p}function T(e,t){var i,a;return e&&e.state?(a=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?p:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=i,a.wbits=t,v(e))):p}function S(e,t){var i,a;return e?(a=new g,(e.state=a).window=null,(i=T(e,t))!==d&&(e.state=null),i):p}var y,A,w=!0;function x(e){if(w){var t;for(y=new a.Buf32(512),A=new a.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,A,0,e.work,{bits:5}),w=!1}e.lencode=y,e.lenbits=9,e.distcode=A,e.distbits=5}function E(e,t,i,n){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new a.Buf8(r.wsize)),n>=r.wsize?(a.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n<(o=r.wsize-r.wnext)&&(o=n),a.arraySet(r.window,t,i-n,o,r.wnext),(n-=o)?(a.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}i.inflateReset=v,i.inflateReset2=T,i.inflateResetKeep=b,i.inflateInit=function(e){return S(e,15)},i.inflateInit2=S,i.inflate=function(e,t){var i,h,m,g,b,v,T,S,y,A,w,P,I,C,O,_,L,D,R,M,N,k,B,G,H=0,V=new a.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return p;12===(i=e.state).mode&&(i.mode=13),b=e.next_out,m=e.output,T=e.avail_out,g=e.next_in,h=e.input,v=e.avail_in,S=i.hold,y=i.bits,A=v,w=T,k=d;e:for(;;)switch(i.mode){case u:if(0===i.wrap){i.mode=13;break}for(;y<16;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(2&i.wrap&&35615===S){V[i.check=0]=255&S,V[1]=S>>>8&255,i.check=o(i.check,V,2,0),y=S=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&S)<<8)+(S>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&S)){e.msg="unknown compression method",i.mode=30;break}if(y-=4,N=8+(15&(S>>>=4)),0===i.wbits)i.wbits=N;else if(N>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<N,e.adler=i.check=1,i.mode=512&S?10:12,y=S=0;break;case 2:for(;y<16;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(i.flags=S,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=S>>8&1),512&i.flags&&(V[0]=255&S,V[1]=S>>>8&255,i.check=o(i.check,V,2,0)),y=S=0,i.mode=3;case 3:for(;y<32;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.head&&(i.head.time=S),512&i.flags&&(V[0]=255&S,V[1]=S>>>8&255,V[2]=S>>>16&255,V[3]=S>>>24&255,i.check=o(i.check,V,4,0)),y=S=0,i.mode=4;case 4:for(;y<16;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.head&&(i.head.xflags=255&S,i.head.os=S>>8),512&i.flags&&(V[0]=255&S,V[1]=S>>>8&255,i.check=o(i.check,V,2,0)),y=S=0,i.mode=5;case 5:if(1024&i.flags){for(;y<16;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.length=S,i.head&&(i.head.extra_len=S),512&i.flags&&(V[0]=255&S,V[1]=S>>>8&255,i.check=o(i.check,V,2,0)),y=S=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(v<(P=i.length)&&(P=v),P&&(i.head&&(N=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),a.arraySet(i.head.extra,h,g,P,N)),512&i.flags&&(i.check=o(i.check,h,P,g)),v-=P,g+=P,i.length-=P),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===v)break e;for(P=0;N=h[g+P++],i.head&&N&&i.length<65536&&(i.head.name+=String.fromCharCode(N)),N&&P<v;);if(512&i.flags&&(i.check=o(i.check,h,P,g)),v-=P,g+=P,N)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===v)break e;for(P=0;N=h[g+P++],i.head&&N&&i.length<65536&&(i.head.comment+=String.fromCharCode(N)),N&&P<v;);if(512&i.flags&&(i.check=o(i.check,h,P,g)),v-=P,g+=P,N)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;y<16;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(S!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}y=S=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;y<32;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}e.adler=i.check=f(S),y=S=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=b,e.avail_out=T,e.next_in=g,e.avail_in=v,i.hold=S,i.bits=y,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){S>>>=7&y,y-=7&y,i.mode=27;break}for(;y<3;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}switch(i.last=1&S,y-=1,3&(S>>>=1)){case 0:i.mode=14;break;case 1:if(x(i),i.mode=20,6!==t)break;S>>>=2,y-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}S>>>=2,y-=2;break;case 14:for(S>>>=7&y,y-=7&y;y<32;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if((65535&S)!=(S>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&S,y=S=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(P=i.length){if(v<P&&(P=v),T<P&&(P=T),0===P)break e;a.arraySet(m,h,g,P,b),v-=P,g+=P,T-=P,b+=P,i.length-=P;break}i.mode=12;break;case 17:for(;y<14;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(i.nlen=257+(31&S),S>>>=5,y-=5,i.ndist=1+(31&S),S>>>=5,y-=5,i.ncode=4+(15&S),S>>>=4,y-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;y<3;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.lens[z[i.have++]]=7&S,S>>>=3,y-=3}for(;i.have<19;)i.lens[z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,B={bits:i.lenbits},k=s(0,i.lens,0,19,i.lencode,0,i.work,B),i.lenbits=B.bits,k){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;_=(H=i.lencode[S&(1<<i.lenbits)-1])>>>16&255,L=65535&H,!((O=H>>>24)<=y);){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(L<16)S>>>=O,y-=O,i.lens[i.have++]=L;else{if(16===L){for(G=O+2;y<G;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(S>>>=O,y-=O,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}N=i.lens[i.have-1],P=3+(3&S),S>>>=2,y-=2}else if(17===L){for(G=O+3;y<G;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}y-=O,N=0,P=3+(7&(S>>>=O)),S>>>=3,y-=3}else{for(G=O+7;y<G;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}y-=O,N=0,P=11+(127&(S>>>=O)),S>>>=7,y-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;P--;)i.lens[i.have++]=N}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,B={bits:i.lenbits},k=s(l,i.lens,0,i.nlen,i.lencode,0,i.work,B),i.lenbits=B.bits,k){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,B={bits:i.distbits},k=s(c,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,B),i.distbits=B.bits,k){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=v&&258<=T){e.next_out=b,e.avail_out=T,e.next_in=g,e.avail_in=v,i.hold=S,i.bits=y,r(e,w),b=e.next_out,m=e.output,T=e.avail_out,g=e.next_in,h=e.input,v=e.avail_in,S=i.hold,y=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;_=(H=i.lencode[S&(1<<i.lenbits)-1])>>>16&255,L=65535&H,!((O=H>>>24)<=y);){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(_&&!(240&_)){for(D=O,R=_,M=L;_=(H=i.lencode[M+((S&(1<<D+R)-1)>>D)])>>>16&255,L=65535&H,!(D+(O=H>>>24)<=y);){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}S>>>=D,y-=D,i.back+=D}if(S>>>=O,y-=O,i.back+=O,i.length=L,0===_){i.mode=26;break}if(32&_){i.back=-1,i.mode=12;break}if(64&_){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&_,i.mode=22;case 22:if(i.extra){for(G=i.extra;y<G;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.length+=S&(1<<i.extra)-1,S>>>=i.extra,y-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;_=(H=i.distcode[S&(1<<i.distbits)-1])>>>16&255,L=65535&H,!((O=H>>>24)<=y);){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(!(240&_)){for(D=O,R=_,M=L;_=(H=i.distcode[M+((S&(1<<D+R)-1)>>D)])>>>16&255,L=65535&H,!(D+(O=H>>>24)<=y);){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}S>>>=D,y-=D,i.back+=D}if(S>>>=O,y-=O,i.back+=O,64&_){e.msg="invalid distance code",i.mode=30;break}i.offset=L,i.extra=15&_,i.mode=24;case 24:if(i.extra){for(G=i.extra;y<G;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}i.offset+=S&(1<<i.extra)-1,S>>>=i.extra,y-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===T)break e;if(P=w-T,i.offset>P){if((P=i.offset-P)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}I=P>i.wnext?(P-=i.wnext,i.wsize-P):i.wnext-P,P>i.length&&(P=i.length),C=i.window}else C=m,I=b-i.offset,P=i.length;for(T<P&&(P=T),T-=P,i.length-=P;m[b++]=C[I++],--P;);0===i.length&&(i.mode=21);break;case 26:if(0===T)break e;m[b++]=i.length,T--,i.mode=21;break;case 27:if(i.wrap){for(;y<32;){if(0===v)break e;v--,S|=h[g++]<<y,y+=8}if(w-=T,e.total_out+=w,i.total+=w,w&&(e.adler=i.check=i.flags?o(i.check,m,w,b-w):n(i.check,m,w,b-w)),w=T,(i.flags?S:f(S))!==i.check){e.msg="incorrect data check",i.mode=30;break}y=S=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;y<32;){if(0===v)break e;v--,S+=h[g++]<<y,y+=8}if(S!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}y=S=0}i.mode=29;case 29:k=1;break e;case 30:k=-3;break e;case 31:return-4;default:return p}return e.next_out=b,e.avail_out=T,e.next_in=g,e.avail_in=v,i.hold=S,i.bits=y,(i.wsize||w!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&E(e,e.output,e.next_out,w-e.avail_out)?(i.mode=31,-4):(A-=e.avail_in,w-=e.avail_out,e.total_in+=A,e.total_out+=w,i.total+=w,i.wrap&&w&&(e.adler=i.check=i.flags?o(i.check,m,w,e.next_out-w):n(i.check,m,w,e.next_out-w)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==A&&0===w||4===t)&&k===d&&(k=-5),k)},i.inflateEnd=function(e){if(!e||!e.state)return p;var t=e.state;return t.window&&(t.window=null),e.state=null,d},i.inflateGetHeader=function(e,t){var i;return e&&e.state&&2&(i=e.state).wrap?((i.head=t).done=!1,d):p},i.inflateSetDictionary=function(e,t){var i,a=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?p:11===i.mode&&n(1,t,a,0)!==i.check?-3:E(e,t,a,a)?(i.mode=31,-4):(i.havedict=1,d):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){var a=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,l,c,d,p,u){var h,m,f,g,b,v,T,S,y,A=u.bits,w=0,x=0,E=0,P=0,I=0,C=0,O=0,_=0,L=0,D=0,R=null,M=0,N=new a.Buf16(16),k=new a.Buf16(16),B=null,G=0;for(w=0;w<=15;w++)N[w]=0;for(x=0;x<l;x++)N[t[i+x]]++;for(I=A,P=15;1<=P&&0===N[P];P--);if(P<I&&(I=P),0===P)return c[d++]=20971520,c[d++]=20971520,u.bits=1,0;for(E=1;E<P&&0===N[E];E++);for(I<E&&(I=E),w=_=1;w<=15;w++)if(_<<=1,(_-=N[w])<0)return-1;if(0<_&&(0===e||1!==P))return-1;for(k[1]=0,w=1;w<15;w++)k[w+1]=k[w]+N[w];for(x=0;x<l;x++)0!==t[i+x]&&(p[k[t[i+x]]++]=x);if(v=0===e?(R=B=p,19):1===e?(R=n,M-=257,B=o,G-=257,256):(R=r,B=s,-1),w=E,b=d,O=x=D=0,f=-1,g=(L=1<<(C=I))-1,1===e&&852<L||2===e&&592<L)return 1;for(;;){for(T=w-O,y=p[x]<v?(S=0,p[x]):p[x]>v?(S=B[G+p[x]],R[M+p[x]]):(S=96,0),h=1<<w-O,E=m=1<<C;c[b+(D>>O)+(m-=h)]=T<<24|S<<16|y,0!==m;);for(h=1<<w-1;D&h;)h>>=1;if(0!==h?(D&=h-1,D+=h):D=0,x++,0==--N[w]){if(w===P)break;w=t[i+p[x]]}if(I<w&&(D&g)!==f){for(0===O&&(O=I),b+=E,_=1<<(C=w-O);C+O<P&&!((_-=N[C+O])<=0);)C++,_<<=1;if(L+=1<<C,1===e&&852<L||2===e&&592<L)return 1;c[f=D&g]=I<<24|C<<16|b-d}}return 0!==D&&(c[b+D]=w-O<<24|64<<16),u.bits=I,0}},{"../utils/common":41}],51:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){var a=e("../utils/common"),n=0,o=1;function r(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,c=256,d=c+1+l,p=30,u=19,h=2*d+1,m=15,f=16,g=7,b=256,v=16,T=17,S=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(d+2));r(E);var P=new Array(2*p);r(P);var I=new Array(512);r(I);var C=new Array(256);r(C);var O=new Array(l);r(O);var _,L,D,R=new Array(p);function M(e,t,i,a,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=a,this.max_length=n,this.has_stree=e&&e.length}function N(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function k(e){return e<256?I[e]:I[256+(e>>>7)]}function B(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function G(e,t,i){e.bi_valid>f-i?(e.bi_buf|=t<<e.bi_valid&65535,B(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=i-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function H(e,t,i){G(e,i[2*t],i[2*t+1])}function V(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function z(e,t,i){var a,n,o=new Array(m+1),r=0;for(a=1;a<=m;a++)o[a]=r=r+i[a-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=V(o[s]++,s))}}function F(e){var t;for(t=0;t<d;t++)e.dyn_ltree[2*t]=0;for(t=0;t<p;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*b]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){8<e.bi_valid?B(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function j(e,t,i,a){var n=2*t,o=2*i;return e[n]<e[o]||e[n]===e[o]&&a[t]<=a[i]}function W(e,t,i){for(var a=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&j(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!j(t,a,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=a}function X(e,t,i){var a,n,o,r,s=0;if(0!==e.last_lit)for(;a=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],n=e.pending_buf[e.l_buf+s],s++,0===a?H(e,n,t):(H(e,(o=C[n])+c+1,t),0!==(r=y[o])&&G(e,n-=O[o],r),H(e,o=k(--a),i),0!==(r=A[o])&&G(e,a-=R[o],r)),s<e.last_lit;);H(e,b,t)}function K(e,t){var i,a,n,o=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=h,i=0;i<l;i++)0!==o[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):o[2*i+1]=0;for(;e.heap_len<2;)o[2*(n=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=r[2*n+1]);for(t.max_code=c,i=e.heap_len>>1;1<=i;i--)W(e,o,i);for(n=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],W(e,o,1),a=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=a,o[2*n]=o[2*i]+o[2*a],e.depth[n]=(e.depth[i]>=e.depth[a]?e.depth[i]:e.depth[a])+1,o[2*i+1]=o[2*a+1]=n,e.heap[1]=n++,W(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,a,n,o,r,s,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,p=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,g=t.stat_desc.max_length,b=0;for(o=0;o<=m;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<h;i++)g<(o=l[2*l[2*(a=e.heap[i])+1]+1]+1)&&(o=g,b++),l[2*a+1]=o,c<a||(e.bl_count[o]++,r=0,f<=a&&(r=u[a-f]),s=l[2*a],e.opt_len+=s*(o+r),p&&(e.static_len+=s*(d[2*a+1]+r)));if(0!==b){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,b-=2}while(0<b);for(o=g;0!==o;o--)for(a=e.bl_count[o];0!==a;)c<(n=e.heap[--i])||(l[2*n+1]!==o&&(e.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),a--)}}(e,t),z(o,c,e.bl_count)}function Y(e,t,i){var a,n,o=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),t[2*(i+1)+1]=65535,a=0;a<=i;a++)n=r,r=t[2*(a+1)+1],++s<l&&n===r||(s<c?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*v]++):s<=10?e.bl_tree[2*T]++:e.bl_tree[2*S]++,o=n,c=(s=0)===r?(l=138,3):n===r?(l=6,3):(l=7,4))}function Z(e,t,i){var a,n,o=-1,r=t[1],s=0,l=7,c=4;for(0===r&&(l=138,c=3),a=0;a<=i;a++)if(n=r,r=t[2*(a+1)+1],!(++s<l&&n===r)){if(s<c)for(;H(e,n,e.bl_tree),0!=--s;);else 0!==n?(n!==o&&(H(e,n,e.bl_tree),s--),H(e,v,e.bl_tree),G(e,s-3,2)):s<=10?(H(e,T,e.bl_tree),G(e,s-3,3)):(H(e,S,e.bl_tree),G(e,s-11,7));o=n,c=(s=0)===r?(l=138,3):n===r?(l=6,3):(l=7,4)}}r(R);var q=!1;function J(e,t,i,n){var o,r,l,c;G(e,(s<<1)+(n?1:0),3),r=t,l=i,c=!0,U(o=e),c&&(B(o,l),B(o,~l)),a.arraySet(o.pending_buf,o.window,r,l,o.pending),o.pending+=l}i._tr_init=function(e){q||(function(){var e,t,i,a,n,o=new Array(m+1);for(a=i=0;a<l-1;a++)for(O[a]=i,e=0;e<1<<y[a];e++)C[i++]=a;for(C[i-1]=a,a=n=0;a<16;a++)for(R[a]=n,e=0;e<1<<A[a];e++)I[n++]=a;for(n>>=7;a<p;a++)for(R[a]=n<<7,e=0;e<1<<A[a]-7;e++)I[256+n++]=a;for(t=0;t<=m;t++)o[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,o[8]++;for(;e<=255;)E[2*e+1]=9,e++,o[9]++;for(;e<=279;)E[2*e+1]=7,e++,o[7]++;for(;e<=287;)E[2*e+1]=8,e++,o[8]++;for(z(E,d+1,o),e=0;e<p;e++)P[2*e+1]=5,P[2*e]=V(e,5);_=new M(E,y,c+1,d,m),L=new M(P,A,0,p,m),D=new M(new Array(0),w,0,u,g)}(),q=!0),e.l_desc=new N(e.dyn_ltree,_),e.d_desc=new N(e.dyn_dtree,L),e.bl_desc=new N(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,F(e)},i._tr_stored_block=J,i._tr_flush_block=function(e,t,i,a){var r,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return n;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return o;return n}(e)),K(e,e.l_desc),K(e,e.d_desc),l=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=u-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=r&&(r=s)):r=s=i+5,i+4<=r&&-1!==t?J(e,t,i,a):4===e.strategy||s===r?(G(e,2+(a?1:0),3),X(e,E,P)):(G(e,4+(a?1:0),3),function(e,t,i,a){var n;for(G(e,t-257,5),G(e,i-1,5),G(e,a-4,4),n=0;n<a;n++)G(e,e.bl_tree[2*x[n]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),X(e,e.dyn_ltree,e.dyn_dtree)),F(e),a&&U(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(C[i]+c+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){var t;G(e,2,3),H(e,b,E),16===(t=e).bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,i){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){(function(e){!function(e,t){if(!e.setImmediate){var i,a,n,o,r=1,s={},l=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,i="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){u(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",h,!1):e.attachEvent("onmessage",h),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){n.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(a=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):function(e){setTimeout(u,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var n={callback:e,args:t};return s[r]=n,i(r),r++},d.clearImmediate=p}function p(e){delete s[e]}function u(e){if(l)setTimeout(u,0,e);else{var i=s[e];if(i){l=!0;try{!function(e){var i=e.callback,a=e.args;switch(a.length){case 0:i();break;case 1:i(a[0]);break;case 2:i(a[0],a[1]);break;case 3:i(a[0],a[1],a[2]);break;default:i.apply(t,a)}}(i)}finally{p(e),l=!1}}}}function h(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&u(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==v?v:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);const zl=Vl.exports;var Fl={exports:{}};!function(e){!function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function i(e,t,i){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){s(a.response,t,i)},a.onerror=function(){console.error("could not download file")},a.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(i){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof v&&v.global===v?v:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,t,r){var s=o.URL||o.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?n(l):a(l.href)?i(e,t,r):n(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,r){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),o);else if(a(e))i(e,o,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){n(s)})}}:function(e,t,a,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return i(e,t,a);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||r)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,u=p.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){p.revokeObjectURL(u)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s}()}(Fl);class Ul{static sanitize(e){return e.replace("<","&lt;").replace(">","&gt;").replace("&","&amp;").replace("'","&#39;").replace("/","&#x2F;")}}class jl{static getExportFileName(){return`labels_${Ri.getProjectName()}_${L().format("YYYY-MM-DD-hh-mm-ss")}`}static saveAs(e,t){const i=new Blob([e],{type:"text/plain;charset=utf-8"});try{Fl.exports.saveAs(i,t)}catch(a){throw new Error(a)}}}class Wl{static export(e){switch(e){case Sl.YOLO:Wl.exportAsYOLO();break;case Sl.VOC:Wl.exportAsVOC();break;case Sl.CSV:Wl.exportAsCSV();break;default:return}}static exportAsYOLO(){const e=new zl;_i.getImagesData().forEach(t=>{const i=Wl.wrapRectLabelsIntoYOLO(t);if(i){const n=t.fileData.name.replace(/\.[^/.]+$/,".txt");try{e.file(n,i)}catch(a){throw new Error(a)}}});try{e.generateAsync({type:"blob"}).then(e=>{Fl.exports.saveAs(e,`${jl.getExportFileName()}.zip`)})}catch(t){throw new Error(t)}}static wrapRectLabelIntoYOLO(e,t,i){const a=e=>Ut.snapValueToRange(e,0,1).toFixed(6),n=S.exports.findIndex(t,{id:e.labelId}).toString(),o=jt.getCenter(e.rect),r=jt.getSize(e.rect),s=[o.x/i.width,o.y/i.height,r.width/i.width,r.height/i.height];let[l,c,d,p]=s.map(e=>parseFloat(a(e)));l+d/2>1&&(d=2*(1-l)),l-d/2<0&&(d=2*l),c+p/2>1&&(p=2*(1-c)),c-p/2<0&&(p=2*c);return[n,...[l,c,d,p].map(e=>a(e))].join(" ")}static wrapRectLabelIntoCSV(e,t,i,a){const n=S.exports.findLast(t,{id:e.labelId});return[n?n.name:"",Math.round(e.rect.x).toString(),Math.round(e.rect.y).toString(),Math.round(e.rect.width).toString(),Math.round(e.rect.height).toString(),a,i.width.toString(),i.height.toString()].join(Ke.CSV_SEPARATOR)}static wrapRectLabelsIntoYOLO(e){if(0===e.labelRects.length||!e.loadStatus)return null;const t=_i.getLabelNames(),i=ti.getById(e.id),a={width:i.width,height:i.height};return e.labelRects.filter(e=>null!==e.labelId).map(e=>Wl.wrapRectLabelIntoYOLO(e,t,a)).join("\n")}static exportAsVOC(){const e=new zl;_i.getImagesData().forEach(t=>{const i=Wl.wrapImageIntoVOC(t);if(i){const n=t.fileData.name.replace(/\.[^/.]+$/,".xml");try{e.file(n,i)}catch(a){throw new Error(a)}}});try{e.generateAsync({type:"blob"}).then(e=>{Fl.exports.saveAs(e,`${jl.getExportFileName()}.zip`)})}catch(t){throw new Error(t)}}static wrapRectLabelsIntoVOC(e){if(0===e.labelRects.length||!e.loadStatus)return null;const t=_i.getLabelNames();return e.labelRects.map(e=>{const i=S.exports.findLast(t,{id:e.labelId});return(i?["\t<object>",`\t\t<name>${i.name}</name>`,"\t\t<pose>Unspecified</pose>","\t\t<truncated>0</truncated>","\t\t<difficult>0</difficult>","\t\t<bndbox>",`\t\t\t<xmin>${Math.round(e.rect.x)}</xmin>`,`\t\t\t<ymin>${Math.round(e.rect.y)}</ymin>`,`\t\t\t<xmax>${Math.round(e.rect.x+e.rect.width)}</xmax>`,`\t\t\t<ymax>${Math.round(e.rect.y+e.rect.height)}</ymax>`,"\t\t</bndbox>","\t</object>"]:[]).join("\n")}).join("\n")}static wrapImageIntoVOC(e){const t=Wl.wrapRectLabelsIntoVOC(e),i=Ul.sanitize(Ri.getProjectName());if(t){const a=ti.getById(e.id);return["<annotation>",`\t<folder>${i}</folder>`,`\t<filename>${e.fileData.name}</filename>`,`\t<path>/${i}/${e.fileData.name}</path>`,"\t<source>","\t\t<database>Unspecified</database>","\t</source>","\t<size>",`\t\t<width>${a.width}</width>`,`\t\t<height>${a.height}</height>`,"\t\t<depth>3</depth>","\t</size>",t,"</annotation>"].join("\n")}return null}static exportAsCSV(){try{const e=_i.getImagesData().map(e=>Wl.wrapRectLabelsIntoCSV(e)).filter(e=>!!e);e.unshift(Ke.RECT_LABELS_EXPORT_CSV_COLUMN_NAMES);const t=e.join("\n"),i=`${jl.getExportFileName()}.csv`;jl.saveAs(t,i)}catch(e){throw new Error(e)}}static wrapRectLabelsIntoCSV(e){if(0===e.labelRects.length||!e.loadStatus)return null;const t=ti.getById(e.id),i=_i.getLabelNames(),a={width:t.width,height:t.height};return e.labelRects.filter(e=>null!==e.labelId).map(t=>Wl.wrapRectLabelIntoCSV(t,i,a,e.fileData.name)).join("\n")}}class Xl{static export(e){e===Sl.CSV&&Xl.exportAsCSV()}static exportAsCSV(){const e=_i.getImagesData().map(e=>Xl.wrapRectLabelsIntoCSV(e)).filter(e=>!!e).join("\n"),t=`${jl.getExportFileName()}.csv`;jl.saveAs(e,t)}static wrapRectLabelsIntoCSV(e){if(0===e.labelPoints.length||!e.loadStatus)return null;const t=ti.getById(e.id),i=_i.getLabelNames();return e.labelPoints.map(a=>{const n=S.exports.findLast(i,{id:a.labelId});return(n?[n.name,Math.round(a.point.x).toString(),Math.round(a.point.y).toString(),e.fileData.name,t.width.toString(),t.height.toString()]:[]).join(",")}).join("\n")}}class Kl{static export(){const e=_i.getImagesData(),t=_i.getLabelNames(),i=JSON.stringify(Kl.mapImagesDataToVGGObject(e,t)),a=`${jl.getExportFileName()}.json`;jl.saveAs(i,a)}static mapImagesDataToVGGObject(e,t){return e.reduce((e,i)=>{const a=Kl.mapImageDataToVGGFileData(i,t);return a&&(e[i.fileData.name]=a),e},{})}static mapImageDataToVGGFileData(e,t){const i=Kl.mapImageDataToVGG(e,t);return i?{fileref:"",size:e.fileData.size,filename:e.fileData.name,base64_img_data:"",file_attributes:{},regions:i}:null}static mapImageDataToVGG(e,t){if(!(e.loadStatus&&e.labelPolygons&&e.labelPolygons.length&&t&&t.length))return null;const i=Kl.getValidPolygonLabels(e);return i.length?i.reduce((e,i,a)=>{const n=S.exports.findLast(t,{id:i.labelId});return n&&(e[a.toString()]={shape_attributes:Kl.mapPolygonToVGG(i.vertices),region_attributes:{label:n.name}}),e},{}):null}static getValidPolygonLabels(e){return e.labelPolygons.filter(e=>null!==e.labelId&&!!e.vertices.length)}static mapPolygonToVGG(e){if(!e||!e.length)return null;return{name:"polygon",all_points_x:e.map(e=>e.x).concat(e[0].x),all_points_y:e.map(e=>e.y).concat(e[0].y)}}}class Yl{static export(){const e=_i.getImagesData(),t=_i.getLabelNames(),i=Ri.getProjectName(),a=Yl.mapImagesDataToCOCOObject(e,t,i),n=JSON.stringify(a),o=`${jl.getExportFileName()}.json`;jl.saveAs(n,o)}static mapImagesDataToCOCOObject(e,t,i){return{info:Yl.getInfoComponent(i),images:Yl.getImagesComponent(e),annotations:Yl.getAnnotationsComponent(e,t),categories:Yl.getCategoriesComponent(t)}}static getInfoComponent(e){return{description:e}}static getCategoriesComponent(e){return e.map((e,t)=>({id:t+1,name:e.name}))}static getImagesComponent(e){return e.filter(e=>e.loadStatus).filter(e=>0!==e.labelPolygons.length).map((e,t)=>{const i=ti.getById(e.id);return{id:t+1,width:i.width,height:i.height,file_name:e.fileData.name}})}static getAnnotationsComponent(e,t){const i=Yl.mapLabelsData(t);let a=0;const n=e.filter(e=>e.loadStatus).filter(e=>0!==e.labelPolygons.length).map((e,t)=>e.labelPolygons.map(e=>({id:a++,iscrowd:0,image_id:t+1,category_id:i[e.labelId],segmentation:Yl.getCOCOSegmentation(e.vertices),bbox:Yl.getCOCOBbox(e.vertices),area:Yl.getCOCOArea(e.vertices)})));return S.exports.flatten(n)}static mapLabelsData(e){return e.reduce((e,t,i)=>(e[t.id]=i+1,e),{})}static getCOCOSegmentation(e){const t=e.map(e=>[e.x,e.y]);return[S.exports.flatten(t)]}static getCOCOBbox(e){let t=e[0].x,i=e[0].x,a=e[0].y,n=e[0].y;for(const o of e)t>o.x&&(t=o.x),i<o.x&&(i=o.x),a>o.y&&(a=o.y),n<o.y&&(n=o.y);return[t,a,i-t,n-a]}static getCOCOArea(e){let t=0,i=e.length-1;for(let a=0;a<e.length;a++)t+=(e[i].x+e[a].x)*(e[i].y-e[a].y),i=a;return Math.abs(t/2)}}class Zl{static export(e){switch(e){case Sl.VGG:Kl.export();break;case Sl.COCO:Yl.export();break;default:return}}}class ql{static export(e){e===Sl.CSV&&ql.exportAsCSV()}static exportAsCSV(){const e=_i.getImagesData().map(e=>ql.wrapLineLabelsIntoCSV(e)).filter(e=>!!e).join("\n"),t=`${jl.getExportFileName()}.csv`;jl.saveAs(e,t)}static wrapLineLabelsIntoCSV(e){if(0===e.labelLines.length||!e.loadStatus)return null;const t=ti.getById(e.id),i=_i.getLabelNames();return e.labelLines.map(a=>{const n=S.exports.findLast(i,{id:a.labelId});return(n?[n.name,Math.round(a.line.start.x).toString(),Math.round(a.line.start.y).toString(),Math.round(a.line.end.x).toString(),Math.round(a.line.end.y).toString(),e.fileData.name,t.width.toString(),t.height.toString()]:[]).join(",")}).join("\n")}}class Jl{static export(e){switch(e){case Sl.CSV:Jl.exportAsCSV();break;case Sl.JSON:Jl.exportAsJSON();break;default:return}}static exportAsCSV(){const e=_i.getImagesData().filter(e=>e.labelNameIds.length>0).map(e=>Jl.wrapLabelNamesIntoCSV(e)).join("\n"),t=`${jl.getExportFileName()}.csv`;jl.saveAs(e,t)}static exportAsJSON(){const e=_i.getImagesData().filter(e=>e.labelNameIds.length>0).map(e=>({image:e.fileData.name,annotations:Jl.wrapLabelNamesIntoJSON(e)})),t=JSON.stringify(e),i=`${jl.getExportFileName()}.json`;jl.saveAs(t,i)}static wrapLabelNamesIntoCSV(e){if(0===e.labelNameIds.length||!e.loadStatus)return null;const t=_i.getLabelNames(),i=e.labelNameIds.map(e=>S.exports.findLast(t,{id:e}).name);return(0!==i.length?[e.fileData.name,`"[${i.toString()}]"`]:[]).join(",")}static wrapLabelNamesIntoJSON(e){if(0===e.labelNameIds.length||!e.loadStatus)return[];const t=_i.getLabelNames();return e.labelNameIds.map(e=>S.exports.findLast(t,{id:e}).name)}}const $l={[Ye.RECT]:[{type:Sl.YOLO,label:"A .zip package containing files in YOLO format."},{type:Sl.VOC,label:"A .zip package containing files in VOC XML format."},{type:Sl.CSV,label:"Single CSV file."}],[Ye.POINT]:[{type:Sl.CSV,label:"Single CSV file."}],[Ye.LINE]:[{type:Sl.CSV,label:"Single CSV file."}],[Ye.POLYGON]:[{type:Sl.VGG,label:"Single file in VGG JSON format."},{type:Sl.COCO,label:"Single file in COCO JSON format."}],[Ye.IMAGE_RECOGNITION]:[{type:Sl.CSV,label:"Single CSV file."},{type:Sl.JSON,label:"Single JSON file."}]},Ql=Ve(e=>({activeLabelType:e.labels.activeLabelType}),{})(({activeLabelType:e})=>{const[t,a]=i.exports.useState(e),[n,o]=i.exports.useState(null),r=e=>e.map(e=>d("div",{className:"OptionsItem",onClick:()=>{return t=e.type,void o(t);var t},children:[e.type===n?s("img",{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}):s("img",{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),e.label]},e.type));return s(Tl,{activeLabelType:t,title:`Export ${t.toLowerCase()} annotations`,onLabelTypeChange:e=>{a(e),o(null)},acceptLabel:"Export",onAccept:e=>{switch(e){case Ye.RECT:Wl.export(n);break;case Ye.POINT:Xl.export(n);break;case Ye.LINE:ql.export(n);break;case Ye.POLYGON:Zl.export(n);break;case Ye.IMAGE_RECOGNITION:Jl.export(n)}vr.close()},disableAcceptButton:!n,rejectLabel:"Cancel",onReject:e=>{vr.close()},renderInternalContent:e=>d(p,{children:[s("div",{className:"Message",children:"Select label type and the file format you would like to use to export labels."}),",",s("div",{className:"Options",children:r($l[e])})]})})});var ec=(e=>(e.YOLO_V5_OBJECT_DETECTION="YOLO_V5_OBJECT_DETECTION",e.SSD_OBJECT_DETECTION="SSD_OBJECT_DETECTION",e.POSE_DETECTION="POSE_DETECTION",e.BACKEND_OBJECT_DETECTION="BACKEND_OBJECT_DETECTION",e))(ec||{});const tc=[{model:ec.BACKEND_OBJECT_DETECTION,name:"YOLO (Backend) - object detection using server",flag:!1},{model:ec.YOLO_V5_OBJECT_DETECTION,name:"YOLOv5 - object detection using rectangles",flag:!1},{model:ec.SSD_OBJECT_DETECTION,name:"COCO SSD - object detection using rectangles",flag:!1},{model:ec.POSE_DETECTION,name:"POSE-NET - pose estimation using points",flag:!1}],ic=Ve(e=>({}),{updateActivePopupType:Ti,updateAIBackendObjectDetectorStatus:function(e){return{type:ii.UPDATE_AI_BACKEND_OBJECT_DETECTOR_STATUS,payload:{isAIBackendObjectDetectorLoaded:e}}}})(({updateActivePopupType:e,updateAIBackendObjectDetectorStatus:t})=>{const[a,n]=i.exports.useState(!1),[o,r]=i.exports.useState(tc),[l,c]=i.exports.useState(mr.getBaseUrl()),p=()=>{const e=S.exports.findLast(o,{flag:!0});return e?e.model:null},u=()=>o.map(e=>d("div",{className:"OptionsItem",onClick:()=>(e=>{const t=o.map(t=>t.model===e?{...t,flag:!t.flag}:{...t,flag:!1});r(t)})(e.model),children:[e.flag?s("img",{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}):s("img",{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),e.name]},e.model));return s(rl,{title:"Say hello to AI",renderContent:()=>d("div",{className:"LoadModelPopupContent",children:[s("div",{className:"Message",children:"Speed up your annotation process using AI. Don't worry, your photos are still safe. To take care of your privacy, we decided not to send your images to the server, but instead bring AI to you. Make sure that you have a fast and stable connection - it may take a while to load the model."}),p()===ec.BACKEND_OBJECT_DETECTION&&d("div",{style:{marginTop:"10px",padding:"10px",background:"#f5f5f5",borderRadius:"5px",fontSize:"12px"},children:[d("div",{style:{marginBottom:"10px"},children:[s("strong",{children:"Backend URL:"}),s("input",{type:"text",value:l,onChange:e=>c(e.target.value),style:{width:"100%",padding:"5px",marginTop:"5px",color:"black"}})]}),d("div",{style:{color:"#666"},children:[s("strong",{children:"Info:"})," Backend harus mengembalikan respon JSON dengan format:",s("pre",{style:{background:"#eee",padding:"5px",marginTop:"5px"},children:'{\n  "success": true,\n  "annotations": [\n    { "bbox": [x, y, w, h], "class": "label", "score": 0.9 }\n  ]\n}'})]})]}),s("div",{className:"Companion",children:a?s(Jt,{size:40,color:fi.getLeadingColor(),loading:!0}):s("div",{className:"Options",children:u()})})]}),acceptLabel:"Use model!",onAccept:async()=>{switch(n(!0),p()){case ec.BACKEND_OBJECT_DETECTION:mr.setBaseUrl(l);await mr.healthCheck()?(t(!0),fr.detectRectsForActiveImage(),vr.close()):(alert(`Backend server tidak tersedia di ${l}. Pastikan server berjalan.`),n(!1));break;case ec.POSE_DETECTION:Ca.loadModel(()=>{vr.close()});break;case ec.SSD_OBJECT_DETECTION:Ea.loadModel(()=>{vr.close()});break;case ec.YOLO_V5_OBJECT_DETECTION:e(We.LOAD_YOLO_V5_MODEL)}},disableAcceptButton:a||!p(),rejectLabel:"I'm going on my own",onReject:()=>{vr.close()},disableRejectButton:a})}),ac={YOLO_V5_N_COCO:{config:Na,name:"YOLOv5n / COCO"},YOLO_V5_S_COCO:{config:ka,name:"YOLOv5s / COCO"},YOLO_V5_M_COCO:{config:Ba,name:"YOLOv5m / COCO"}},nc=Ve(e=>({}),{updateActivePopupTypeAction:Ti,submitNewNotificationAction:Ta})(({updateActivePopupTypeAction:e,submitNewNotificationAction:t})=>{const[a,n]=i.exports.useState("UPLOAD"),[o,r]=i.exports.useState("YOLO_V5_N_COCO"),[l,c]=i.exports.useState(!1),[u,h]=i.exports.useState([]),[m,f]=i.exports.useState([]),{acceptedFiles:g,getRootProps:b,getInputProps:v}=el({onDrop:e=>{const i=e.filter(e=>e.name.endsWith("json")),a=e.filter(e=>e.name.endsWith("bin")),n=e.filter(e=>e.name.endsWith("txt"));if(0===n.length&&t(ya.createErrorNotification(wa[Aa.LABELS_FILE_UPLOAD_ERROR])),1===i.length&&1===n.length&&a.length>0){const e=e=>{f(e),h([...i,...a])},o=e=>{e instanceof cl&&t(ya.createErrorNotification(wa[Aa.NON_UNIQUE_LABEL_NAMES_ERROR]))};pl.loadLabelsList(n[0],e,o)}}}),T=e=>{n(e),h([]),f([])},S="UPLOAD"===a&&(0===u.length||0===m.length);return s(rl,{title:"Load YOLOv5 model",renderContent:()=>{const e=!l&&"UPLOAD"===a,t=!l&&"DOWNLOAD"===a;return d("div",{className:"load-yolo-v5-model-popup",children:[d("div",{className:"left-container",children:[s(Er,{image:"ico/upload.png",imageAlt:"upload model weights",buttonSize:{width:40,height:40},padding:15,onClick:()=>T("UPLOAD"),externalClassName:"monochrome",isActive:"UPLOAD"===a}),s(Er,{image:"ico/download.png",imageAlt:"download model weights",buttonSize:{width:40,height:40},padding:15,onClick:()=>T("DOWNLOAD"),externalClassName:"monochrome",isActive:"DOWNLOAD"===a})]}),d("div",{className:"right-container",children:[l&&s("div",{className:"loader",children:s(Jt,{size:40,color:fi.getLeadingColor(),loading:!0})}),!l&&s("div",{className:"message",children:"DOWNLOAD"===a?"Use one of ours pretrained YOLOv5 models to speed up annotation process.":"Drag and drop your own YOLOv5 model converted to tensorflow.js format and speed up annotation process. Make sure to upload all required files: model.json, model shards as well as .txt containing list of detected classes names."}),t&&s("div",{className:"options",children:Object.entries(ac).map(([e,t])=>d("div",{className:"options-item",onClick:()=>r(e),children:[s("img",e===o?{draggable:!1,src:"ico/checkbox-checked.png",alt:"checked"}:{draggable:!1,src:"ico/checkbox-unchecked.png",alt:"unchecked"}),t.name]},e))}),e&&s("div",{...b({className:"drop-zone"}),children:0===u.length&&0===m.length?d(p,{children:[s("input",{...v()}),s("img",{draggable:!1,alt:"upload",src:"ico/box-opened.png"}),s("p",{className:"extraBold",children:"Drop model files"}),s("p",{children:"or"}),s("p",{className:"extraBold",children:"Click here to select them"})]}):d(p,{children:[s("input",{...v()}),s("img",{draggable:!1,alt:"uploaded",src:"ico/box-closed.png"}),d("p",{className:"extraBold",children:[u.length," model files"]}),d("p",{className:"extraBold",children:[m.length," class names"]})]})})]})]})},disableAcceptButton:S,acceptLabel:"Use model!",onAccept:()=>{const e=()=>{vr.close()},i=()=>{c(!1);const e="UPLOAD"===a?Aa.MODEL_LOAD_ERROR:Aa.MODEL_DOWNLOAD_ERROR;t(ya.createErrorNotification(wa[e]))};if(c(!0),"DOWNLOAD"===a)Fa.loadModel(ac[o].config,e,i);else{const t={source:u,classNames:m.map(e=>e.name)};Fa.loadModel(t,e,i)}},rejectLabel:"Back",onReject:()=>{e(We.LOAD_AI_MODEL)}})}),oc=({title:e,acceptLabel:t,onAccept:i,disableAcceptButton:a,rejectLabel:n,onReject:o,renderContent:r,renderSideMenuContent:l})=>s(rl,{title:e,renderContent:()=>d("div",{className:"generic-side-menu-popup",children:[s("div",{className:"left-container",children:l()}),s("div",{className:"right-container",children:r()})]}),acceptLabel:t,disableAcceptButton:a,onAccept:i,rejectLabel:n,onReject:o});var rc=(e=>(e.ROBOFLOW="ROBOFLOW",e.MAKESENSE="MAKESENSE",e))(rc||{});const sc={[rc.ROBOFLOW]:{name:"Roboflow Inference Server",imageSrc:"ico/roboflow-logo.png",imageAlt:"roboflow-inference-server",isDisabled:!1},[rc.MAKESENSE]:{name:"Make Sense Inference Server",imageSrc:"ico/make-sense-ico-transparent.png",imageAlt:"make-sense-inference-server",isDisabled:!0}},lc=Ve(e=>({roboflowAPIDetails:e.ai.roboflowAPIDetails}),{submitNewNotificationAction:Ta,updateRoboflowAPIDetailsAction:va})(({roboflowAPIDetails:e,submitNewNotificationAction:t,updateRoboflowAPIDetailsAction:a})=>{const[n,o]=i.exports.useState(rc.ROBOFLOW),[r,l]=i.exports.useState(!1),[c,u]=i.exports.useState(e.model),[h,m]=i.exports.useState(e.key),f=()=>!!r||(n!==rc.ROBOFLOW||(""===c||""===h)),g=e=>{u(e.target.value)},b=e=>{m(e.target.value)};return s(oc,{title:sc[n].name,renderContent:()=>r?s("div",{className:"loader",children:s(Jt,{size:40,color:fi.getLeadingColor(),loading:!0})}):n===rc.ROBOFLOW?d(p,{children:[s("div",{className:"message",children:"Provide details of the Roboflow model you want to run over tha API, as well as your API key."}),d("div",{className:"details",children:[s(ml,{variant:"standard",id:"roboflow-model",autoComplete:"off",autoFocus:!0,type:"text",margin:"dense",label:"roboflow model",value:c,onChange:g,style:{width:280},InputLabelProps:{shrink:!0}}),s(ml,{variant:"standard",id:"roboflow-api- key",autoComplete:"off",autoFocus:!0,type:"password",margin:"dense",label:"roboflow api key",value:h,onChange:b,style:{width:280},InputLabelProps:{shrink:!0}})]})]}):s("div",{className:"load-model-popup-content"}),renderSideMenuContent:()=>Object.entries(sc).map(([e,i],a)=>{return s(Er,{image:i.imageSrc,imageAlt:i.imageAlt,buttonSize:{width:40,height:40},padding:20,onClick:(r=e,()=>{sc[r].isDisabled?t(ya.createMessageNotification(wa[Aa.UNSUPPORTED_INFERENCE_SERVER_MESSAGE])):o(r)}),isActive:n===e,isDisabled:i.isDisabled},a);var r}),acceptLabel:"Connect",onAccept:()=>{if(f())return;l(!0),lr.loadModel({status:!1,model:c,key:h},()=>{a({status:!0,model:c,key:h}),vr.close();const e=_i.getActiveImageData();gr.detect(e.id,ti.getById(e.id))},()=>{t(ya.createErrorNotification(wa[Aa.ROBOFLOW_INFERENCE_SERVER_ERROR])),l(!1)})},disableAcceptButton:f(),rejectLabel:"Back",onReject:()=>{vr.close()}})}),cc=Ve(e=>({activePopupType:e.general.activePopupType}))(({activePopupType:e})=>e&&s("div",{className:"PopupView",children:(()=>{switch(e){case We.LOAD_LABEL_NAMES:return s(ul,{});case We.EXPORT_ANNOTATIONS:return s(Ql,{});case We.IMPORT_ANNOTATIONS:return s(Hl,{});case We.INSERT_LABEL_NAMES:return s(fl,{isUpdate:!1});case We.UPDATE_LABEL:return s(fl,{isUpdate:!0});case We.EXIT_PROJECT:return s(gl,{});case We.IMPORT_IMAGES:return s(bl,{});case We.LOAD_AI_MODEL:return s(ic,{});case We.LOAD_YOLO_V5_MODEL:return s(nc,{});case We.CONNECT_AI_MODEL_VIA_API:return s(lc,{});case We.SUGGEST_LABEL_NAMES:return s(vl,{});case We.LOADER:return s(Jt,{size:50,color:fi.getLeadingColor(),loading:!0});default:return null}})()})),dc=Ve(e=>({size:e.general.windowSize}),{})(({size:e})=>{const[t,a]=i.exports.useState(0),n=e=>e.map(e=>s("div",{className:"EditorFeaturesTiles",children:d("div",{className:"EditorFeaturesTilesWrapper",children:[s("img",{draggable:!1,alt:e.imageAlt,src:e.imageSrc}),s("div",{className:"EditorFeatureLabel",children:e.displayText})]})},e.displayText)),o=d("div",{className:y("MobileTopNavigationBar",{Hide:t<350,Show:t>=350}),children:[s("div",{className:"NavigationBarGroupWrapper",children:d("div",{className:"Header",children:[s("img",{draggable:!1,alt:"make-sense",src:"/make-sense-ico-transparent.png"}),"Make Sense"]})}),s("div",{className:"TriangleHorizontal Bottom",children:s("div",{className:"TriangleHorizontalContent"})})]}),r=d("div",{className:"FirstStage",children:[s("img",{draggable:!1,alt:"main-logo",src:"ico/main-image-color.png"}),s("div",{className:"TriangleHorizontal Bottom",children:s("div",{className:"TriangleHorizontalContent"})})]}),l=s("div",{className:"SecondStage",children:n(as.slice(0,3))}),c=d("div",{className:"ThirdStage",children:[n(as.slice(3,6)),s("div",{className:"TriangleHorizontal Top",children:s("div",{className:"TriangleHorizontalContent"})}),s("div",{className:"TriangleHorizontal Bottom",children:s("div",{className:"TriangleHorizontalContent"})})]}),p=d("div",{className:"FourthStage",children:[s("div",{className:"Message",children:"Due to the small size of the screen we do not support our editor on mobile devices. Check what you missed and visit us from a desktop."}),s("div",{className:"SocialMediaWrapper",children:(u={width:40,height:40},is.map((e,t)=>s(Er,{buttonSize:u,image:e.imageSrc,imageAlt:e.imageAlt,href:e.href},t)))})]});var u;return d("div",{className:"MobileMainView",children:[o,s(zt,{onScrollFrame:e=>{a(e.scrollTop)},children:d("div",{className:"MobileMainViewContent",style:{width:e.width},children:[r,l,c,p]})})]})}),pc=()=>d("div",{className:"SizeItUpView",children:[s("p",{className:"extraBold",children:"Ops... This window is to tight for me!"}),s("img",{draggable:!1,alt:"small_window",src:"ico/small_window.png"}),d("p",{className:"extraBold",children:["Please... make it at least ",Ke.EDITOR_MIN_WIDTH," x ",Ke.EDITOR_MIN_HEIGHT," px."]})]}),uc={deleteNotificationByIdAction:function(e){return{type:ii.DELETE_NOTIFICATION_BY_ID,payload:{id:e}}}},hc=Ve(e=>({queue:e.notifications.queue}),uc)(e=>{const[t,a]=i.exports.useState("IDLE");e.queue.length>0&&"IDLE"===t&&a("IN");const n=e.queue[0],o=()=>{a("OUT")},r=t=>{switch(t.animationName){case"animation-in":a("DISPLAY");break;case"animation-display":a("OUT");break;case"animation-out":e.deleteNotificationByIdAction(n.id),a("IDLE")}};return"IDLE"!==t?n&&s("div",{className:y("notification-wrapper",{in:"IN"===t,display:"DISPLAY"===t,out:"OUT"===t}),onAnimationEnd:r,onClick:o,children:d("div",{className:y("notification",{error:n.type===Sa.ERROR,success:n.type===Sa.SUCCESS,message:n.type===Sa.MESSAGE,warning:n.type===Sa.WARNING}),children:[s("div",{className:"header",children:n.header}),s("div",{className:"content",children:n.description}),s("div",{className:"loader"})]})},n.id):null}),mc=Ve(e=>({projectType:e.general.projectData.type,windowSize:e.general.windowSize,isSSDObjectDetectorLoaded:e.ai.isSSDObjectDetectorLoaded,isPoseDetectorLoaded:e.ai.isPoseDetectorLoaded,isYOLOV5ObjectDetectorLoaded:e.ai.isYOLOV5ObjectDetectorLoaded,roboflowAPIDetails:e.ai.roboflowAPIDetails}))(({projectType:e,windowSize:t,isObjectDetectorLoaded:i,isPoseDetectionLoaded:a,isYOLOV5ObjectDetectorLoaded:n,roboflowAPIDetails:o})=>{const r=i||a||n||""!==o.model&&""!==o.key&&o.status;return d("div",{className:y("App",{AI:r}),draggable:!1,children:[Hr.mobileDeviceData.manufacturer&&Hr.mobileDeviceData.os?s(dc,{}):e?t.height<Ke.EDITOR_MIN_HEIGHT||t.width<Ke.EDITOR_MIN_WIDTH?s(pc,{}):s(es,{}):s(ol,{}),s(cc,{}),s(hc,{})]})});function fc(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gc="function"==typeof Symbol&&Symbol.observable||"@@observable",bc=function(){return Math.random().toString(36).substring(7).split("").join(".")},vc={INIT:"@@redux/INIT"+bc(),REPLACE:"@@redux/REPLACE"+bc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bc()}};function Tc(e,t,i){var a;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(fc(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(fc(1));return i(Tc)(e,t)}if("function"!=typeof e)throw new Error(fc(2));var n=e,o=t,r=[],s=r,l=!1;function c(){s===r&&(s=r.slice())}function d(){if(l)throw new Error(fc(3));return o}function p(e){if("function"!=typeof e)throw new Error(fc(4));if(l)throw new Error(fc(5));var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error(fc(6));t=!1,c();var i=s.indexOf(e);s.splice(i,1),r=null}}}function u(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(fc(7));if(void 0===e.type)throw new Error(fc(8));if(l)throw new Error(fc(9));try{l=!0,o=n(o,e)}finally{l=!1}for(var t=r=s,i=0;i<t.length;i++){(0,t[i])()}return e}return u({type:vc.INIT}),(a={dispatch:u,subscribe:p,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(fc(10));n=e,u({type:vc.REPLACE})}})[gc]=function(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(fc(11));function i(){e.next&&e.next(d())}return i(),{unsubscribe:t(i)}}})[gc]=function(){return this},e},a}const Sc={activeImageIndex:null,activeLabelNameId:null,activeLabelType:null,activeLabelId:null,highlightedLabelId:null,imagesData:[],firstLabelCreatedFlag:!1,labels:[]};const yc={windowSize:null,activePopupType:null,customCursorStyle:Oi.DEFAULT,activeContext:null,preventCustomCursor:!1,imageDragMode:!1,crossHairVisible:!0,enablePerClassColoration:!0,projectData:{type:null,name:"my-project-name"},zoom:$i.MIN_ZOOM,fixZoom:!0,moveMode:!1};const Ac={suggestedLabelList:[],rejectedSuggestedLabelList:[],isSSDObjectDetectorLoaded:!1,isYOLOV5ObjectDetectorLoaded:!1,isPoseDetectorLoaded:!1,roboflowAPIDetails:{status:!1,model:"",key:""},isAIDisabled:!1,isAIBackendObjectDetectorLoaded:!1};const wc={queue:[]};const xc=function(e){for(var t=Object.keys(e),i={},a=0;a<t.length;a++){var n=t[a];"function"==typeof e[n]&&(i[n]=e[n])}var o,r=Object.keys(i);try{!function(e){Object.keys(e).forEach(function(t){var i=e[t];if(void 0===i(void 0,{type:vc.INIT}))throw new Error(fc(12));if(void 0===i(void 0,{type:vc.PROBE_UNKNOWN_ACTION()}))throw new Error(fc(13))})}(i)}catch(s){o=s}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var a=!1,n={},s=0;s<r.length;s++){var l=r[s],c=i[l],d=e[l],p=c(d,t);if(void 0===p)throw t&&t.type,new Error(fc(14));n[l]=p,a=a||p!==d}return(a=a||r.length!==Object.keys(e).length)?n:e}}({general:function(e=yc,t){switch(t.type){case ii.UPDATE_WINDOW_SIZE:return{...e,windowSize:t.payload.windowSize};case ii.UPDATE_ACTIVE_POPUP_TYPE:return{...e,activePopupType:t.payload.activePopupType};case ii.UPDATE_CUSTOM_CURSOR_STYLE:return{...e,customCursorStyle:t.payload.customCursorStyle};case ii.UPDATE_CONTEXT:return{...e,activeContext:t.payload.activeContext};case ii.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS:return{...e,preventCustomCursor:t.payload.preventCustomCursor};case ii.UPDATE_IMAGE_DRAG_MODE_STATUS:return{...e,imageDragMode:t.payload.imageDragMode};case ii.UPDATE_CROSS_HAIR_VISIBLE_STATUS:return{...e,crossHairVisible:t.payload.crossHairVisible};case ii.UPDATE_PROJECT_DATA:return{...e,projectData:t.payload.projectData};case ii.UPDATE_ZOOM:return{...e,zoom:t.payload.zoom};case ii.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS:return{...e,enablePerClassColoration:t.payload.enablePerClassColoration};case ii.UPDATE_FIX_ZOOM_STATUS:return{...e,fixZoom:t.payload.fixZoom};case ii.UPDATE_MOVE_MODE_STATUS:return{...e,moveMode:t.payload.moveMode};default:return e}},labels:function(e=Sc,t){switch(t.type){case ii.UPDATE_ACTIVE_IMAGE_INDEX:return{...e,activeImageIndex:t.payload.activeImageIndex};case ii.UPDATE_ACTIVE_LABEL_NAME_ID:return{...e,activeLabelNameId:t.payload.activeLabelNameId};case ii.UPDATE_ACTIVE_LABEL_ID:return{...e,activeLabelId:t.payload.activeLabelId};case ii.UPDATE_HIGHLIGHTED_LABEL_ID:return{...e,highlightedLabelId:t.payload.highlightedLabelId};case ii.UPDATE_ACTIVE_LABEL_TYPE:return{...e,activeLabelType:t.payload.activeLabelType};case ii.UPDATE_IMAGE_DATA_BY_ID:return{...e,imagesData:e.imagesData.map(e=>e.id===t.payload.id?t.payload.newImageData:e)};case ii.ADD_IMAGES_DATA:return{...e,imagesData:e.imagesData.concat(t.payload.imageData)};case ii.UPDATE_IMAGES_DATA:return{...e,imagesData:t.payload.imageData};case ii.UPDATE_LABEL_NAMES:return{...e,labels:t.payload.labels};case ii.UPDATE_FIRST_LABEL_CREATED_FLAG:return{...e,firstLabelCreatedFlag:t.payload.firstLabelCreatedFlag};default:return e}},ai:function(e=Ac,t){switch(t.type){case ii.UPDATE_AI_BACKEND_OBJECT_DETECTOR_STATUS:return{...e,isAIBackendObjectDetectorLoaded:t.payload.isAIBackendObjectDetectorLoaded};case ii.UPDATE_SUGGESTED_LABEL_LIST:return{...e,suggestedLabelList:t.payload.labelList};case ii.UPDATE_REJECTED_SUGGESTED_LABEL_LIST:return{...e,rejectedSuggestedLabelList:t.payload.labelList};case ii.UPDATE_SSD_OBJECT_DETECTOR_STATUS:return{...e,isSSDObjectDetectorLoaded:t.payload.isSSDObjectDetectorLoaded};case ii.UPDATE_YOLO_V5_OBJECT_DETECTOR_STATUS:return{...e,isYOLOV5ObjectDetectorLoaded:t.payload.isYOLOV5ObjectDetectorLoaded};case ii.UPDATE_POSE_DETECTOR_STATUS:return{...e,isPoseDetectorLoaded:t.payload.isPoseDetectorLoaded};case ii.UPDATE_DISABLED_AI_FLAG:return{...e,isAIDisabled:t.payload.isAIDisabled};case ii.UPDATE_ROBOFLOW_API_DETAILS:return{...e,roboflowAPIDetails:t.payload.roboflowAPIDetails};default:return e}},notifications:function(e=wc,t){switch(t.type){case ii.SUBMIT_NEW_NOTIFICATION:return e.queue.length>0&&e.queue.at(-1).type===t.payload.notification.type?e:{...e,queue:[...e.queue,t.payload.notification]};case ii.DELETE_NOTIFICATION_BY_ID:return{...e,queue:e.queue.filter(e=>e.id!==t.payload.id)};default:return e}}});class Ec{static isDev(){return!1}static isProd(){return!0}}const Pc=class{static inti(){Pc.handleResize(),Pc.detectDeviceParams(),Pc.handleAccidentalPageExit(),window.addEventListener(Li.RESIZE,Pc.handleResize),window.addEventListener(Li.MOUSE_WHEEL,Pc.disableGenericScrollZoom,{passive:!1}),window.addEventListener(Li.KEY_DOWN,Pc.disableUnwantedKeyBoardBehaviour),window.addEventListener(Li.KEY_PRESS,Pc.disableUnwantedKeyBoardBehaviour),yr.init()}};let Ic=Pc;t(Ic,"handleAccidentalPageExit",()=>{window.onbeforeunload=e=>{null!=Ri.getProjectType()&&Ec.isProd()&&(e.preventDefault(),e.returnValue="")}}),t(Ic,"handleResize",()=>{var e;Cc.dispatch((e={width:window.innerWidth,height:window.innerHeight},{type:ii.UPDATE_WINDOW_SIZE,payload:{windowSize:e}}))}),t(Ic,"disableUnwantedKeyBoardBehaviour",e=>{["=","+","-"].includes(e.key)&&(e.ctrlKey||Hr.isMac&&e.metaKey)&&e.preventDefault()}),t(Ic,"disableGenericScrollZoom",e=>{(e.ctrlKey||Hr.isMac&&e.metaKey)&&e.preventDefault()}),t(Ic,"detectDeviceParams",()=>{const e=window.navigator.userAgent;Hr.mobileDeviceData=fa.getMobileDeviceData(e),Hr.isMac=fa.isMac(e),Hr.isSafari=fa.isSafari(e),Hr.isFirefox=fa.isFirefox(e)});const Cc=Tc(xc,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Ic.inti();D.createRoot(document.getElementById("root")||document.createElement("div")).render(s(a.StrictMode,{children:s(ze,{store:Cc,children:s(mc,{})})}));
